(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function I_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Hc={exports:{}},qo={},Wc={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function S_(){if(Rp)return Ie;Rp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.iterator;function P(x){return x===null||typeof x!="object"?null:(x=S&&x[S]||x["@@iterator"],typeof x=="function"?x:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,Q={};function b(x,q,ue){this.props=x,this.context=q,this.refs=Q,this.updater=ue||z}b.prototype.isReactComponent={},b.prototype.setState=function(x,q){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,q,"setState")},b.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function ge(){}ge.prototype=b.prototype;function _e(x,q,ue){this.props=x,this.context=q,this.refs=Q,this.updater=ue||z}var Z=_e.prototype=new ge;Z.constructor=_e,G(Z,b.prototype),Z.isPureReactComponent=!0;var oe=Array.isArray,Se=Object.prototype.hasOwnProperty,Ee={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function I(x,q,ue){var we,Te={},Pe=null,Le=null;if(q!=null)for(we in q.ref!==void 0&&(Le=q.ref),q.key!==void 0&&(Pe=""+q.key),q)Se.call(q,we)&&!D.hasOwnProperty(we)&&(Te[we]=q[we]);var Me=arguments.length-2;if(Me===1)Te.children=ue;else if(1<Me){for(var be=Array(Me),pt=0;pt<Me;pt++)be[pt]=arguments[pt+2];Te.children=be}if(x&&x.defaultProps)for(we in Me=x.defaultProps,Me)Te[we]===void 0&&(Te[we]=Me[we]);return{$$typeof:i,type:x,key:Pe,ref:Le,props:Te,_owner:Ee.current}}function R(x,q){return{$$typeof:i,type:x.type,key:q,ref:x.ref,props:x.props,_owner:x._owner}}function k(x){return typeof x=="object"&&x!==null&&x.$$typeof===i}function N(x){var q={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ue){return q[ue]})}var O=/\/+/g;function A(x,q){return typeof x=="object"&&x!==null&&x.key!=null?N(""+x.key):q.toString(36)}function Ze(x,q,ue,we,Te){var Pe=typeof x;(Pe==="undefined"||Pe==="boolean")&&(x=null);var Le=!1;if(x===null)Le=!0;else switch(Pe){case"string":case"number":Le=!0;break;case"object":switch(x.$$typeof){case i:case e:Le=!0}}if(Le)return Le=x,Te=Te(Le),x=we===""?"."+A(Le,0):we,oe(Te)?(ue="",x!=null&&(ue=x.replace(O,"$&/")+"/"),Ze(Te,q,ue,"",function(pt){return pt})):Te!=null&&(k(Te)&&(Te=R(Te,ue+(!Te.key||Le&&Le.key===Te.key?"":(""+Te.key).replace(O,"$&/")+"/")+x)),q.push(Te)),1;if(Le=0,we=we===""?".":we+":",oe(x))for(var Me=0;Me<x.length;Me++){Pe=x[Me];var be=we+A(Pe,Me);Le+=Ze(Pe,q,ue,be,Te)}else if(be=P(x),typeof be=="function")for(x=be.call(x),Me=0;!(Pe=x.next()).done;)Pe=Pe.value,be=we+A(Pe,Me++),Le+=Ze(Pe,q,ue,be,Te);else if(Pe==="object")throw q=String(x),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return Le}function Pt(x,q,ue){if(x==null)return x;var we=[],Te=0;return Ze(x,we,"","",function(Pe){return q.call(ue,Pe,Te++)}),we}function kt(x){if(x._status===-1){var q=x._result;q=q(),q.then(function(ue){(x._status===0||x._status===-1)&&(x._status=1,x._result=ue)},function(ue){(x._status===0||x._status===-1)&&(x._status=2,x._result=ue)}),x._status===-1&&(x._status=0,x._result=q)}if(x._status===1)return x._result.default;throw x._result}var ze={current:null},J={transition:null},he={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:J,ReactCurrentOwner:Ee};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:Pt,forEach:function(x,q,ue){Pt(x,function(){q.apply(this,arguments)},ue)},count:function(x){var q=0;return Pt(x,function(){q++}),q},toArray:function(x){return Pt(x,function(q){return q})||[]},only:function(x){if(!k(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Ie.Component=b,Ie.Fragment=n,Ie.Profiler=a,Ie.PureComponent=_e,Ie.StrictMode=s,Ie.Suspense=y,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Ie.act=ne,Ie.cloneElement=function(x,q,ue){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var we=G({},x.props),Te=x.key,Pe=x.ref,Le=x._owner;if(q!=null){if(q.ref!==void 0&&(Pe=q.ref,Le=Ee.current),q.key!==void 0&&(Te=""+q.key),x.type&&x.type.defaultProps)var Me=x.type.defaultProps;for(be in q)Se.call(q,be)&&!D.hasOwnProperty(be)&&(we[be]=q[be]===void 0&&Me!==void 0?Me[be]:q[be])}var be=arguments.length-2;if(be===1)we.children=ue;else if(1<be){Me=Array(be);for(var pt=0;pt<be;pt++)Me[pt]=arguments[pt+2];we.children=Me}return{$$typeof:i,type:x.type,key:Te,ref:Pe,props:we,_owner:Le}},Ie.createContext=function(x){return x={$$typeof:h,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:c,_context:x},x.Consumer=x},Ie.createElement=I,Ie.createFactory=function(x){var q=I.bind(null,x);return q.type=x,q},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(x){return{$$typeof:m,render:x}},Ie.isValidElement=k,Ie.lazy=function(x){return{$$typeof:w,_payload:{_status:-1,_result:x},_init:kt}},Ie.memo=function(x,q){return{$$typeof:v,type:x,compare:q===void 0?null:q}},Ie.startTransition=function(x){var q=J.transition;J.transition={};try{x()}finally{J.transition=q}},Ie.unstable_act=ne,Ie.useCallback=function(x,q){return ze.current.useCallback(x,q)},Ie.useContext=function(x){return ze.current.useContext(x)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(x){return ze.current.useDeferredValue(x)},Ie.useEffect=function(x,q){return ze.current.useEffect(x,q)},Ie.useId=function(){return ze.current.useId()},Ie.useImperativeHandle=function(x,q,ue){return ze.current.useImperativeHandle(x,q,ue)},Ie.useInsertionEffect=function(x,q){return ze.current.useInsertionEffect(x,q)},Ie.useLayoutEffect=function(x,q){return ze.current.useLayoutEffect(x,q)},Ie.useMemo=function(x,q){return ze.current.useMemo(x,q)},Ie.useReducer=function(x,q,ue){return ze.current.useReducer(x,q,ue)},Ie.useRef=function(x){return ze.current.useRef(x)},Ie.useState=function(x){return ze.current.useState(x)},Ie.useSyncExternalStore=function(x,q,ue){return ze.current.useSyncExternalStore(x,q,ue)},Ie.useTransition=function(){return ze.current.useTransition()},Ie.version="18.3.1",Ie}var Cp;function kh(){return Cp||(Cp=1,Wc.exports=S_()),Wc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function A_(){if(Pp)return qo;Pp=1;var i=kh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(m,y,v){var w,S={},P=null,z=null;v!==void 0&&(P=""+v),y.key!==void 0&&(P=""+y.key),y.ref!==void 0&&(z=y.ref);for(w in y)s.call(y,w)&&!c.hasOwnProperty(w)&&(S[w]=y[w]);if(m&&m.defaultProps)for(w in y=m.defaultProps,y)S[w]===void 0&&(S[w]=y[w]);return{$$typeof:e,type:m,key:P,ref:z,props:S,_owner:a.current}}return qo.Fragment=n,qo.jsx=h,qo.jsxs=h,qo}var kp;function R_(){return kp||(kp=1,Hc.exports=A_()),Hc.exports}var Fe=R_(),Xt=kh(),Vl={},Qc={exports:{}},Gt={},Gc={exports:{}},Kc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function C_(){return Vp||(Vp=1,function(i){function e(J,he){var ne=J.length;J.push(he);e:for(;0<ne;){var x=ne-1>>>1,q=J[x];if(0<a(q,he))J[x]=he,J[ne]=q,ne=x;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var he=J[0],ne=J.pop();if(ne!==he){J[0]=ne;e:for(var x=0,q=J.length,ue=q>>>1;x<ue;){var we=2*(x+1)-1,Te=J[we],Pe=we+1,Le=J[Pe];if(0>a(Te,ne))Pe<q&&0>a(Le,Te)?(J[x]=Le,J[Pe]=ne,x=Pe):(J[x]=Te,J[we]=ne,x=we);else if(Pe<q&&0>a(Le,ne))J[x]=Le,J[Pe]=ne,x=Pe;else break e}}return he}function a(J,he){var ne=J.sortIndex-he.sortIndex;return ne!==0?ne:J.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var y=[],v=[],w=1,S=null,P=3,z=!1,G=!1,Q=!1,b=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(J){for(var he=n(v);he!==null;){if(he.callback===null)s(v);else if(he.startTime<=J)s(v),he.sortIndex=he.expirationTime,e(y,he);else break;he=n(v)}}function oe(J){if(Q=!1,Z(J),!G)if(n(y)!==null)G=!0,kt(Se);else{var he=n(v);he!==null&&ze(oe,he.startTime-J)}}function Se(J,he){G=!1,Q&&(Q=!1,ge(I),I=-1),z=!0;var ne=P;try{for(Z(he),S=n(y);S!==null&&(!(S.expirationTime>he)||J&&!N());){var x=S.callback;if(typeof x=="function"){S.callback=null,P=S.priorityLevel;var q=x(S.expirationTime<=he);he=i.unstable_now(),typeof q=="function"?S.callback=q:S===n(y)&&s(y),Z(he)}else s(y);S=n(y)}if(S!==null)var ue=!0;else{var we=n(v);we!==null&&ze(oe,we.startTime-he),ue=!1}return ue}finally{S=null,P=ne,z=!1}}var Ee=!1,D=null,I=-1,R=5,k=-1;function N(){return!(i.unstable_now()-k<R)}function O(){if(D!==null){var J=i.unstable_now();k=J;var he=!0;try{he=D(!0,J)}finally{he?A():(Ee=!1,D=null)}}else Ee=!1}var A;if(typeof _e=="function")A=function(){_e(O)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Pt=Ze.port2;Ze.port1.onmessage=O,A=function(){Pt.postMessage(null)}}else A=function(){b(O,0)};function kt(J){D=J,Ee||(Ee=!0,A())}function ze(J,he){I=b(function(){J(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){G||z||(G=!0,kt(Se))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return P},i.unstable_getFirstCallbackNode=function(){return n(y)},i.unstable_next=function(J){switch(P){case 1:case 2:case 3:var he=3;break;default:he=P}var ne=P;P=he;try{return J()}finally{P=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ne=P;P=J;try{return he()}finally{P=ne}},i.unstable_scheduleCallback=function(J,he,ne){var x=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?x+ne:x):ne=x,J){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=ne+q,J={id:w++,callback:he,priorityLevel:J,startTime:ne,expirationTime:q,sortIndex:-1},ne>x?(J.sortIndex=ne,e(v,J),n(y)===null&&J===n(v)&&(Q?(ge(I),I=-1):Q=!0,ze(oe,ne-x))):(J.sortIndex=q,e(y,J),G||z||(G=!0,kt(Se))),J},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(J){var he=P;return function(){var ne=P;P=he;try{return J.apply(this,arguments)}finally{P=ne}}}}(Kc)),Kc}var Dp;function P_(){return Dp||(Dp=1,Gc.exports=C_()),Gc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function k_(){if(Np)return Gt;Np=1;var i=kh(),e=P_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){h(t,r),h(t+"Capture",r)}function h(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},S={};function P(t){return y.call(S,t)?!0:y.call(w,t)?!1:v.test(t)?S[t]=!0:(w[t]=!0,!1)}function z(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G(t,r,o,u){if(r===null||typeof r>"u"||z(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Q(t,r,o,u,f,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){b[t]=new Q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];b[r]=new Q(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){b[t]=new Q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){b[t]=new Q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){b[t]=new Q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){b[t]=new Q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){b[t]=new Q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){b[t]=new Q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){b[t]=new Q(t,5,!1,t.toLowerCase(),null,!1,!1)});var ge=/[\-:]([a-z])/g;function _e(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(ge,_e);b[r]=new Q(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(ge,_e);b[r]=new Q(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(ge,_e);b[r]=new Q(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){b[t]=new Q(t,1,!1,t.toLowerCase(),null,!1,!1)}),b.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){b[t]=new Q(t,1,!1,t.toLowerCase(),null,!0,!0)});function Z(t,r,o,u){var f=b.hasOwnProperty(r)?b[r]:null;(f!==null?f.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(G(r,o,f,u)&&(o=null),u||f===null?P(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):f.mustUseProperty?t[f.propertyName]=o===null?f.type===3?!1:"":o:(r=f.attributeName,u=f.attributeNamespace,o===null?t.removeAttribute(r):(f=f.type,o=f===3||f===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var oe=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),Ee=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),Pt=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),J=Symbol.iterator;function he(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,x;function q(t){if(x===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);x=r&&r[1]||""}return`
`+x+t}var ue=!1;function we(t,r){if(!t||ue)return"";ue=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var f=U.stack.split(`
`),p=u.stack.split(`
`),_=f.length-1,T=p.length-1;1<=_&&0<=T&&f[_]!==p[T];)T--;for(;1<=_&&0<=T;_--,T--)if(f[_]!==p[T]){if(_!==1||T!==1)do if(_--,T--,0>T||f[_]!==p[T]){var C=`
`+f[_].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=_&&0<=T);break}}}finally{ue=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?q(t):""}function Te(t){switch(t.tag){case 5:return q(t.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return t=we(t.type,!1),t;case 11:return t=we(t.type.render,!1),t;case 1:return t=we(t.type,!0),t;default:return""}}function Pe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case D:return"Fragment";case Ee:return"Portal";case R:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case Ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case O:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pt:return r=t.displayName||null,r!==null?r:Pe(t.type)||"Memo";case kt:r=t._payload,t=t._init;try{return Pe(t(r))}catch{}}return null}function Le(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Me(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function be(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pt(t){var r=be(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Xn(t){t._valueTracker||(t._valueTracker=pt(t))}function Mi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=be(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function yr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ni(t,r){var o=r.checked;return ne({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Fi(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Me(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ks(t,r){r=r.checked,r!=null&&Z(t,"checked",r,!1)}function Xs(t,r){Ks(t,r);var o=Me(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Ui(t,r.type,o):r.hasOwnProperty("defaultValue")&&Ui(t,r.type,Me(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function ma(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Ui(t,r,o){(r!=="number"||yr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Yn=Array.isArray;function Jn(t,r,o,u){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Me(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,u&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Ys(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(Yn(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Me(o)}}function ji(t,r){var o=Me(r.value),u=Me(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Js(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?at(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zn,Zs=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,f){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,f)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Zn=Zn||document.createElement("div"),Zn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Zn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function _r(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ii=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){ii.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ri[r]=ri[t]})});function eo(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ri.hasOwnProperty(t)&&ri[t]?(""+r).trim():r+"px"}function to(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,f=eo(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,f):t[o]=f}}var no=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ro(t,r){if(r){if(no[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function io(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var si=null;function Bi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bi=null,un=null,Mn=null;function $i(t){if(t=ko(t)){if(typeof bi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Ha(r),bi(t.stateNode,t.type,r))}}function Fn(t){un?Mn?Mn.push(t):Mn=[t]:un=t}function so(){if(un){var t=un,r=Mn;if(Mn=un=null,$i(t),r)for(t=0;t<r.length;t++)$i(r[t])}}function oi(t,r){return t(r)}function oo(){}var er=!1;function ao(t,r,o){if(er)return t(r,o);er=!0;try{return oi(t,r,o)}finally{er=!1,(un!==null||Mn!==null)&&(oo(),so())}}function et(t,r){var o=t.stateNode;if(o===null)return null;var u=Ha(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var qi=!1;if(m)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){qi=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{qi=!1}function ai(t,r,o,u,f,p,_,T,C){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(W){this.onError(W)}}var li=!1,Hi=null,En=!1,lo=null,vu={onError:function(t){li=!0,Hi=t}};function Wi(t,r,o,u,f,p,_,T,C){li=!1,Hi=null,ai.apply(vu,arguments)}function ga(t,r,o,u,f,p,_,T,C){if(Wi.apply(this,arguments),li){if(li){var U=Hi;li=!1,Hi=null}else throw Error(n(198));En||(En=!0,lo=U)}}function wn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function ui(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Tn(t){if(wn(t)!==t)throw Error(n(188))}function ya(t){var r=t.alternate;if(!r){if(r=wn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return Tn(f),t;if(p===u)return Tn(f),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=f,u=p;else{for(var _=!1,T=f.child;T;){if(T===o){_=!0,o=f,u=p;break}if(T===u){_=!0,u=f,o=p;break}T=T.sibling}if(!_){for(T=p.child;T;){if(T===o){_=!0,o=p,u=f;break}if(T===u){_=!0,u=p,o=f;break}T=T.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function uo(t){return t=ya(t),t!==null?Qi(t):null}function Qi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Qi(t);if(r!==null)return r;t=t.sibling}return null}var Gi=e.unstable_scheduleCallback,co=e.unstable_cancelCallback,_a=e.unstable_shouldYield,Eu=e.unstable_requestPaint,$e=e.unstable_now,va=e.unstable_getCurrentPriorityLevel,ci=e.unstable_ImmediatePriority,vr=e.unstable_UserBlockingPriority,cn=e.unstable_NormalPriority,ho=e.unstable_LowPriority,Ea=e.unstable_IdlePriority,hi=null,Zt=null;function wa(t){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(hi,t,void 0,(t.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:Ia,fo=Math.log,Ta=Math.LN2;function Ia(t){return t>>>=0,t===0?32:31-(fo(t)/Ta|0)|0}var Ki=64,Xi=4194304;function Er(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fi(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,f=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var T=_&~f;T!==0?u=Er(T):(p&=_,p!==0&&(u=Er(p)))}else _=o&~f,_!==0?u=Er(_):p!==0&&(u=Er(p));if(u===0)return 0;if(r!==0&&r!==u&&!(r&f)&&(f=u&-u,p=r&-r,f>=p||f===16&&(p&4194240)!==0))return r;if(u&4&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Mt(r),f=1<<o,u|=t[o],r&=~f;return u}function wu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tr(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Mt(p),T=1<<_,C=f[_];C===-1?(!(T&o)||T&u)&&(f[_]=wu(T,r)):C<=r&&(t.expiredLanes|=T),p&=~T}}function en(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function di(){var t=Ki;return Ki<<=1,!(Ki&4194240)&&(Ki=64),t}function wr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Tr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Mt(r),t[r]=o}function je(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var f=31-Mt(o),p=1<<f;r[f]=0,u[f]=-1,t[f]=-1,o&=~p}}function Ir(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Mt(o),f=1<<u;f&r|t[u]&r&&(t[u]|=r),o&=~f}}var Re=0;function Sr(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Sa,Yi,Aa,Ra,Ca,po=!1,Un=[],wt=null,In=null,Sn=null,Ar=new Map,hn=new Map,zn=[],Tu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pa(t,r){switch(t){case"focusin":case"focusout":wt=null;break;case"dragenter":case"dragleave":In=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":Ar.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(r.pointerId)}}function Bt(t,r,o,u,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},r!==null&&(r=ko(r),r!==null&&Yi(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function Iu(t,r,o,u,f){switch(r){case"focusin":return wt=Bt(wt,t,r,o,u,f),!0;case"dragenter":return In=Bt(In,t,r,o,u,f),!0;case"mouseover":return Sn=Bt(Sn,t,r,o,u,f),!0;case"pointerover":var p=f.pointerId;return Ar.set(p,Bt(Ar.get(p)||null,t,r,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,hn.set(p,Bt(hn.get(p)||null,t,r,o,u,f)),!0}return!1}function ka(t){var r=_i(t.target);if(r!==null){var o=wn(r);if(o!==null){if(r=o.tag,r===13){if(r=ui(o),r!==null){t.blockedOn=r,Ca(t.priority,function(){Aa(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=Ji(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);si=u,o.target.dispatchEvent(u),si=null}else return r=ko(o),r!==null&&Yi(r),t.blockedOn=o,!1;r.shift()}return!0}function pi(t,r,o){nr(t)&&o.delete(r)}function Va(){po=!1,wt!==null&&nr(wt)&&(wt=null),In!==null&&nr(In)&&(In=null),Sn!==null&&nr(Sn)&&(Sn=null),Ar.forEach(pi),hn.forEach(pi)}function An(t,r){t.blockedOn===r&&(t.blockedOn=null,po||(po=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Va)))}function Rn(t){function r(f){return An(f,t)}if(0<Un.length){An(Un[0],t);for(var o=1;o<Un.length;o++){var u=Un[o];u.blockedOn===t&&(u.blockedOn=null)}}for(wt!==null&&An(wt,t),In!==null&&An(In,t),Sn!==null&&An(Sn,t),Ar.forEach(r),hn.forEach(r),o=0;o<zn.length;o++)u=zn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<zn.length&&(o=zn[0],o.blockedOn===null);)ka(o),o.blockedOn===null&&zn.shift()}var rr=oe.ReactCurrentBatchConfig,Rr=!0;function Qe(t,r,o,u){var f=Re,p=rr.transition;rr.transition=null;try{Re=1,mo(t,r,o,u)}finally{Re=f,rr.transition=p}}function Su(t,r,o,u){var f=Re,p=rr.transition;rr.transition=null;try{Re=4,mo(t,r,o,u)}finally{Re=f,rr.transition=p}}function mo(t,r,o,u){if(Rr){var f=Ji(t,r,o,u);if(f===null)Lu(t,r,u,mi,o),Pa(t,u);else if(Iu(f,t,r,o,u))u.stopPropagation();else if(Pa(t,u),r&4&&-1<Tu.indexOf(t)){for(;f!==null;){var p=ko(f);if(p!==null&&Sa(p),p=Ji(t,r,o,u),p===null&&Lu(t,r,u,mi,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Lu(t,r,u,null,o)}}var mi=null;function Ji(t,r,o,u){if(mi=null,t=Bi(u),t=_i(t),t!==null)if(r=wn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=ui(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return mi=t,null}function go(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(va()){case ci:return 1;case vr:return 4;case cn:case ho:return 16;case Ea:return 536870912;default:return 16}default:return 16}}var tn=null,Zi=null,bt=null;function yo(){if(bt)return bt;var t,r=Zi,o=r.length,u,f="value"in tn?tn.value:tn.textContent,p=f.length;for(t=0;t<o&&r[t]===f[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===f[p-u];u++);return bt=f.slice(t,1<u?1-u:void 0)}function es(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function jn(){return!0}function _o(){return!1}function Tt(t){function r(o,u,f,p,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?jn:_o,this.isPropagationStopped=_o,this}return ne(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=jn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=jn)},persist:function(){},isPersistent:jn}),r}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=Tt(Cn),Bn=ne({},Cn,{view:0,detail:0}),Au=Tt(Bn),ns,ir,Cr,gi=ne({},Bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cr&&(Cr&&t.type==="mousemove"?(ns=t.screenX-Cr.screenX,ir=t.screenY-Cr.screenY):ir=ns=0,Cr=t),ns)},movementY:function(t){return"movementY"in t?t.movementY:ir}}),rs=Tt(gi),vo=ne({},gi,{dataTransfer:0}),Da=Tt(vo),is=ne({},Bn,{relatedTarget:0}),ss=Tt(is),Na=ne({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),sr=Tt(Na),xa=ne({},Cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Oa=Tt(xa),La=ne({},Cn,{data:0}),Eo=Tt(La),os={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ft={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ma={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fa(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ma[t])?!!r[t]:!1}function bn(){return Fa}var l=ne({},Bn,{key:function(t){if(t.key){var r=os[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=es(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ft[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bn,charCode:function(t){return t.type==="keypress"?es(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?es(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Tt(l),g=ne({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Tt(g),L=ne({},Bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bn}),j=Tt(L),Y=ne({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=Tt(Y),ut=ne({},gi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ke=Tt(ut),mt=[9,13,27,32],rt=m&&"CompositionEvent"in window,fn=null;m&&"documentMode"in document&&(fn=document.documentMode);var nn=m&&"TextEvent"in window&&!fn,yi=m&&(!rt||fn&&8<fn&&11>=fn),as=" ",Ef=!1;function wf(t,r){switch(t){case"keyup":return mt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ls=!1;function wy(t,r){switch(t){case"compositionend":return Tf(r);case"keypress":return r.which!==32?null:(Ef=!0,as);case"textInput":return t=r.data,t===as&&Ef?null:t;default:return null}}function Ty(t,r){if(ls)return t==="compositionend"||!rt&&wf(t,r)?(t=yo(),bt=Zi=tn=null,ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yi&&r.locale!=="ko"?null:r.data;default:return null}}var Iy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function If(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Iy[t.type]:r==="textarea"}function Sf(t,r,o,u){Fn(u),r=ba(r,"onChange"),0<r.length&&(o=new ts("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var wo=null,To=null;function Sy(t){bf(t,0)}function Ua(t){var r=ds(t);if(Mi(r))return t}function Ay(t,r){if(t==="change")return r}var Af=!1;if(m){var Ru;if(m){var Cu="oninput"in document;if(!Cu){var Rf=document.createElement("div");Rf.setAttribute("oninput","return;"),Cu=typeof Rf.oninput=="function"}Ru=Cu}else Ru=!1;Af=Ru&&(!document.documentMode||9<document.documentMode)}function Cf(){wo&&(wo.detachEvent("onpropertychange",Pf),To=wo=null)}function Pf(t){if(t.propertyName==="value"&&Ua(To)){var r=[];Sf(r,To,t,Bi(t)),ao(Sy,r)}}function Ry(t,r,o){t==="focusin"?(Cf(),wo=r,To=o,wo.attachEvent("onpropertychange",Pf)):t==="focusout"&&Cf()}function Cy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ua(To)}function Py(t,r){if(t==="click")return Ua(r)}function ky(t,r){if(t==="input"||t==="change")return Ua(r)}function Vy(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Pn=typeof Object.is=="function"?Object.is:Vy;function Io(t,r){if(Pn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!y.call(r,f)||!Pn(t[f],r[f]))return!1}return!0}function kf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vf(t,r){var o=kf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=kf(o)}}function Df(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Df(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Nf(){for(var t=window,r=yr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=yr(t.document)}return r}function Pu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Dy(t){var r=Nf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&Df(o.ownerDocument.documentElement,o)){if(u!==null&&Pu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var f=o.textContent.length,p=Math.min(u.start,f);u=u.end===void 0?p:Math.min(u.end,f),!t.extend&&p>u&&(f=u,u=p,p=f),f=Vf(o,p);var _=Vf(o,u);f&&_&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ny=m&&"documentMode"in document&&11>=document.documentMode,us=null,ku=null,So=null,Vu=!1;function xf(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Vu||us==null||us!==yr(u)||(u=us,"selectionStart"in u&&Pu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),So&&Io(So,u)||(So=u,u=ba(ku,"onSelect"),0<u.length&&(r=new ts("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=us)))}function za(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var cs={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},Du={},Of={};m&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function ja(t){if(Du[t])return Du[t];if(!cs[t])return t;var r=cs[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Of)return Du[t]=r[o];return t}var Lf=ja("animationend"),Mf=ja("animationiteration"),Ff=ja("animationstart"),Uf=ja("transitionend"),zf=new Map,jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,r){zf.set(t,r),c(r,[t])}for(var Nu=0;Nu<jf.length;Nu++){var xu=jf[Nu],xy=xu.toLowerCase(),Oy=xu[0].toUpperCase()+xu.slice(1);Pr(xy,"on"+Oy)}Pr(Lf,"onAnimationEnd"),Pr(Mf,"onAnimationIteration"),Pr(Ff,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Uf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ly=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function Bf(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,ga(u,r,void 0,t),t.currentTarget=null}function bf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],f=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],C=T.instance,U=T.currentTarget;if(T=T.listener,C!==p&&f.isPropagationStopped())break e;Bf(f,T,U),p=C}else for(_=0;_<u.length;_++){if(T=u[_],C=T.instance,U=T.currentTarget,T=T.listener,C!==p&&f.isPropagationStopped())break e;Bf(f,T,U),p=C}}}if(En)throw t=lo,En=!1,lo=null,t}function He(t,r){var o=r[Bu];o===void 0&&(o=r[Bu]=new Set);var u=t+"__bubble";o.has(u)||($f(r,t,2,!1),o.add(u))}function Ou(t,r,o){var u=0;r&&(u|=4),$f(o,t,u,r)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function Ro(t){if(!t[Ba]){t[Ba]=!0,s.forEach(function(o){o!=="selectionchange"&&(Ly.has(o)||Ou(o,!1,t),Ou(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ba]||(r[Ba]=!0,Ou("selectionchange",!1,r))}}function $f(t,r,o,u){switch(go(r)){case 1:var f=Qe;break;case 4:f=Su;break;default:f=mo}o=f.bind(null,r,o,t),f=void 0,!qi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function Lu(t,r,o,u,f){var p=u;if(!(r&1)&&!(r&2)&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(_===4)for(_=u.return;_!==null;){var C=_.tag;if((C===3||C===4)&&(C=_.stateNode.containerInfo,C===f||C.nodeType===8&&C.parentNode===f))return;_=_.return}for(;T!==null;){if(_=_i(T),_===null)return;if(C=_.tag,C===5||C===6){u=p=_;continue e}T=T.parentNode}}u=u.return}ao(function(){var U=p,W=Bi(o),K=[];e:{var H=zf.get(t);if(H!==void 0){var ee=ts,se=t;switch(t){case"keypress":if(es(o)===0)break e;case"keydown":case"keyup":ee=d;break;case"focusin":se="focus",ee=ss;break;case"focusout":se="blur",ee=ss;break;case"beforeblur":case"afterblur":ee=ss;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=rs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Da;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=j;break;case Lf:case Mf:case Ff:ee=sr;break;case Uf:ee=Ue;break;case"scroll":ee=Au;break;case"wheel":ee=ke;break;case"copy":case"cut":case"paste":ee=Oa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=E}var ae=(r&4)!==0,tt=!ae&&t==="scroll",M=ae?H!==null?H+"Capture":null:H;ae=[];for(var V=U,F;V!==null;){F=V;var X=F.stateNode;if(F.tag===5&&X!==null&&(F=X,M!==null&&(X=et(V,M),X!=null&&ae.push(Co(V,X,F)))),tt)break;V=V.return}0<ae.length&&(H=new ee(H,se,null,o,W),K.push({event:H,listeners:ae}))}}if(!(r&7)){e:{if(H=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",H&&o!==si&&(se=o.relatedTarget||o.fromElement)&&(_i(se)||se[or]))break e;if((ee||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,ee?(se=o.relatedTarget||o.toElement,ee=U,se=se?_i(se):null,se!==null&&(tt=wn(se),se!==tt||se.tag!==5&&se.tag!==6)&&(se=null)):(ee=null,se=U),ee!==se)){if(ae=rs,X="onMouseLeave",M="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(ae=E,X="onPointerLeave",M="onPointerEnter",V="pointer"),tt=ee==null?H:ds(ee),F=se==null?H:ds(se),H=new ae(X,V+"leave",ee,o,W),H.target=tt,H.relatedTarget=F,X=null,_i(W)===U&&(ae=new ae(M,V+"enter",se,o,W),ae.target=F,ae.relatedTarget=tt,X=ae),tt=X,ee&&se)t:{for(ae=ee,M=se,V=0,F=ae;F;F=hs(F))V++;for(F=0,X=M;X;X=hs(X))F++;for(;0<V-F;)ae=hs(ae),V--;for(;0<F-V;)M=hs(M),F--;for(;V--;){if(ae===M||M!==null&&ae===M.alternate)break t;ae=hs(ae),M=hs(M)}ae=null}else ae=null;ee!==null&&qf(K,H,ee,ae,!1),se!==null&&tt!==null&&qf(K,tt,se,ae,!0)}}e:{if(H=U?ds(U):window,ee=H.nodeName&&H.nodeName.toLowerCase(),ee==="select"||ee==="input"&&H.type==="file")var le=Ay;else if(If(H))if(Af)le=ky;else{le=Cy;var fe=Ry}else(ee=H.nodeName)&&ee.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(le=Py);if(le&&(le=le(t,U))){Sf(K,le,o,W);break e}fe&&fe(t,H,U),t==="focusout"&&(fe=H._wrapperState)&&fe.controlled&&H.type==="number"&&Ui(H,"number",H.value)}switch(fe=U?ds(U):window,t){case"focusin":(If(fe)||fe.contentEditable==="true")&&(us=fe,ku=U,So=null);break;case"focusout":So=ku=us=null;break;case"mousedown":Vu=!0;break;case"contextmenu":case"mouseup":case"dragend":Vu=!1,xf(K,o,W);break;case"selectionchange":if(Ny)break;case"keydown":case"keyup":xf(K,o,W)}var de;if(rt)e:{switch(t){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else ls?wf(t,o)&&(ye="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ye="onCompositionStart");ye&&(yi&&o.locale!=="ko"&&(ls||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&ls&&(de=yo()):(tn=W,Zi="value"in tn?tn.value:tn.textContent,ls=!0)),fe=ba(U,ye),0<fe.length&&(ye=new Eo(ye,t,null,o,W),K.push({event:ye,listeners:fe}),de?ye.data=de:(de=Tf(o),de!==null&&(ye.data=de)))),(de=nn?wy(t,o):Ty(t,o))&&(U=ba(U,"onBeforeInput"),0<U.length&&(W=new Eo("onBeforeInput","beforeinput",null,o,W),K.push({event:W,listeners:U}),W.data=de))}bf(K,r)})}function Co(t,r,o){return{instance:t,listener:r,currentTarget:o}}function ba(t,r){for(var o=r+"Capture",u=[];t!==null;){var f=t,p=f.stateNode;f.tag===5&&p!==null&&(f=p,p=et(t,o),p!=null&&u.unshift(Co(t,p,f)),p=et(t,r),p!=null&&u.push(Co(t,p,f))),t=t.return}return u}function hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qf(t,r,o,u,f){for(var p=r._reactName,_=[];o!==null&&o!==u;){var T=o,C=T.alternate,U=T.stateNode;if(C!==null&&C===u)break;T.tag===5&&U!==null&&(T=U,f?(C=et(o,p),C!=null&&_.unshift(Co(o,C,T))):f||(C=et(o,p),C!=null&&_.push(Co(o,C,T)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var My=/\r\n?/g,Fy=/\u0000|\uFFFD/g;function Hf(t){return(typeof t=="string"?t:""+t).replace(My,`
`).replace(Fy,"")}function $a(t,r,o){if(r=Hf(r),Hf(t)!==r&&o)throw Error(n(425))}function qa(){}var Mu=null,Fu=null;function Uu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var zu=typeof setTimeout=="function"?setTimeout:void 0,Uy=typeof clearTimeout=="function"?clearTimeout:void 0,Wf=typeof Promise=="function"?Promise:void 0,zy=typeof queueMicrotask=="function"?queueMicrotask:typeof Wf<"u"?function(t){return Wf.resolve(null).then(t).catch(jy)}:zu;function jy(t){setTimeout(function(){throw t})}function ju(t,r){var o=r,u=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(u===0){t.removeChild(f),Rn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=f}while(o);Rn(r)}function kr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Qf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var fs=Math.random().toString(36).slice(2),$n="__reactFiber$"+fs,Po="__reactProps$"+fs,or="__reactContainer$"+fs,Bu="__reactEvents$"+fs,By="__reactListeners$"+fs,by="__reactHandles$"+fs;function _i(t){var r=t[$n];if(r)return r;for(var o=t.parentNode;o;){if(r=o[or]||o[$n]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Qf(t);t!==null;){if(o=t[$n])return o;t=Qf(t)}return r}t=o,o=t.parentNode}return null}function ko(t){return t=t[$n]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Ha(t){return t[Po]||null}var bu=[],ps=-1;function Vr(t){return{current:t}}function We(t){0>ps||(t.current=bu[ps],bu[ps]=null,ps--)}function qe(t,r){ps++,bu[ps]=t.current,t.current=r}var Dr={},Vt=Vr(Dr),$t=Vr(!1),vi=Dr;function ms(t,r){var o=t.type.contextTypes;if(!o)return Dr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var f={},p;for(p in o)f[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=f),f}function qt(t){return t=t.childContextTypes,t!=null}function Wa(){We($t),We(Vt)}function Gf(t,r,o){if(Vt.current!==Dr)throw Error(n(168));qe(Vt,r),qe($t,o)}function Kf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var f in u)if(!(f in r))throw Error(n(108,Le(t)||"Unknown",f));return ne({},o,u)}function Qa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dr,vi=Vt.current,qe(Vt,t),qe($t,$t.current),!0}function Xf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Kf(t,r,vi),u.__reactInternalMemoizedMergedChildContext=t,We($t),We(Vt),qe(Vt,t)):We($t),qe($t,o)}var ar=null,Ga=!1,$u=!1;function Yf(t){ar===null?ar=[t]:ar.push(t)}function $y(t){Ga=!0,Yf(t)}function Nr(){if(!$u&&ar!==null){$u=!0;var t=0,r=Re;try{var o=ar;for(Re=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}ar=null,Ga=!1}catch(f){throw ar!==null&&(ar=ar.slice(t+1)),Gi(ci,Nr),f}finally{Re=r,$u=!1}}return null}var gs=[],ys=0,Ka=null,Xa=0,dn=[],pn=0,Ei=null,lr=1,ur="";function wi(t,r){gs[ys++]=Xa,gs[ys++]=Ka,Ka=t,Xa=r}function Jf(t,r,o){dn[pn++]=lr,dn[pn++]=ur,dn[pn++]=Ei,Ei=t;var u=lr;t=ur;var f=32-Mt(u)-1;u&=~(1<<f),o+=1;var p=32-Mt(r)+f;if(30<p){var _=f-f%5;p=(u&(1<<_)-1).toString(32),u>>=_,f-=_,lr=1<<32-Mt(r)+f|o<<f|u,ur=p+t}else lr=1<<p|o<<f|u,ur=t}function qu(t){t.return!==null&&(wi(t,1),Jf(t,1,0))}function Hu(t){for(;t===Ka;)Ka=gs[--ys],gs[ys]=null,Xa=gs[--ys],gs[ys]=null;for(;t===Ei;)Ei=dn[--pn],dn[pn]=null,ur=dn[--pn],dn[pn]=null,lr=dn[--pn],dn[pn]=null}var rn=null,sn=null,Ge=!1,kn=null;function Zf(t,r){var o=_n(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function ed(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,rn=t,sn=kr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,rn=t,sn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ei!==null?{id:lr,overflow:ur}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=_n(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,rn=t,sn=null,!0):!1;default:return!1}}function Wu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qu(t){if(Ge){var r=sn;if(r){var o=r;if(!ed(t,r)){if(Wu(t))throw Error(n(418));r=kr(o.nextSibling);var u=rn;r&&ed(t,r)?Zf(u,o):(t.flags=t.flags&-4097|2,Ge=!1,rn=t)}}else{if(Wu(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ge=!1,rn=t}}}function td(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function Ya(t){if(t!==rn)return!1;if(!Ge)return td(t),Ge=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Uu(t.type,t.memoizedProps)),r&&(r=sn)){if(Wu(t))throw nd(),Error(n(418));for(;r;)Zf(t,r),r=kr(r.nextSibling)}if(td(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){sn=kr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}sn=null}}else sn=rn?kr(t.stateNode.nextSibling):null;return!0}function nd(){for(var t=sn;t;)t=kr(t.nextSibling)}function _s(){sn=rn=null,Ge=!1}function Gu(t){kn===null?kn=[t]:kn.push(t)}var qy=oe.ReactCurrentBatchConfig;function Vo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var f=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var T=f.refs;_===null?delete T[p]:T[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Ja(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function rd(t){var r=t._init;return r(t._payload)}function id(t){function r(M,V){if(t){var F=M.deletions;F===null?(M.deletions=[V],M.flags|=16):F.push(V)}}function o(M,V){if(!t)return null;for(;V!==null;)r(M,V),V=V.sibling;return null}function u(M,V){for(M=new Map;V!==null;)V.key!==null?M.set(V.key,V):M.set(V.index,V),V=V.sibling;return M}function f(M,V){return M=jr(M,V),M.index=0,M.sibling=null,M}function p(M,V,F){return M.index=F,t?(F=M.alternate,F!==null?(F=F.index,F<V?(M.flags|=2,V):F):(M.flags|=2,V)):(M.flags|=1048576,V)}function _(M){return t&&M.alternate===null&&(M.flags|=2),M}function T(M,V,F,X){return V===null||V.tag!==6?(V=zc(F,M.mode,X),V.return=M,V):(V=f(V,F),V.return=M,V)}function C(M,V,F,X){var le=F.type;return le===D?W(M,V,F.props.children,X,F.key):V!==null&&(V.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===kt&&rd(le)===V.type)?(X=f(V,F.props),X.ref=Vo(M,V,F),X.return=M,X):(X=Tl(F.type,F.key,F.props,null,M.mode,X),X.ref=Vo(M,V,F),X.return=M,X)}function U(M,V,F,X){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=jc(F,M.mode,X),V.return=M,V):(V=f(V,F.children||[]),V.return=M,V)}function W(M,V,F,X,le){return V===null||V.tag!==7?(V=ki(F,M.mode,X,le),V.return=M,V):(V=f(V,F),V.return=M,V)}function K(M,V,F){if(typeof V=="string"&&V!==""||typeof V=="number")return V=zc(""+V,M.mode,F),V.return=M,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Se:return F=Tl(V.type,V.key,V.props,null,M.mode,F),F.ref=Vo(M,null,V),F.return=M,F;case Ee:return V=jc(V,M.mode,F),V.return=M,V;case kt:var X=V._init;return K(M,X(V._payload),F)}if(Yn(V)||he(V))return V=ki(V,M.mode,F,null),V.return=M,V;Ja(M,V)}return null}function H(M,V,F,X){var le=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return le!==null?null:T(M,V,""+F,X);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Se:return F.key===le?C(M,V,F,X):null;case Ee:return F.key===le?U(M,V,F,X):null;case kt:return le=F._init,H(M,V,le(F._payload),X)}if(Yn(F)||he(F))return le!==null?null:W(M,V,F,X,null);Ja(M,F)}return null}function ee(M,V,F,X,le){if(typeof X=="string"&&X!==""||typeof X=="number")return M=M.get(F)||null,T(V,M,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Se:return M=M.get(X.key===null?F:X.key)||null,C(V,M,X,le);case Ee:return M=M.get(X.key===null?F:X.key)||null,U(V,M,X,le);case kt:var fe=X._init;return ee(M,V,F,fe(X._payload),le)}if(Yn(X)||he(X))return M=M.get(F)||null,W(V,M,X,le,null);Ja(V,X)}return null}function se(M,V,F,X){for(var le=null,fe=null,de=V,ye=V=0,_t=null;de!==null&&ye<F.length;ye++){de.index>ye?(_t=de,de=null):_t=de.sibling;var Oe=H(M,de,F[ye],X);if(Oe===null){de===null&&(de=_t);break}t&&de&&Oe.alternate===null&&r(M,de),V=p(Oe,V,ye),fe===null?le=Oe:fe.sibling=Oe,fe=Oe,de=_t}if(ye===F.length)return o(M,de),Ge&&wi(M,ye),le;if(de===null){for(;ye<F.length;ye++)de=K(M,F[ye],X),de!==null&&(V=p(de,V,ye),fe===null?le=de:fe.sibling=de,fe=de);return Ge&&wi(M,ye),le}for(de=u(M,de);ye<F.length;ye++)_t=ee(de,M,ye,F[ye],X),_t!==null&&(t&&_t.alternate!==null&&de.delete(_t.key===null?ye:_t.key),V=p(_t,V,ye),fe===null?le=_t:fe.sibling=_t,fe=_t);return t&&de.forEach(function(Br){return r(M,Br)}),Ge&&wi(M,ye),le}function ae(M,V,F,X){var le=he(F);if(typeof le!="function")throw Error(n(150));if(F=le.call(F),F==null)throw Error(n(151));for(var fe=le=null,de=V,ye=V=0,_t=null,Oe=F.next();de!==null&&!Oe.done;ye++,Oe=F.next()){de.index>ye?(_t=de,de=null):_t=de.sibling;var Br=H(M,de,Oe.value,X);if(Br===null){de===null&&(de=_t);break}t&&de&&Br.alternate===null&&r(M,de),V=p(Br,V,ye),fe===null?le=Br:fe.sibling=Br,fe=Br,de=_t}if(Oe.done)return o(M,de),Ge&&wi(M,ye),le;if(de===null){for(;!Oe.done;ye++,Oe=F.next())Oe=K(M,Oe.value,X),Oe!==null&&(V=p(Oe,V,ye),fe===null?le=Oe:fe.sibling=Oe,fe=Oe);return Ge&&wi(M,ye),le}for(de=u(M,de);!Oe.done;ye++,Oe=F.next())Oe=ee(de,M,ye,Oe.value,X),Oe!==null&&(t&&Oe.alternate!==null&&de.delete(Oe.key===null?ye:Oe.key),V=p(Oe,V,ye),fe===null?le=Oe:fe.sibling=Oe,fe=Oe);return t&&de.forEach(function(T_){return r(M,T_)}),Ge&&wi(M,ye),le}function tt(M,V,F,X){if(typeof F=="object"&&F!==null&&F.type===D&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Se:e:{for(var le=F.key,fe=V;fe!==null;){if(fe.key===le){if(le=F.type,le===D){if(fe.tag===7){o(M,fe.sibling),V=f(fe,F.props.children),V.return=M,M=V;break e}}else if(fe.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===kt&&rd(le)===fe.type){o(M,fe.sibling),V=f(fe,F.props),V.ref=Vo(M,fe,F),V.return=M,M=V;break e}o(M,fe);break}else r(M,fe);fe=fe.sibling}F.type===D?(V=ki(F.props.children,M.mode,X,F.key),V.return=M,M=V):(X=Tl(F.type,F.key,F.props,null,M.mode,X),X.ref=Vo(M,V,F),X.return=M,M=X)}return _(M);case Ee:e:{for(fe=F.key;V!==null;){if(V.key===fe)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){o(M,V.sibling),V=f(V,F.children||[]),V.return=M,M=V;break e}else{o(M,V);break}else r(M,V);V=V.sibling}V=jc(F,M.mode,X),V.return=M,M=V}return _(M);case kt:return fe=F._init,tt(M,V,fe(F._payload),X)}if(Yn(F))return se(M,V,F,X);if(he(F))return ae(M,V,F,X);Ja(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,V!==null&&V.tag===6?(o(M,V.sibling),V=f(V,F),V.return=M,M=V):(o(M,V),V=zc(F,M.mode,X),V.return=M,M=V),_(M)):o(M,V)}return tt}var vs=id(!0),sd=id(!1),Za=Vr(null),el=null,Es=null,Ku=null;function Xu(){Ku=Es=el=null}function Yu(t){var r=Za.current;We(Za),t._currentValue=r}function Ju(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function ws(t,r){el=t,Ku=Es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Ht=!0),t.firstContext=null)}function mn(t){var r=t._currentValue;if(Ku!==t)if(t={context:t,memoizedValue:r,next:null},Es===null){if(el===null)throw Error(n(308));Es=t,el.dependencies={lanes:0,firstContext:t}}else Es=Es.next=t;return r}var Ti=null;function Zu(t){Ti===null?Ti=[t]:Ti.push(t)}function od(t,r,o,u){var f=r.interleaved;return f===null?(o.next=o,Zu(r)):(o.next=f.next,f.next=o),r.interleaved=o,cr(t,u)}function cr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var xr=!1;function ec(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ad(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Or(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,xe&2){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,cr(t,o)}return f=u.interleaved,f===null?(r.next=r,Zu(u)):(r.next=f.next,f.next=r),u.interleaved=r,cr(t,o)}function tl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Ir(t,o)}}function ld(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?f=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?f=p=r:p=p.next=r}else f=p=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function nl(t,r,o,u){var f=t.updateQueue;xr=!1;var p=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var C=T,U=C.next;C.next=null,_===null?p=U:_.next=U,_=C;var W=t.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==_&&(T===null?W.firstBaseUpdate=U:T.next=U,W.lastBaseUpdate=C))}if(p!==null){var K=f.baseState;_=0,W=U=C=null,T=p;do{var H=T.lane,ee=T.eventTime;if((u&H)===H){W!==null&&(W=W.next={eventTime:ee,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var se=t,ae=T;switch(H=r,ee=o,ae.tag){case 1:if(se=ae.payload,typeof se=="function"){K=se.call(ee,K,H);break e}K=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=ae.payload,H=typeof se=="function"?se.call(ee,K,H):se,H==null)break e;K=ne({},K,H);break e;case 2:xr=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,H=f.effects,H===null?f.effects=[T]:H.push(T))}else ee={eventTime:ee,lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(U=W=ee,C=K):W=W.next=ee,_|=H;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;H=T,T=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);if(W===null&&(C=K),f.baseState=C,f.firstBaseUpdate=U,f.lastBaseUpdate=W,r=f.shared.interleaved,r!==null){f=r;do _|=f.lane,f=f.next;while(f!==r)}else p===null&&(f.shared.lanes=0);Ai|=_,t.lanes=_,t.memoizedState=K}}function ud(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],f=u.callback;if(f!==null){if(u.callback=null,u=o,typeof f!="function")throw Error(n(191,f));f.call(u)}}}var Do={},qn=Vr(Do),No=Vr(Do),xo=Vr(Do);function Ii(t){if(t===Do)throw Error(n(174));return t}function tc(t,r){switch(qe(xo,r),qe(No,t),qe(qn,Do),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:lt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=lt(r,t)}We(qn),qe(qn,r)}function Ts(){We(qn),We(No),We(xo)}function cd(t){Ii(xo.current);var r=Ii(qn.current),o=lt(r,t.type);r!==o&&(qe(No,t),qe(qn,o))}function nc(t){No.current===t&&(We(qn),We(No))}var Ke=Vr(0);function rl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var rc=[];function ic(){for(var t=0;t<rc.length;t++)rc[t]._workInProgressVersionPrimary=null;rc.length=0}var il=oe.ReactCurrentDispatcher,sc=oe.ReactCurrentBatchConfig,Si=0,Xe=null,ct=null,gt=null,sl=!1,Oo=!1,Lo=0,Hy=0;function Dt(){throw Error(n(321))}function oc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Pn(t[o],r[o]))return!1;return!0}function ac(t,r,o,u,f,p){if(Si=p,Xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,il.current=t===null||t.memoizedState===null?Ky:Xy,t=o(u,f),Oo){p=0;do{if(Oo=!1,Lo=0,25<=p)throw Error(n(301));p+=1,gt=ct=null,r.updateQueue=null,il.current=Yy,t=o(u,f)}while(Oo)}if(il.current=ll,r=ct!==null&&ct.next!==null,Si=0,gt=ct=Xe=null,sl=!1,r)throw Error(n(300));return t}function lc(){var t=Lo!==0;return Lo=0,t}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Xe.memoizedState=gt=t:gt=gt.next=t,gt}function gn(){if(ct===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var r=gt===null?Xe.memoizedState:gt.next;if(r!==null)gt=r,ct=t;else{if(t===null)throw Error(n(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},gt===null?Xe.memoizedState=gt=t:gt=gt.next=t}return gt}function Mo(t,r){return typeof r=="function"?r(t):r}function uc(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=ct,f=u.baseQueue,p=o.pending;if(p!==null){if(f!==null){var _=f.next;f.next=p.next,p.next=_}u.baseQueue=f=p,o.pending=null}if(f!==null){p=f.next,u=u.baseState;var T=_=null,C=null,U=p;do{var W=U.lane;if((Si&W)===W)C!==null&&(C=C.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var K={lane:W,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};C===null?(T=C=K,_=u):C=C.next=K,Xe.lanes|=W,Ai|=W}U=U.next}while(U!==null&&U!==p);C===null?_=u:C.next=T,Pn(u,r.memoizedState)||(Ht=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=C,o.lastRenderedState=u}if(t=o.interleaved,t!==null){f=t;do p=f.lane,Xe.lanes|=p,Ai|=p,f=f.next;while(f!==t)}else f===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function cc(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,f=o.pending,p=r.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do p=t(p,_.action),_=_.next;while(_!==f);Pn(p,r.memoizedState)||(Ht=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function hd(){}function fd(t,r){var o=Xe,u=gn(),f=r(),p=!Pn(u.memoizedState,f);if(p&&(u.memoizedState=f,Ht=!0),u=u.queue,hc(md.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||gt!==null&&gt.memoizedState.tag&1){if(o.flags|=2048,Fo(9,pd.bind(null,o,u,f,r),void 0,null),yt===null)throw Error(n(349));Si&30||dd(o,r,f)}return f}function dd(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function pd(t,r,o,u){r.value=o,r.getSnapshot=u,gd(r)&&yd(t)}function md(t,r,o){return o(function(){gd(r)&&yd(t)})}function gd(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Pn(t,o)}catch{return!0}}function yd(t){var r=cr(t,1);r!==null&&xn(r,t,1,-1)}function _d(t){var r=Hn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:t},r.queue=t,t=t.dispatch=Gy.bind(null,Xe,t),[r.memoizedState,t]}function Fo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function vd(){return gn().memoizedState}function ol(t,r,o,u){var f=Hn();Xe.flags|=t,f.memoizedState=Fo(1|r,o,void 0,u===void 0?null:u)}function al(t,r,o,u){var f=gn();u=u===void 0?null:u;var p=void 0;if(ct!==null){var _=ct.memoizedState;if(p=_.destroy,u!==null&&oc(u,_.deps)){f.memoizedState=Fo(r,o,p,u);return}}Xe.flags|=t,f.memoizedState=Fo(1|r,o,p,u)}function Ed(t,r){return ol(8390656,8,t,r)}function hc(t,r){return al(2048,8,t,r)}function wd(t,r){return al(4,2,t,r)}function Td(t,r){return al(4,4,t,r)}function Id(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Sd(t,r,o){return o=o!=null?o.concat([t]):null,al(4,4,Id.bind(null,r,t),o)}function fc(){}function Ad(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&oc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Rd(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&oc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Cd(t,r,o){return Si&21?(Pn(o,r)||(o=di(),Xe.lanes|=o,Ai|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=o)}function Wy(t,r){var o=Re;Re=o!==0&&4>o?o:4,t(!0);var u=sc.transition;sc.transition={};try{t(!1),r()}finally{Re=o,sc.transition=u}}function Pd(){return gn().memoizedState}function Qy(t,r,o){var u=Ur(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},kd(t))Vd(r,o);else if(o=od(t,r,o,u),o!==null){var f=zt();xn(o,t,u,f),Dd(o,r,u)}}function Gy(t,r,o){var u=Ur(t),f={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(kd(t))Vd(r,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,T=p(_,o);if(f.hasEagerState=!0,f.eagerState=T,Pn(T,_)){var C=r.interleaved;C===null?(f.next=f,Zu(r)):(f.next=C.next,C.next=f),r.interleaved=f;return}}catch{}finally{}o=od(t,r,f,u),o!==null&&(f=zt(),xn(o,t,u,f),Dd(o,r,u))}}function kd(t){var r=t.alternate;return t===Xe||r!==null&&r===Xe}function Vd(t,r){Oo=sl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Dd(t,r,o){if(o&4194240){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Ir(t,o)}}var ll={readContext:mn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},Ky={readContext:mn,useCallback:function(t,r){return Hn().memoizedState=[t,r===void 0?null:r],t},useContext:mn,useEffect:Ed,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,ol(4194308,4,Id.bind(null,r,t),o)},useLayoutEffect:function(t,r){return ol(4194308,4,t,r)},useInsertionEffect:function(t,r){return ol(4,2,t,r)},useMemo:function(t,r){var o=Hn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Hn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=Qy.bind(null,Xe,t),[u.memoizedState,t]},useRef:function(t){var r=Hn();return t={current:t},r.memoizedState=t},useState:_d,useDebugValue:fc,useDeferredValue:function(t){return Hn().memoizedState=t},useTransition:function(){var t=_d(!1),r=t[0];return t=Wy.bind(null,t[1]),Hn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Xe,f=Hn();if(Ge){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),yt===null)throw Error(n(349));Si&30||dd(u,r,o)}f.memoizedState=o;var p={value:o,getSnapshot:r};return f.queue=p,Ed(md.bind(null,u,p,t),[t]),u.flags|=2048,Fo(9,pd.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=Hn(),r=yt.identifierPrefix;if(Ge){var o=ur,u=lr;o=(u&~(1<<32-Mt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Lo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Hy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Xy={readContext:mn,useCallback:Ad,useContext:mn,useEffect:hc,useImperativeHandle:Sd,useInsertionEffect:wd,useLayoutEffect:Td,useMemo:Rd,useReducer:uc,useRef:vd,useState:function(){return uc(Mo)},useDebugValue:fc,useDeferredValue:function(t){var r=gn();return Cd(r,ct.memoizedState,t)},useTransition:function(){var t=uc(Mo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:hd,useSyncExternalStore:fd,useId:Pd,unstable_isNewReconciler:!1},Yy={readContext:mn,useCallback:Ad,useContext:mn,useEffect:hc,useImperativeHandle:Sd,useInsertionEffect:wd,useLayoutEffect:Td,useMemo:Rd,useReducer:cc,useRef:vd,useState:function(){return cc(Mo)},useDebugValue:fc,useDeferredValue:function(t){var r=gn();return ct===null?r.memoizedState=t:Cd(r,ct.memoizedState,t)},useTransition:function(){var t=cc(Mo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:hd,useSyncExternalStore:fd,useId:Pd,unstable_isNewReconciler:!1};function Vn(t,r){if(t&&t.defaultProps){r=ne({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function dc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ne({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var ul={isMounted:function(t){return(t=t._reactInternals)?wn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=zt(),f=Ur(t),p=hr(u,f);p.payload=r,o!=null&&(p.callback=o),r=Or(t,p,f),r!==null&&(xn(r,t,f,u),tl(r,t,f))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=zt(),f=Ur(t),p=hr(u,f);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Or(t,p,f),r!==null&&(xn(r,t,f,u),tl(r,t,f))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=zt(),u=Ur(t),f=hr(o,u);f.tag=2,r!=null&&(f.callback=r),r=Or(t,f,u),r!==null&&(xn(r,t,u,o),tl(r,t,u))}};function Nd(t,r,o,u,f,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!Io(o,u)||!Io(f,p):!0}function xd(t,r,o){var u=!1,f=Dr,p=r.contextType;return typeof p=="object"&&p!==null?p=mn(p):(f=qt(r)?vi:Vt.current,u=r.contextTypes,p=(u=u!=null)?ms(t,f):Dr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ul,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=p),r}function Od(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&ul.enqueueReplaceState(r,r.state,null)}function pc(t,r,o,u){var f=t.stateNode;f.props=o,f.state=t.memoizedState,f.refs={},ec(t);var p=r.contextType;typeof p=="object"&&p!==null?f.context=mn(p):(p=qt(r)?vi:Vt.current,f.context=ms(t,p)),f.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(dc(t,r,p,o),f.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&ul.enqueueReplaceState(f,f.state,null),nl(t,o,f,u),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function Is(t,r){try{var o="",u=r;do o+=Te(u),u=u.return;while(u);var f=o}catch(p){f=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:f,digest:null}}function mc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function gc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Jy=typeof WeakMap=="function"?WeakMap:Map;function Ld(t,r,o){o=hr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){gl||(gl=!0,Dc=u),gc(t,r)},o}function Md(t,r,o){o=hr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var f=r.value;o.payload=function(){return u(f)},o.callback=function(){gc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){gc(t,r),typeof u!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Fd(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Jy;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(f.add(o),t=f_.bind(null,t,r,o),r.then(t,t))}function Ud(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function zd(t,r,o,u,f){return t.mode&1?(t.flags|=65536,t.lanes=f,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=hr(-1,1),r.tag=2,Or(o,r,1))),o.lanes|=1),t)}var Zy=oe.ReactCurrentOwner,Ht=!1;function Ut(t,r,o,u){r.child=t===null?sd(r,null,o,u):vs(r,t.child,o,u)}function jd(t,r,o,u,f){o=o.render;var p=r.ref;return ws(r,f),u=ac(t,r,o,u,p,f),o=lc(),t!==null&&!Ht?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~f,fr(t,r,f)):(Ge&&o&&qu(r),r.flags|=1,Ut(t,r,u,f),r.child)}function Bd(t,r,o,u,f){if(t===null){var p=o.type;return typeof p=="function"&&!Uc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,bd(t,r,p,u,f)):(t=Tl(o.type,null,u,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!(t.lanes&f)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:Io,o(_,u)&&t.ref===r.ref)return fr(t,r,f)}return r.flags|=1,t=jr(p,u),t.ref=r.ref,t.return=r,r.child=t}function bd(t,r,o,u,f){if(t!==null){var p=t.memoizedProps;if(Io(p,u)&&t.ref===r.ref)if(Ht=!1,r.pendingProps=u=p,(t.lanes&f)!==0)t.flags&131072&&(Ht=!0);else return r.lanes=t.lanes,fr(t,r,f)}return yc(t,r,o,u,f)}function $d(t,r,o){var u=r.pendingProps,f=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(As,on),on|=o;else{if(!(o&1073741824))return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,qe(As,on),on|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,qe(As,on),on|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,qe(As,on),on|=u;return Ut(t,r,f,o),r.child}function qd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function yc(t,r,o,u,f){var p=qt(o)?vi:Vt.current;return p=ms(r,p),ws(r,f),o=ac(t,r,o,u,p,f),u=lc(),t!==null&&!Ht?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~f,fr(t,r,f)):(Ge&&u&&qu(r),r.flags|=1,Ut(t,r,o,f),r.child)}function Hd(t,r,o,u,f){if(qt(o)){var p=!0;Qa(r)}else p=!1;if(ws(r,f),r.stateNode===null)hl(t,r),xd(r,o,u),pc(r,o,u,f),u=!0;else if(t===null){var _=r.stateNode,T=r.memoizedProps;_.props=T;var C=_.context,U=o.contextType;typeof U=="object"&&U!==null?U=mn(U):(U=qt(o)?vi:Vt.current,U=ms(r,U));var W=o.getDerivedStateFromProps,K=typeof W=="function"||typeof _.getSnapshotBeforeUpdate=="function";K||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==u||C!==U)&&Od(r,_,u,U),xr=!1;var H=r.memoizedState;_.state=H,nl(r,u,_,f),C=r.memoizedState,T!==u||H!==C||$t.current||xr?(typeof W=="function"&&(dc(r,o,W,u),C=r.memoizedState),(T=xr||Nd(r,o,T,u,H,C,U))?(K||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=C),_.props=u,_.state=C,_.context=U,u=T):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,ad(t,r),T=r.memoizedProps,U=r.type===r.elementType?T:Vn(r.type,T),_.props=U,K=r.pendingProps,H=_.context,C=o.contextType,typeof C=="object"&&C!==null?C=mn(C):(C=qt(o)?vi:Vt.current,C=ms(r,C));var ee=o.getDerivedStateFromProps;(W=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==K||H!==C)&&Od(r,_,u,C),xr=!1,H=r.memoizedState,_.state=H,nl(r,u,_,f);var se=r.memoizedState;T!==K||H!==se||$t.current||xr?(typeof ee=="function"&&(dc(r,o,ee,u),se=r.memoizedState),(U=xr||Nd(r,o,U,u,H,se,C)||!1)?(W||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,se,C),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,se,C)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&H===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&H===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=se),_.props=u,_.state=se,_.context=C,u=U):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&H===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&H===t.memoizedState||(r.flags|=1024),u=!1)}return _c(t,r,o,u,p,f)}function _c(t,r,o,u,f,p){qd(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return f&&Xf(r,o,!1),fr(t,r,p);u=r.stateNode,Zy.current=r;var T=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=vs(r,t.child,null,p),r.child=vs(r,null,T,p)):Ut(t,r,T,p),r.memoizedState=u.state,f&&Xf(r,o,!0),r.child}function Wd(t){var r=t.stateNode;r.pendingContext?Gf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Gf(t,r.context,!1),tc(t,r.containerInfo)}function Qd(t,r,o,u,f){return _s(),Gu(f),r.flags|=256,Ut(t,r,o,u),r.child}var vc={dehydrated:null,treeContext:null,retryLane:0};function Ec(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gd(t,r,o){var u=r.pendingProps,f=Ke.current,p=!1,_=(r.flags&128)!==0,T;if((T=_)||(T=t!==null&&t.memoizedState===null?!1:(f&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),qe(Ke,f&1),t===null)return Qu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Il(_,u,0,null),t=ki(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=Ec(o),r.memoizedState=vc,t):wc(r,_));if(f=t.memoizedState,f!==null&&(T=f.dehydrated,T!==null))return e_(t,r,_,u,T,f,o);if(p){p=u.fallback,_=r.mode,f=t.child,T=f.sibling;var C={mode:"hidden",children:u.children};return!(_&1)&&r.child!==f?(u=r.child,u.childLanes=0,u.pendingProps=C,r.deletions=null):(u=jr(f,C),u.subtreeFlags=f.subtreeFlags&14680064),T!==null?p=jr(T,p):(p=ki(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?Ec(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=vc,u}return p=t.child,t=p.sibling,u=jr(p,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function wc(t,r){return r=Il({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function cl(t,r,o,u){return u!==null&&Gu(u),vs(r,t.child,null,o),t=wc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function e_(t,r,o,u,f,p,_){if(o)return r.flags&256?(r.flags&=-257,u=mc(Error(n(422))),cl(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,f=r.mode,u=Il({mode:"visible",children:u.children},f,0,null),p=ki(p,f,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,r.mode&1&&vs(r,t.child,null,_),r.child.memoizedState=Ec(_),r.memoizedState=vc,p);if(!(r.mode&1))return cl(t,r,_,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=mc(p,u,void 0),cl(t,r,_,u)}if(T=(_&t.childLanes)!==0,Ht||T){if(u=yt,u!==null){switch(_&-_){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(u.suspendedLanes|_)?0:f,f!==0&&f!==p.retryLane&&(p.retryLane=f,cr(t,f),xn(u,t,f,-1))}return Fc(),u=mc(Error(n(421))),cl(t,r,_,u)}return f.data==="$?"?(r.flags|=128,r.child=t.child,r=d_.bind(null,t),f._reactRetry=r,null):(t=p.treeContext,sn=kr(f.nextSibling),rn=r,Ge=!0,kn=null,t!==null&&(dn[pn++]=lr,dn[pn++]=ur,dn[pn++]=Ei,lr=t.id,ur=t.overflow,Ei=r),r=wc(r,u.children),r.flags|=4096,r)}function Kd(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Ju(t.return,r,o)}function Tc(t,r,o,u,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function Xd(t,r,o){var u=r.pendingProps,f=u.revealOrder,p=u.tail;if(Ut(t,r,u.children,o),u=Ke.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kd(t,o,r);else if(t.tag===19)Kd(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(qe(Ke,u),!(r.mode&1))r.memoizedState=null;else switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&rl(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Tc(r,!1,f,o,p);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&rl(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}Tc(r,!0,o,null,p);break;case"together":Tc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function hl(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function fr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Ai|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=jr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=jr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function t_(t,r,o){switch(r.tag){case 3:Wd(r),_s();break;case 5:cd(r);break;case 1:qt(r.type)&&Qa(r);break;case 4:tc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,f=r.memoizedProps.value;qe(Za,u._currentValue),u._currentValue=f;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(qe(Ke,Ke.current&1),r.flags|=128,null):o&r.child.childLanes?Gd(t,r,o):(qe(Ke,Ke.current&1),t=fr(t,r,o),t!==null?t.sibling:null);qe(Ke,Ke.current&1);break;case 19:if(u=(o&r.childLanes)!==0,t.flags&128){if(u)return Xd(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),qe(Ke,Ke.current),u)break;return null;case 22:case 23:return r.lanes=0,$d(t,r,o)}return fr(t,r,o)}var Yd,Ic,Jd,Zd;Yd=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Ic=function(){},Jd=function(t,r,o,u){var f=t.memoizedProps;if(f!==u){t=r.stateNode,Ii(qn.current);var p=null;switch(o){case"input":f=ni(t,f),u=ni(t,u),p=[];break;case"select":f=ne({},f,{value:void 0}),u=ne({},u,{value:void 0}),p=[];break;case"textarea":f=Ys(t,f),u=Ys(t,u),p=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=qa)}ro(o,u);var _;o=null;for(U in f)if(!u.hasOwnProperty(U)&&f.hasOwnProperty(U)&&f[U]!=null)if(U==="style"){var T=f[U];for(_ in T)T.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var C=u[U];if(T=f!=null?f[U]:void 0,u.hasOwnProperty(U)&&C!==T&&(C!=null||T!=null))if(U==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||C&&C.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in C)C.hasOwnProperty(_)&&T[_]!==C[_]&&(o||(o={}),o[_]=C[_])}else o||(p||(p=[]),p.push(U,o)),o=C;else U==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,T=T?T.__html:void 0,C!=null&&T!==C&&(p=p||[]).push(U,C)):U==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(U,""+C):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(C!=null&&U==="onScroll"&&He("scroll",t),p||T===C||(p=[])):(p=p||[]).push(U,C))}o&&(p=p||[]).push("style",o);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},Zd=function(t,r,o,u){o!==u&&(r.flags|=4)};function Uo(t,r){if(!Ge)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Nt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function n_(t,r,o){var u=r.pendingProps;switch(Hu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(r),null;case 1:return qt(r.type)&&Wa(),Nt(r),null;case 3:return u=r.stateNode,Ts(),We($t),We(Vt),ic(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Ya(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,kn!==null&&(Oc(kn),kn=null))),Ic(t,r),Nt(r),null;case 5:nc(r);var f=Ii(xo.current);if(o=r.type,t!==null&&r.stateNode!=null)Jd(t,r,o,u,f),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Nt(r),null}if(t=Ii(qn.current),Ya(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[$n]=r,u[Po]=p,t=(r.mode&1)!==0,o){case"dialog":He("cancel",u),He("close",u);break;case"iframe":case"object":case"embed":He("load",u);break;case"video":case"audio":for(f=0;f<Ao.length;f++)He(Ao[f],u);break;case"source":He("error",u);break;case"img":case"image":case"link":He("error",u),He("load",u);break;case"details":He("toggle",u);break;case"input":Fi(u,p),He("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},He("invalid",u);break;case"textarea":zi(u,p),He("invalid",u)}ro(o,p),f=null;for(var _ in p)if(p.hasOwnProperty(_)){var T=p[_];_==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&$a(u.textContent,T,t),f=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&$a(u.textContent,T,t),f=["children",""+T]):a.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&He("scroll",u)}switch(o){case"input":Xn(u),ma(u,p,!0);break;case"textarea":Xn(u),Js(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=qa)}u=f,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=at(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[$n]=r,t[Po]=u,Yd(t,r,!1,!1),r.stateNode=t;e:{switch(_=io(o,u),o){case"dialog":He("cancel",t),He("close",t),f=u;break;case"iframe":case"object":case"embed":He("load",t),f=u;break;case"video":case"audio":for(f=0;f<Ao.length;f++)He(Ao[f],t);f=u;break;case"source":He("error",t),f=u;break;case"img":case"image":case"link":He("error",t),He("load",t),f=u;break;case"details":He("toggle",t),f=u;break;case"input":Fi(t,u),f=ni(t,u),He("invalid",t);break;case"option":f=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},f=ne({},u,{value:void 0}),He("invalid",t);break;case"textarea":zi(t,u),f=Ys(t,u),He("invalid",t);break;default:f=u}ro(o,f),T=f;for(p in T)if(T.hasOwnProperty(p)){var C=T[p];p==="style"?to(t,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Zs(t,C)):p==="children"?typeof C=="string"?(o!=="textarea"||C!=="")&&_r(t,C):typeof C=="number"&&_r(t,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?C!=null&&p==="onScroll"&&He("scroll",t):C!=null&&Z(t,p,C,_))}switch(o){case"input":Xn(t),ma(t,u,!1);break;case"textarea":Xn(t),Js(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Me(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Jn(t,!!u.multiple,p,!1):u.defaultValue!=null&&Jn(t,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=qa)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Nt(r),null;case 6:if(t&&r.stateNode!=null)Zd(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Ii(xo.current),Ii(qn.current),Ya(r)){if(u=r.stateNode,o=r.memoizedProps,u[$n]=r,(p=u.nodeValue!==o)&&(t=rn,t!==null))switch(t.tag){case 3:$a(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$a(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[$n]=r,r.stateNode=u}return Nt(r),null;case 13:if(We(Ke),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&sn!==null&&r.mode&1&&!(r.flags&128))nd(),_s(),r.flags|=98560,p=!1;else if(p=Ya(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[$n]=r}else _s(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Nt(r),p=!1}else kn!==null&&(Oc(kn),kn=null),p=!0;if(!p)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,r.mode&1&&(t===null||Ke.current&1?ht===0&&(ht=3):Fc())),r.updateQueue!==null&&(r.flags|=4),Nt(r),null);case 4:return Ts(),Ic(t,r),t===null&&Ro(r.stateNode.containerInfo),Nt(r),null;case 10:return Yu(r.type._context),Nt(r),null;case 17:return qt(r.type)&&Wa(),Nt(r),null;case 19:if(We(Ke),p=r.memoizedState,p===null)return Nt(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)Uo(p,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(_=rl(t),_!==null){for(r.flags|=128,Uo(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return qe(Ke,Ke.current&1|2),r.child}t=t.sibling}p.tail!==null&&$e()>Rs&&(r.flags|=128,u=!0,Uo(p,!1),r.lanes=4194304)}else{if(!u)if(t=rl(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Uo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ge)return Nt(r),null}else 2*$e()-p.renderingStartTime>Rs&&o!==1073741824&&(r.flags|=128,u=!0,Uo(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=$e(),r.sibling=null,o=Ke.current,qe(Ke,u?o&1|2:o&1),r):(Nt(r),null);case 22:case 23:return Mc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&r.mode&1?on&1073741824&&(Nt(r),r.subtreeFlags&6&&(r.flags|=8192)):Nt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function r_(t,r){switch(Hu(r),r.tag){case 1:return qt(r.type)&&Wa(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ts(),We($t),We(Vt),ic(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return nc(r),null;case 13:if(We(Ke),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));_s()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return We(Ke),null;case 4:return Ts(),null;case 10:return Yu(r.type._context),null;case 22:case 23:return Mc(),null;case 24:return null;default:return null}}var fl=!1,xt=!1,i_=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ss(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Je(t,r,u)}else o.current=null}function Sc(t,r,o){try{o()}catch(u){Je(t,r,u)}}var ep=!1;function s_(t,r){if(Mu=Rr,t=Nf(),Pu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,T=-1,C=-1,U=0,W=0,K=t,H=null;t:for(;;){for(var ee;K!==o||f!==0&&K.nodeType!==3||(T=_+f),K!==p||u!==0&&K.nodeType!==3||(C=_+u),K.nodeType===3&&(_+=K.nodeValue.length),(ee=K.firstChild)!==null;)H=K,K=ee;for(;;){if(K===t)break t;if(H===o&&++U===f&&(T=_),H===p&&++W===u&&(C=_),(ee=K.nextSibling)!==null)break;K=H,H=K.parentNode}K=ee}o=T===-1||C===-1?null:{start:T,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(Fu={focusedElem:t,selectionRange:o},Rr=!1,ie=r;ie!==null;)if(r=ie,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ie=t;else for(;ie!==null;){r=ie;try{var se=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(se!==null){var ae=se.memoizedProps,tt=se.memoizedState,M=r.stateNode,V=M.getSnapshotBeforeUpdate(r.elementType===r.type?ae:Vn(r.type,ae),tt);M.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(X){Je(r,r.return,X)}if(t=r.sibling,t!==null){t.return=r.return,ie=t;break}ie=r.return}return se=ep,ep=!1,se}function zo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&t)===t){var p=f.destroy;f.destroy=void 0,p!==void 0&&Sc(r,o,p)}f=f.next}while(f!==u)}}function dl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Ac(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function tp(t){var r=t.alternate;r!==null&&(t.alternate=null,tp(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[$n],delete r[Po],delete r[Bu],delete r[By],delete r[by])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function np(t){return t.tag===5||t.tag===3||t.tag===4}function rp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||np(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=qa));else if(u!==4&&(t=t.child,t!==null))for(Rc(t,r,o),t=t.sibling;t!==null;)Rc(t,r,o),t=t.sibling}function Cc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Cc(t,r,o),t=t.sibling;t!==null;)Cc(t,r,o),t=t.sibling}var It=null,Dn=!1;function Lr(t,r,o){for(o=o.child;o!==null;)ip(t,r,o),o=o.sibling}function ip(t,r,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(hi,o)}catch{}switch(o.tag){case 5:xt||Ss(o,r);case 6:var u=It,f=Dn;It=null,Lr(t,r,o),It=u,Dn=f,It!==null&&(Dn?(t=It,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):It.removeChild(o.stateNode));break;case 18:It!==null&&(Dn?(t=It,o=o.stateNode,t.nodeType===8?ju(t.parentNode,o):t.nodeType===1&&ju(t,o),Rn(t)):ju(It,o.stateNode));break;case 4:u=It,f=Dn,It=o.stateNode.containerInfo,Dn=!0,Lr(t,r,o),It=u,Dn=f;break;case 0:case 11:case 14:case 15:if(!xt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var p=f,_=p.destroy;p=p.tag,_!==void 0&&(p&2||p&4)&&Sc(o,r,_),f=f.next}while(f!==u)}Lr(t,r,o);break;case 1:if(!xt&&(Ss(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){Je(o,r,T)}Lr(t,r,o);break;case 21:Lr(t,r,o);break;case 22:o.mode&1?(xt=(u=xt)||o.memoizedState!==null,Lr(t,r,o),xt=u):Lr(t,r,o);break;default:Lr(t,r,o)}}function sp(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new i_),r.forEach(function(u){var f=p_.bind(null,t,u);o.has(u)||(o.add(u),u.then(f,f))})}}function Nn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];try{var p=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 5:It=T.stateNode,Dn=!1;break e;case 3:It=T.stateNode.containerInfo,Dn=!0;break e;case 4:It=T.stateNode.containerInfo,Dn=!0;break e}T=T.return}if(It===null)throw Error(n(160));ip(p,_,f),It=null,Dn=!1;var C=f.alternate;C!==null&&(C.return=null),f.return=null}catch(U){Je(f,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)op(r,t),r=r.sibling}function op(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(r,t),Wn(t),u&4){try{zo(3,t,t.return),dl(3,t)}catch(ae){Je(t,t.return,ae)}try{zo(5,t,t.return)}catch(ae){Je(t,t.return,ae)}}break;case 1:Nn(r,t),Wn(t),u&512&&o!==null&&Ss(o,o.return);break;case 5:if(Nn(r,t),Wn(t),u&512&&o!==null&&Ss(o,o.return),t.flags&32){var f=t.stateNode;try{_r(f,"")}catch(ae){Je(t,t.return,ae)}}if(u&4&&(f=t.stateNode,f!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,T=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&Ks(f,p),io(T,_);var U=io(T,p);for(_=0;_<C.length;_+=2){var W=C[_],K=C[_+1];W==="style"?to(f,K):W==="dangerouslySetInnerHTML"?Zs(f,K):W==="children"?_r(f,K):Z(f,W,K,U)}switch(T){case"input":Xs(f,p);break;case"textarea":ji(f,p);break;case"select":var H=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!p.multiple;var ee=p.value;ee!=null?Jn(f,!!p.multiple,ee,!1):H!==!!p.multiple&&(p.defaultValue!=null?Jn(f,!!p.multiple,p.defaultValue,!0):Jn(f,!!p.multiple,p.multiple?[]:"",!1))}f[Po]=p}catch(ae){Je(t,t.return,ae)}}break;case 6:if(Nn(r,t),Wn(t),u&4){if(t.stateNode===null)throw Error(n(162));f=t.stateNode,p=t.memoizedProps;try{f.nodeValue=p}catch(ae){Je(t,t.return,ae)}}break;case 3:if(Nn(r,t),Wn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Rn(r.containerInfo)}catch(ae){Je(t,t.return,ae)}break;case 4:Nn(r,t),Wn(t);break;case 13:Nn(r,t),Wn(t),f=t.child,f.flags&8192&&(p=f.memoizedState!==null,f.stateNode.isHidden=p,!p||f.alternate!==null&&f.alternate.memoizedState!==null||(Vc=$e())),u&4&&sp(t);break;case 22:if(W=o!==null&&o.memoizedState!==null,t.mode&1?(xt=(U=xt)||W,Nn(r,t),xt=U):Nn(r,t),Wn(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!W&&t.mode&1)for(ie=t,W=t.child;W!==null;){for(K=ie=W;ie!==null;){switch(H=ie,ee=H.child,H.tag){case 0:case 11:case 14:case 15:zo(4,H,H.return);break;case 1:Ss(H,H.return);var se=H.stateNode;if(typeof se.componentWillUnmount=="function"){u=H,o=H.return;try{r=u,se.props=r.memoizedProps,se.state=r.memoizedState,se.componentWillUnmount()}catch(ae){Je(u,o,ae)}}break;case 5:Ss(H,H.return);break;case 22:if(H.memoizedState!==null){up(K);continue}}ee!==null?(ee.return=H,ie=ee):up(K)}W=W.sibling}e:for(W=null,K=t;;){if(K.tag===5){if(W===null){W=K;try{f=K.stateNode,U?(p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=K.stateNode,C=K.memoizedProps.style,_=C!=null&&C.hasOwnProperty("display")?C.display:null,T.style.display=eo("display",_))}catch(ae){Je(t,t.return,ae)}}}else if(K.tag===6){if(W===null)try{K.stateNode.nodeValue=U?"":K.memoizedProps}catch(ae){Je(t,t.return,ae)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===t)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===t)break e;for(;K.sibling===null;){if(K.return===null||K.return===t)break e;W===K&&(W=null),K=K.return}W===K&&(W=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Nn(r,t),Wn(t),u&4&&sp(t);break;case 21:break;default:Nn(r,t),Wn(t)}}function Wn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(np(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(_r(f,""),u.flags&=-33);var p=rp(t);Cc(t,p,f);break;case 3:case 4:var _=u.stateNode.containerInfo,T=rp(t);Rc(t,T,_);break;default:throw Error(n(161))}}catch(C){Je(t,t.return,C)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function o_(t,r,o){ie=t,ap(t)}function ap(t,r,o){for(var u=(t.mode&1)!==0;ie!==null;){var f=ie,p=f.child;if(f.tag===22&&u){var _=f.memoizedState!==null||fl;if(!_){var T=f.alternate,C=T!==null&&T.memoizedState!==null||xt;T=fl;var U=xt;if(fl=_,(xt=C)&&!U)for(ie=f;ie!==null;)_=ie,C=_.child,_.tag===22&&_.memoizedState!==null?cp(f):C!==null?(C.return=_,ie=C):cp(f);for(;p!==null;)ie=p,ap(p),p=p.sibling;ie=f,fl=T,xt=U}lp(t)}else f.subtreeFlags&8772&&p!==null?(p.return=f,ie=p):lp(t)}}function lp(t){for(;ie!==null;){var r=ie;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:xt||dl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!xt)if(o===null)u.componentDidMount();else{var f=r.elementType===r.type?o.memoizedProps:Vn(r.type,o.memoizedProps);u.componentDidUpdate(f,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&ud(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}ud(r,_,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var C=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&o.focus();break;case"img":C.src&&(o.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var W=U.memoizedState;if(W!==null){var K=W.dehydrated;K!==null&&Rn(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}xt||r.flags&512&&Ac(r)}catch(H){Je(r,r.return,H)}}if(r===t){ie=null;break}if(o=r.sibling,o!==null){o.return=r.return,ie=o;break}ie=r.return}}function up(t){for(;ie!==null;){var r=ie;if(r===t){ie=null;break}var o=r.sibling;if(o!==null){o.return=r.return,ie=o;break}ie=r.return}}function cp(t){for(;ie!==null;){var r=ie;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{dl(4,r)}catch(C){Je(r,o,C)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var f=r.return;try{u.componentDidMount()}catch(C){Je(r,f,C)}}var p=r.return;try{Ac(r)}catch(C){Je(r,p,C)}break;case 5:var _=r.return;try{Ac(r)}catch(C){Je(r,_,C)}}}catch(C){Je(r,r.return,C)}if(r===t){ie=null;break}var T=r.sibling;if(T!==null){T.return=r.return,ie=T;break}ie=r.return}}var a_=Math.ceil,pl=oe.ReactCurrentDispatcher,Pc=oe.ReactCurrentOwner,yn=oe.ReactCurrentBatchConfig,xe=0,yt=null,it=null,St=0,on=0,As=Vr(0),ht=0,jo=null,Ai=0,ml=0,kc=0,Bo=null,Wt=null,Vc=0,Rs=1/0,dr=null,gl=!1,Dc=null,Mr=null,yl=!1,Fr=null,_l=0,bo=0,Nc=null,vl=-1,El=0;function zt(){return xe&6?$e():vl!==-1?vl:vl=$e()}function Ur(t){return t.mode&1?xe&2&&St!==0?St&-St:qy.transition!==null?(El===0&&(El=di()),El):(t=Re,t!==0||(t=window.event,t=t===void 0?16:go(t.type)),t):1}function xn(t,r,o,u){if(50<bo)throw bo=0,Nc=null,Error(n(185));Tr(t,o,u),(!(xe&2)||t!==yt)&&(t===yt&&(!(xe&2)&&(ml|=o),ht===4&&zr(t,St)),Qt(t,u),o===1&&xe===0&&!(r.mode&1)&&(Rs=$e()+500,Ga&&Nr()))}function Qt(t,r){var o=t.callbackNode;tr(t,r);var u=fi(t,t===yt?St:0);if(u===0)o!==null&&co(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&co(o),r===1)t.tag===0?$y(fp.bind(null,t)):Yf(fp.bind(null,t)),zy(function(){!(xe&6)&&Nr()}),o=null;else{switch(Sr(u)){case 1:o=ci;break;case 4:o=vr;break;case 16:o=cn;break;case 536870912:o=Ea;break;default:o=cn}o=Ep(o,hp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function hp(t,r){if(vl=-1,El=0,xe&6)throw Error(n(327));var o=t.callbackNode;if(Cs()&&t.callbackNode!==o)return null;var u=fi(t,t===yt?St:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=wl(t,u);else{r=u;var f=xe;xe|=2;var p=pp();(yt!==t||St!==r)&&(dr=null,Rs=$e()+500,Ci(t,r));do try{c_();break}catch(T){dp(t,T)}while(!0);Xu(),pl.current=p,xe=f,it!==null?r=0:(yt=null,St=0,r=ht)}if(r!==0){if(r===2&&(f=en(t),f!==0&&(u=f,r=xc(t,f))),r===1)throw o=jo,Ci(t,0),zr(t,u),Qt(t,$e()),o;if(r===6)zr(t,u);else{if(f=t.current.alternate,!(u&30)&&!l_(f)&&(r=wl(t,u),r===2&&(p=en(t),p!==0&&(u=p,r=xc(t,p))),r===1))throw o=jo,Ci(t,0),zr(t,u),Qt(t,$e()),o;switch(t.finishedWork=f,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Pi(t,Wt,dr);break;case 3:if(zr(t,u),(u&130023424)===u&&(r=Vc+500-$e(),10<r)){if(fi(t,0)!==0)break;if(f=t.suspendedLanes,(f&u)!==u){zt(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=zu(Pi.bind(null,t,Wt,dr),r);break}Pi(t,Wt,dr);break;case 4:if(zr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,f=-1;0<u;){var _=31-Mt(u);p=1<<_,_=r[_],_>f&&(f=_),u&=~p}if(u=f,u=$e()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*a_(u/1960))-u,10<u){t.timeoutHandle=zu(Pi.bind(null,t,Wt,dr),u);break}Pi(t,Wt,dr);break;case 5:Pi(t,Wt,dr);break;default:throw Error(n(329))}}}return Qt(t,$e()),t.callbackNode===o?hp.bind(null,t):null}function xc(t,r){var o=Bo;return t.current.memoizedState.isDehydrated&&(Ci(t,r).flags|=256),t=wl(t,r),t!==2&&(r=Wt,Wt=o,r!==null&&Oc(r)),t}function Oc(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function l_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Pn(p(),f))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function zr(t,r){for(r&=~kc,r&=~ml,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Mt(r),u=1<<o;t[o]=-1,r&=~u}}function fp(t){if(xe&6)throw Error(n(327));Cs();var r=fi(t,0);if(!(r&1))return Qt(t,$e()),null;var o=wl(t,r);if(t.tag!==0&&o===2){var u=en(t);u!==0&&(r=u,o=xc(t,u))}if(o===1)throw o=jo,Ci(t,0),zr(t,r),Qt(t,$e()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Pi(t,Wt,dr),Qt(t,$e()),null}function Lc(t,r){var o=xe;xe|=1;try{return t(r)}finally{xe=o,xe===0&&(Rs=$e()+500,Ga&&Nr())}}function Ri(t){Fr!==null&&Fr.tag===0&&!(xe&6)&&Cs();var r=xe;xe|=1;var o=yn.transition,u=Re;try{if(yn.transition=null,Re=1,t)return t()}finally{Re=u,yn.transition=o,xe=r,!(xe&6)&&Nr()}}function Mc(){on=As.current,We(As)}function Ci(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Uy(o)),it!==null)for(o=it.return;o!==null;){var u=o;switch(Hu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Wa();break;case 3:Ts(),We($t),We(Vt),ic();break;case 5:nc(u);break;case 4:Ts();break;case 13:We(Ke);break;case 19:We(Ke);break;case 10:Yu(u.type._context);break;case 22:case 23:Mc()}o=o.return}if(yt=t,it=t=jr(t.current,null),St=on=r,ht=0,jo=null,kc=ml=Ai=0,Wt=Bo=null,Ti!==null){for(r=0;r<Ti.length;r++)if(o=Ti[r],u=o.interleaved,u!==null){o.interleaved=null;var f=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=f,u.next=_}o.pending=u}Ti=null}return t}function dp(t,r){do{var o=it;try{if(Xu(),il.current=ll,sl){for(var u=Xe.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}sl=!1}if(Si=0,gt=ct=Xe=null,Oo=!1,Lo=0,Pc.current=null,o===null||o.return===null){ht=1,jo=r,it=null;break}e:{var p=t,_=o.return,T=o,C=r;if(r=St,T.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var U=C,W=T,K=W.tag;if(!(W.mode&1)&&(K===0||K===11||K===15)){var H=W.alternate;H?(W.updateQueue=H.updateQueue,W.memoizedState=H.memoizedState,W.lanes=H.lanes):(W.updateQueue=null,W.memoizedState=null)}var ee=Ud(_);if(ee!==null){ee.flags&=-257,zd(ee,_,T,p,r),ee.mode&1&&Fd(p,U,r),r=ee,C=U;var se=r.updateQueue;if(se===null){var ae=new Set;ae.add(C),r.updateQueue=ae}else se.add(C);break e}else{if(!(r&1)){Fd(p,U,r),Fc();break e}C=Error(n(426))}}else if(Ge&&T.mode&1){var tt=Ud(_);if(tt!==null){!(tt.flags&65536)&&(tt.flags|=256),zd(tt,_,T,p,r),Gu(Is(C,T));break e}}p=C=Is(C,T),ht!==4&&(ht=2),Bo===null?Bo=[p]:Bo.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=Ld(p,C,r);ld(p,M);break e;case 1:T=C;var V=p.type,F=p.stateNode;if(!(p.flags&128)&&(typeof V.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Mr===null||!Mr.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var X=Md(p,T,r);ld(p,X);break e}}p=p.return}while(p!==null)}gp(o)}catch(le){r=le,it===o&&o!==null&&(it=o=o.return);continue}break}while(!0)}function pp(){var t=pl.current;return pl.current=ll,t===null?ll:t}function Fc(){(ht===0||ht===3||ht===2)&&(ht=4),yt===null||!(Ai&268435455)&&!(ml&268435455)||zr(yt,St)}function wl(t,r){var o=xe;xe|=2;var u=pp();(yt!==t||St!==r)&&(dr=null,Ci(t,r));do try{u_();break}catch(f){dp(t,f)}while(!0);if(Xu(),xe=o,pl.current=u,it!==null)throw Error(n(261));return yt=null,St=0,ht}function u_(){for(;it!==null;)mp(it)}function c_(){for(;it!==null&&!_a();)mp(it)}function mp(t){var r=vp(t.alternate,t,on);t.memoizedProps=t.pendingProps,r===null?gp(t):it=r,Pc.current=null}function gp(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=r_(o,r),o!==null){o.flags&=32767,it=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,it=null;return}}else if(o=n_(o,r,on),o!==null){it=o;return}if(r=r.sibling,r!==null){it=r;return}it=r=t}while(r!==null);ht===0&&(ht=5)}function Pi(t,r,o){var u=Re,f=yn.transition;try{yn.transition=null,Re=1,h_(t,r,o,u)}finally{yn.transition=f,Re=u}return null}function h_(t,r,o,u){do Cs();while(Fr!==null);if(xe&6)throw Error(n(327));o=t.finishedWork;var f=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(je(t,p),t===yt&&(it=yt=null,St=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||yl||(yl=!0,Ep(cn,function(){return Cs(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=yn.transition,yn.transition=null;var _=Re;Re=1;var T=xe;xe|=4,Pc.current=null,s_(t,o),op(o,t),Dy(Fu),Rr=!!Mu,Fu=Mu=null,t.current=o,o_(o),Eu(),xe=T,Re=_,yn.transition=p}else t.current=o;if(yl&&(yl=!1,Fr=t,_l=f),p=t.pendingLanes,p===0&&(Mr=null),wa(o.stateNode),Qt(t,$e()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)f=r[o],u(f.value,{componentStack:f.stack,digest:f.digest});if(gl)throw gl=!1,t=Dc,Dc=null,t;return _l&1&&t.tag!==0&&Cs(),p=t.pendingLanes,p&1?t===Nc?bo++:(bo=0,Nc=t):bo=0,Nr(),null}function Cs(){if(Fr!==null){var t=Sr(_l),r=yn.transition,o=Re;try{if(yn.transition=null,Re=16>t?16:t,Fr===null)var u=!1;else{if(t=Fr,Fr=null,_l=0,xe&6)throw Error(n(331));var f=xe;for(xe|=4,ie=t.current;ie!==null;){var p=ie,_=p.child;if(ie.flags&16){var T=p.deletions;if(T!==null){for(var C=0;C<T.length;C++){var U=T[C];for(ie=U;ie!==null;){var W=ie;switch(W.tag){case 0:case 11:case 15:zo(8,W,p)}var K=W.child;if(K!==null)K.return=W,ie=K;else for(;ie!==null;){W=ie;var H=W.sibling,ee=W.return;if(tp(W),W===U){ie=null;break}if(H!==null){H.return=ee,ie=H;break}ie=ee}}}var se=p.alternate;if(se!==null){var ae=se.child;if(ae!==null){se.child=null;do{var tt=ae.sibling;ae.sibling=null,ae=tt}while(ae!==null)}}ie=p}}if(p.subtreeFlags&2064&&_!==null)_.return=p,ie=_;else e:for(;ie!==null;){if(p=ie,p.flags&2048)switch(p.tag){case 0:case 11:case 15:zo(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,ie=M;break e}ie=p.return}}var V=t.current;for(ie=V;ie!==null;){_=ie;var F=_.child;if(_.subtreeFlags&2064&&F!==null)F.return=_,ie=F;else e:for(_=V;ie!==null;){if(T=ie,T.flags&2048)try{switch(T.tag){case 0:case 11:case 15:dl(9,T)}}catch(le){Je(T,T.return,le)}if(T===_){ie=null;break e}var X=T.sibling;if(X!==null){X.return=T.return,ie=X;break e}ie=T.return}}if(xe=f,Nr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(hi,t)}catch{}u=!0}return u}finally{Re=o,yn.transition=r}}return!1}function yp(t,r,o){r=Is(o,r),r=Ld(t,r,1),t=Or(t,r,1),r=zt(),t!==null&&(Tr(t,1,r),Qt(t,r))}function Je(t,r,o){if(t.tag===3)yp(t,t,o);else for(;r!==null;){if(r.tag===3){yp(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Mr===null||!Mr.has(u))){t=Is(o,t),t=Md(r,t,1),r=Or(r,t,1),t=zt(),r!==null&&(Tr(r,1,t),Qt(r,t));break}}r=r.return}}function f_(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=zt(),t.pingedLanes|=t.suspendedLanes&o,yt===t&&(St&o)===o&&(ht===4||ht===3&&(St&130023424)===St&&500>$e()-Vc?Ci(t,0):kc|=o),Qt(t,r)}function _p(t,r){r===0&&(t.mode&1?(r=Xi,Xi<<=1,!(Xi&130023424)&&(Xi=4194304)):r=1);var o=zt();t=cr(t,r),t!==null&&(Tr(t,r,o),Qt(t,o))}function d_(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),_p(t,o)}function p_(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),_p(t,o)}var vp;vp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||$t.current)Ht=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return Ht=!1,t_(t,r,o);Ht=!!(t.flags&131072)}else Ht=!1,Ge&&r.flags&1048576&&Jf(r,Xa,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;hl(t,r),t=r.pendingProps;var f=ms(r,Vt.current);ws(r,o),f=ac(null,r,u,t,f,o);var p=lc();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,qt(u)?(p=!0,Qa(r)):p=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,ec(r),f.updater=ul,r.stateNode=f,f._reactInternals=r,pc(r,u,t,o),r=_c(null,r,u,!0,p,o)):(r.tag=0,Ge&&p&&qu(r),Ut(null,r,f,o),r=r.child),r;case 16:u=r.elementType;e:{switch(hl(t,r),t=r.pendingProps,f=u._init,u=f(u._payload),r.type=u,f=r.tag=g_(u),t=Vn(u,t),f){case 0:r=yc(null,r,u,t,o);break e;case 1:r=Hd(null,r,u,t,o);break e;case 11:r=jd(null,r,u,t,o);break e;case 14:r=Bd(null,r,u,Vn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:Vn(u,f),yc(t,r,u,f,o);case 1:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:Vn(u,f),Hd(t,r,u,f,o);case 3:e:{if(Wd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,f=p.element,ad(t,r),nl(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){f=Is(Error(n(423)),r),r=Qd(t,r,u,o,f);break e}else if(u!==f){f=Is(Error(n(424)),r),r=Qd(t,r,u,o,f);break e}else for(sn=kr(r.stateNode.containerInfo.firstChild),rn=r,Ge=!0,kn=null,o=sd(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(_s(),u===f){r=fr(t,r,o);break e}Ut(t,r,u,o)}r=r.child}return r;case 5:return cd(r),t===null&&Qu(r),u=r.type,f=r.pendingProps,p=t!==null?t.memoizedProps:null,_=f.children,Uu(u,f)?_=null:p!==null&&Uu(u,p)&&(r.flags|=32),qd(t,r),Ut(t,r,_,o),r.child;case 6:return t===null&&Qu(r),null;case 13:return Gd(t,r,o);case 4:return tc(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=vs(r,null,u,o):Ut(t,r,u,o),r.child;case 11:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:Vn(u,f),jd(t,r,u,f,o);case 7:return Ut(t,r,r.pendingProps,o),r.child;case 8:return Ut(t,r,r.pendingProps.children,o),r.child;case 12:return Ut(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,f=r.pendingProps,p=r.memoizedProps,_=f.value,qe(Za,u._currentValue),u._currentValue=_,p!==null)if(Pn(p.value,_)){if(p.children===f.children&&!$t.current){r=fr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){_=p.child;for(var C=T.firstContext;C!==null;){if(C.context===u){if(p.tag===1){C=hr(-1,o&-o),C.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var W=U.pending;W===null?C.next=C:(C.next=W.next,W.next=C),U.pending=C}}p.lanes|=o,C=p.alternate,C!==null&&(C.lanes|=o),Ju(p.return,o,r),T.lanes|=o;break}C=C.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,T=_.alternate,T!==null&&(T.lanes|=o),Ju(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}Ut(t,r,f.children,o),r=r.child}return r;case 9:return f=r.type,u=r.pendingProps.children,ws(r,o),f=mn(f),u=u(f),r.flags|=1,Ut(t,r,u,o),r.child;case 14:return u=r.type,f=Vn(u,r.pendingProps),f=Vn(u.type,f),Bd(t,r,u,f,o);case 15:return bd(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:Vn(u,f),hl(t,r),r.tag=1,qt(u)?(t=!0,Qa(r)):t=!1,ws(r,o),xd(r,u,f),pc(r,u,f,o),_c(null,r,u,!0,t,o);case 19:return Xd(t,r,o);case 22:return $d(t,r,o)}throw Error(n(156,r.tag))};function Ep(t,r){return Gi(t,r)}function m_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,r,o,u){return new m_(t,r,o,u)}function Uc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function g_(t){if(typeof t=="function")return Uc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O)return 11;if(t===Pt)return 14}return 2}function jr(t,r){var o=t.alternate;return o===null?(o=_n(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Tl(t,r,o,u,f,p){var _=2;if(u=t,typeof t=="function")Uc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case D:return ki(o.children,f,p,r);case I:_=8,f|=8;break;case R:return t=_n(12,o,r,f|2),t.elementType=R,t.lanes=p,t;case A:return t=_n(13,o,r,f),t.elementType=A,t.lanes=p,t;case Ze:return t=_n(19,o,r,f),t.elementType=Ze,t.lanes=p,t;case ze:return Il(o,f,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:_=10;break e;case N:_=9;break e;case O:_=11;break e;case Pt:_=14;break e;case kt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=_n(_,o,r,f),r.elementType=t,r.type=u,r.lanes=p,r}function ki(t,r,o,u){return t=_n(7,t,u,r),t.lanes=o,t}function Il(t,r,o,u){return t=_n(22,t,u,r),t.elementType=ze,t.lanes=o,t.stateNode={isHidden:!1},t}function zc(t,r,o){return t=_n(6,t,null,r),t.lanes=o,t}function jc(t,r,o){return r=_n(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function y_(t,r,o,u,f){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wr(0),this.expirationTimes=wr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wr(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Bc(t,r,o,u,f,p,_,T,C){return t=new y_(t,r,o,T,C),r===1?(r=1,p===!0&&(r|=8)):r=0,p=_n(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},ec(p),t}function __(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ee,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function wp(t){if(!t)return Dr;t=t._reactInternals;e:{if(wn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(qt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(qt(o))return Kf(t,o,r)}return r}function Tp(t,r,o,u,f,p,_,T,C){return t=Bc(o,u,!0,t,f,p,_,T,C),t.context=wp(null),o=t.current,u=zt(),f=Ur(o),p=hr(u,f),p.callback=r??null,Or(o,p,f),t.current.lanes=f,Tr(t,f,u),Qt(t,u),t}function Sl(t,r,o,u){var f=r.current,p=zt(),_=Ur(f);return o=wp(o),r.context===null?r.context=o:r.pendingContext=o,r=hr(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Or(f,r,_),t!==null&&(xn(t,f,_,p),tl(t,f,_)),_}function Al(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ip(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function bc(t,r){Ip(t,r),(t=t.alternate)&&Ip(t,r)}var Sp=typeof reportError=="function"?reportError:function(t){console.error(t)};function $c(t){this._internalRoot=t}Rl.prototype.render=$c.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Sl(t,r,null,null)},Rl.prototype.unmount=$c.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ri(function(){Sl(null,t,null,null)}),r[or]=null}};function Rl(t){this._internalRoot=t}Rl.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ra();t={blockedOn:null,target:t,priority:r};for(var o=0;o<zn.length&&r!==0&&r<zn[o].priority;o++);zn.splice(o,0,t),o===0&&ka(t)}};function qc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ap(){}function v_(t,r,o,u,f){if(f){if(typeof u=="function"){var p=u;u=function(){var U=Al(_);p.call(U)}}var _=Tp(r,u,t,0,null,!1,!1,"",Ap);return t._reactRootContainer=_,t[or]=_.current,Ro(t.nodeType===8?t.parentNode:t),Ri(),_}for(;f=t.lastChild;)t.removeChild(f);if(typeof u=="function"){var T=u;u=function(){var U=Al(C);T.call(U)}}var C=Bc(t,0,!1,null,null,!1,!1,"",Ap);return t._reactRootContainer=C,t[or]=C.current,Ro(t.nodeType===8?t.parentNode:t),Ri(function(){Sl(r,C,o,u)}),C}function Pl(t,r,o,u,f){var p=o._reactRootContainer;if(p){var _=p;if(typeof f=="function"){var T=f;f=function(){var C=Al(_);T.call(C)}}Sl(r,_,t,f)}else _=v_(o,r,t,f,u);return Al(_)}Sa=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Er(r.pendingLanes);o!==0&&(Ir(r,o|1),Qt(r,$e()),!(xe&6)&&(Rs=$e()+500,Nr()))}break;case 13:Ri(function(){var u=cr(t,1);if(u!==null){var f=zt();xn(u,t,1,f)}}),bc(t,1)}},Yi=function(t){if(t.tag===13){var r=cr(t,134217728);if(r!==null){var o=zt();xn(r,t,134217728,o)}bc(t,134217728)}},Aa=function(t){if(t.tag===13){var r=Ur(t),o=cr(t,r);if(o!==null){var u=zt();xn(o,t,r,u)}bc(t,r)}},Ra=function(){return Re},Ca=function(t,r){var o=Re;try{return Re=t,r()}finally{Re=o}},bi=function(t,r,o){switch(r){case"input":if(Xs(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var f=Ha(u);if(!f)throw Error(n(90));Mi(u),Xs(u,f)}}}break;case"textarea":ji(t,o);break;case"select":r=o.value,r!=null&&Jn(t,!!o.multiple,r,!1)}},oi=Lc,oo=Ri;var E_={usingClientEntryPoint:!1,Events:[ko,ds,Ha,Fn,so,Lc]},$o={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w_={bundleType:$o.bundleType,version:$o.version,rendererPackageName:$o.rendererPackageName,rendererConfig:$o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uo(t),t===null?null:t.stateNode},findFiberByHostInstance:$o.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{hi=kl.inject(w_),Zt=kl}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E_,Gt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qc(r))throw Error(n(200));return __(t,r,null,o)},Gt.createRoot=function(t,r){if(!qc(t))throw Error(n(299));var o=!1,u="",f=Sp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=Bc(t,1,!1,null,null,o,!1,u,f),t[or]=r.current,Ro(t.nodeType===8?t.parentNode:t),new $c(r)},Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=uo(r),t=t===null?null:t.stateNode,t},Gt.flushSync=function(t){return Ri(t)},Gt.hydrate=function(t,r,o){if(!Cl(r))throw Error(n(200));return Pl(null,t,r,!0,o)},Gt.hydrateRoot=function(t,r,o){if(!qc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,f=!1,p="",_=Sp;if(o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=Tp(r,null,t,1,o??null,f,!1,p,_),t[or]=r.current,Ro(t),u)for(t=0;t<u.length;t++)o=u[t],f=o._getVersion,f=f(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,f]:r.mutableSourceEagerHydrationData.push(o,f);return new Rl(r)},Gt.render=function(t,r,o){if(!Cl(r))throw Error(n(200));return Pl(null,t,r,!1,o)},Gt.unmountComponentAtNode=function(t){if(!Cl(t))throw Error(n(40));return t._reactRootContainer?(Ri(function(){Pl(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1},Gt.unstable_batchedUpdates=Lc,Gt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Cl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Pl(t,r,o,!1,u)},Gt.version="18.3.1-next-f1338f8080-20240426",Gt}var xp;function V_(){if(xp)return Qc.exports;xp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Qc.exports=k_(),Qc.exports}var Op;function D_(){if(Op)return Vl;Op=1;var i=V_();return Vl.createRoot=i.createRoot,Vl.hydrateRoot=i.hydrateRoot,Vl}var N_=D_(),Xc={exports:{}},Yc,Lp;function x_(){if(Lp)return Yc;Lp=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Yc=i,Yc}var Jc,Mp;function O_(){if(Mp)return Jc;Mp=1;var i=x_();function e(){}function n(){}return n.resetWarningCache=e,Jc=function(){function s(h,m,y,v,w,S){if(S!==i){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}s.isRequired=s;function a(){return s}var c={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return c.PropTypes=c,c},Jc}var Fp;function L_(){return Fp||(Fp=1,Xc.exports=O_()()),Xc.exports}var bm=L_();const oh=I_(bm);function $m({value:i}){const e=i!=null?`tile tile-${i}`:"tile";return Fe.jsx("div",{className:e,children:i})}$m.propTypes={value:oh.number};function qm({score:i,bestScore:e}){return Fe.jsxs("section",{className:"score",children:[Fe.jsxs("div",{className:"score-current",children:[Fe.jsx("p",{children:"Score"}),Fe.jsx("strong",{children:i})]}),Fe.jsxs("div",{className:"score-best",children:[Fe.jsx("p",{children:"Best"}),Fe.jsx("strong",{children:e})]})]})}qm.propTypes={score:oh.number.isRequired,bestScore:oh.number.isRequired};function Ml(i,e){return Math.floor(Math.random()*(e-i+1))+i}function M_(i){const e=Math.sqrt(i.length),n=[];for(let c=0;c<e*e;c++)i[c]===null&&n.push(c);const s=n[Ml(0,n.length-1)],a=i.slice();return a[s]=Math.random()>.1?2:4,a}function Up(i){const e=Array(i*i).fill(null),n=Ml(0,i*i-1);let s=Ml(0,i*i-1);for(;n===s;)s=Ml(0,i*i-1);return e[n]=Math.random()>.1?2:4,e[s]=Math.random()>.1?2:4,e}function F_(i){const e=Math.sqrt(i.length);let n=0,s=[];for(let a=0;a<e;a++){const c=i.slice(a*e,a*e+e);let h=[];for(let m=0;m<e;m++)c[m]!==null&&h.push(c[m]);for(let m=0;m<h.length-1;m++)h[m]===h[m+1]&&(h[m]*=2,h[m+1]=null,n+=h[m]);h=h.filter(m=>m!==null),h.length<e&&(h=h.concat(Array(e-h.length).fill(null))),s=s.concat(h)}return[s,n]}function U_(i){const e=Math.sqrt(i.length);let n=0,s=[];for(let a=0;a<e;a++){const c=i.slice(a*e,a*e+e);let h=[];for(let m=0;m<e;m++)c[m]!==null&&h.push(c[m]);for(let m=h.length-1;m>0;m--)h[m]===h[m-1]&&(h[m]*=2,h[m-1]=null,n+=h[m]);h=h.filter(m=>m!==null),h.length<e&&(h=Array(e-h.length).fill(null).concat(h)),s=s.concat(h)}return[s,n]}function z_(i){const e=Math.sqrt(i.length);let n=0,s=Array(e*e).fill(null);for(let a=0;a<e;a++){let c=[];for(let h=0;h<e;h++)i[h*e+a]!==null&&c.push(i[h*e+a]);for(let h=0;h<c.length-1;h++)c[h]===c[h+1]&&(c[h]*=2,c[h+1]=null,n+=c[h]);c=c.filter(h=>h!==null),c.length<e&&(c=c.concat(Array(e-c.length).fill(null)));for(let h=0;h<e;h++)s[h*e+a]=c[h]}return[s,n]}function j_(i){const e=Math.sqrt(i.length);let n=0,s=Array(e*e).fill(null);for(let a=0;a<e;a++){let c=[];for(let h=0;h<e;h++)i[h*e+a]!==null&&c.push(i[h*e+a]);for(let h=c.length-1;h>0;h--)c[h]===c[h-1]&&(c[h]*=2,c[h-1]=null,n+=c[h]);c=c.filter(h=>h!==null),c.length<e&&(c=Array(e-c.length).fill(null).concat(c));for(let h=0;h<e;h++)s[h*e+a]=c[h]}return[s,n]}function B_(i){const e=Math.sqrt(i.length);for(let n=0;n<e;n++)for(let s=0;s<e;s++)if(i[n*e+s]===null||s>0&&i[n*e+s]===i[n*e+s-1]||s<e-1&&i[n*e+s]===i[n*e+s+1]||n>0&&i[n*e+s]===i[(n-1)*e+s]||n<e-1&&i[n*e+s]===i[(n+1)*e+s])return!0;return!1}function b_(i,e){return JSON.stringify(i)==JSON.stringify(e)}var zp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},$_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],h=i[n++],m=i[n++],y=((a&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],h=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|h&63)}}return e.join("")},Wm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],h=a+1<i.length,m=h?i[a+1]:0,y=a+2<i.length,v=y?i[a+2]:0,w=c>>2,S=(c&3)<<4|m>>4;let P=(m&15)<<2|v>>6,z=v&63;y||(z=64,h||(P=64)),s.push(n[w],n[S],n[P],n[z])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Hm(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):$_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const S=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||m==null||v==null||S==null)throw new q_;const P=c<<2|m>>4;if(s.push(P),v!==64){const z=m<<4&240|v>>2;if(s.push(z),S!==64){const G=v<<6&192|S;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class q_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const H_=function(i){const e=Hm(i);return Wm.encodeByteArray(e,!0)},ql=function(i){return H_(i).replace(/\./g,"")},W_=function(i){try{return Wm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=()=>Q_().__FIREBASE_DEFAULTS__,K_=()=>{if(typeof process>"u"||typeof zp>"u")return;const i=zp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},X_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&W_(i[1]);return e&&JSON.parse(e)},Vh=()=>{try{return G_()||K_()||X_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Y_=i=>{var e,n;return(n=(e=Vh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},J_=i=>{const e=Y_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Qm=()=>{var i;return(i=Vh())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[ql(JSON.stringify(n)),ql(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nv(){var i;const e=(i=Vh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rv(){return!nv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iv(){try{return typeof indexedDB=="object"}catch{return!1}}function sv(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="FirebaseError";class $s extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=ov,Object.setPrototypeOf(this,$s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gm.prototype.create)}}class Gm{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],h=c?av(c,s):"Error",m=`${this.serviceName}: ${h} (${a}).`;return new $s(a,m,s)}}function av(i,e){return i.replace(lv,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const lv=/\{\$([^}]+)}/g;function ah(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],h=e[a];if(jp(c)&&jp(h)){if(!ah(c,h))return!1}else if(c!==h)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function jp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(i){return i&&i._delegate?i._delegate:i}class ea{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Z_;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hv(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&h.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const h=this.instances.get(a);return h&&e(h,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cv(i){return i===Vi?void 0:i}function hv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(De||(De={}));const dv={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},pv=De.INFO,mv={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},gv=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=mv[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Km{constructor(e){this.name=e,this._logLevel=pv,this._logHandler=gv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const yv=(i,e)=>e.some(n=>i instanceof n);let Bp,bp;function _v(){return Bp||(Bp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vv(){return bp||(bp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xm=new WeakMap,lh=new WeakMap,Ym=new WeakMap,Zc=new WeakMap,Dh=new WeakMap;function Ev(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{n($r(i.result)),a()},h=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Xm.set(n,i)}).catch(()=>{}),Dh.set(e,i),e}function wv(i){if(lh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{n(),a()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});lh.set(i,e)}let uh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return lh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Ym.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Tv(i){uh=i(uh)}function Iv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(eh(this),e,...n);return Ym.set(s,e.sort?e.sort():[e]),$r(s)}:vv().includes(i)?function(...e){return i.apply(eh(this),e),$r(Xm.get(this))}:function(...e){return $r(i.apply(eh(this),e))}}function Sv(i){return typeof i=="function"?Iv(i):(i instanceof IDBTransaction&&wv(i),yv(i,_v())?new Proxy(i,uh):i)}function $r(i){if(i instanceof IDBRequest)return Ev(i);if(Zc.has(i))return Zc.get(i);const e=Sv(i);return e!==i&&(Zc.set(i,e),Dh.set(e,i)),e}const eh=i=>Dh.get(i);function Av(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const h=indexedDB.open(i,e),m=$r(h);return s&&h.addEventListener("upgradeneeded",y=>{s($r(h.result),y.oldVersion,y.newVersion,$r(h.transaction),y)}),n&&h.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const Rv=["get","getKey","getAll","getAllKeys","count"],Cv=["put","add","delete","clear"],th=new Map;function $p(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(th.get(e))return th.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=Cv.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Rv.includes(n)))return;const c=async function(h,...m){const y=this.transaction(h,a?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),a&&y.done]))[0]};return th.set(e,c),c}Tv(i=>({...i,get:(e,n,s)=>$p(e,n)||i.get(e,n,s),has:(e,n)=>!!$p(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function kv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ch="@firebase/app",qp="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new Km("@firebase/app"),Vv="@firebase/app-compat",Dv="@firebase/analytics-compat",Nv="@firebase/analytics",xv="@firebase/app-check-compat",Ov="@firebase/app-check",Lv="@firebase/auth",Mv="@firebase/auth-compat",Fv="@firebase/database",Uv="@firebase/data-connect",zv="@firebase/database-compat",jv="@firebase/functions",Bv="@firebase/functions-compat",bv="@firebase/installations",$v="@firebase/installations-compat",qv="@firebase/messaging",Hv="@firebase/messaging-compat",Wv="@firebase/performance",Qv="@firebase/performance-compat",Gv="@firebase/remote-config",Kv="@firebase/remote-config-compat",Xv="@firebase/storage",Yv="@firebase/storage-compat",Jv="@firebase/firestore",Zv="@firebase/vertexai",eE="@firebase/firestore-compat",tE="firebase",nE="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="[DEFAULT]",rE={[ch]:"fire-core",[Vv]:"fire-core-compat",[Nv]:"fire-analytics",[Dv]:"fire-analytics-compat",[Ov]:"fire-app-check",[xv]:"fire-app-check-compat",[Lv]:"fire-auth",[Mv]:"fire-auth-compat",[Fv]:"fire-rtdb",[Uv]:"fire-data-connect",[zv]:"fire-rtdb-compat",[jv]:"fire-fn",[Bv]:"fire-fn-compat",[bv]:"fire-iid",[$v]:"fire-iid-compat",[qv]:"fire-fcm",[Hv]:"fire-fcm-compat",[Wv]:"fire-perf",[Qv]:"fire-perf-compat",[Gv]:"fire-rc",[Kv]:"fire-rc-compat",[Xv]:"fire-gcs",[Yv]:"fire-gcs-compat",[Jv]:"fire-fst",[eE]:"fire-fst-compat",[Zv]:"fire-vertex","fire-js":"fire-js",[tE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new Map,iE=new Map,fh=new Map;function Hp(i,e){try{i.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Wl(i){const e=i.name;if(fh.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;fh.set(e,i);for(const n of Hl.values())Hp(n,i);for(const n of iE.values())Hp(n,i);return!0}function sE(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new Gm("app","Firebase",oE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=nE;function Jm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:hh,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw qr.create("bad-app-name",{appName:String(a)});if(n||(n=Qm()),!n)throw qr.create("no-options");const c=Hl.get(a);if(c){if(ah(n,c.options)&&ah(s,c.config))return c;throw qr.create("duplicate-app",{appName:a})}const h=new fv(a);for(const y of fh.values())h.addComponent(y);const m=new aE(n,s,h);return Hl.set(a,m),m}function uE(i=hh){const e=Hl.get(i);if(!e&&i===hh&&Qm())return Jm();if(!e)throw qr.create("no-app",{appName:i});return e}function Os(i,e,n){var s;let a=(s=rE[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(m.join(" "));return}Wl(new ea(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="firebase-heartbeat-database",hE=1,ta="firebase-heartbeat-store";let nh=null;function Zm(){return nh||(nh=Av(cE,hE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ta)}catch(n){console.warn(n)}}}}).catch(i=>{throw qr.create("idb-open",{originalErrorMessage:i.message})})),nh}async function fE(i){try{const n=(await Zm()).transaction(ta),s=await n.objectStore(ta).get(eg(i));return await n.done,s}catch(e){if(e instanceof $s)pr.warn(e.message);else{const n=qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function Wp(i,e){try{const s=(await Zm()).transaction(ta,"readwrite");await s.objectStore(ta).put(e,eg(i)),await s.done}catch(n){if(n instanceof $s)pr.warn(n.message);else{const s=qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(s.message)}}}function eg(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=1024,pE=30*24*60*60*1e3;class mE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yE(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Qp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=pE}),this._storage.overwrite(this._heartbeatsCache))}catch(s){pr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qp(),{heartbeatsToSend:s,unsentEntries:a}=gE(this._heartbeatsCache.heartbeats),c=ql(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return pr.warn(n),""}}}function Qp(){return new Date().toISOString().substring(0,10)}function gE(i,e=dE){const n=[];let s=i.slice();for(const a of i){const c=n.find(h=>h.agent===a.agent);if(c){if(c.dates.push(a.date),Gp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Gp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class yE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iv()?sv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Wp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Wp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Gp(i){return ql(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(i){Wl(new ea("platform-logger",e=>new Pv(e),"PRIVATE")),Wl(new ea("heartbeat",e=>new mE(e),"PRIVATE")),Os(ch,qp,i),Os(ch,qp,"esm2017"),Os("fire-js","")}_E("");var vE="firebase",EE="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os(vE,EE,"app");var Kp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,tg;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,I){function R(){}R.prototype=I.prototype,D.D=I.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(k,N,O){for(var A=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)A[Ze-2]=arguments[Ze];return I.prototype[N].apply(k,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,I,R){R||(R=0);var k=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)k[N]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(N=0;16>N;++N)k[N]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=D.g[0],R=D.g[1],N=D.g[2];var O=D.g[3],A=I+(O^R&(N^O))+k[0]+3614090360&4294967295;I=R+(A<<7&4294967295|A>>>25),A=O+(N^I&(R^N))+k[1]+3905402710&4294967295,O=I+(A<<12&4294967295|A>>>20),A=N+(R^O&(I^R))+k[2]+606105819&4294967295,N=O+(A<<17&4294967295|A>>>15),A=R+(I^N&(O^I))+k[3]+3250441966&4294967295,R=N+(A<<22&4294967295|A>>>10),A=I+(O^R&(N^O))+k[4]+4118548399&4294967295,I=R+(A<<7&4294967295|A>>>25),A=O+(N^I&(R^N))+k[5]+1200080426&4294967295,O=I+(A<<12&4294967295|A>>>20),A=N+(R^O&(I^R))+k[6]+2821735955&4294967295,N=O+(A<<17&4294967295|A>>>15),A=R+(I^N&(O^I))+k[7]+4249261313&4294967295,R=N+(A<<22&4294967295|A>>>10),A=I+(O^R&(N^O))+k[8]+1770035416&4294967295,I=R+(A<<7&4294967295|A>>>25),A=O+(N^I&(R^N))+k[9]+2336552879&4294967295,O=I+(A<<12&4294967295|A>>>20),A=N+(R^O&(I^R))+k[10]+4294925233&4294967295,N=O+(A<<17&4294967295|A>>>15),A=R+(I^N&(O^I))+k[11]+2304563134&4294967295,R=N+(A<<22&4294967295|A>>>10),A=I+(O^R&(N^O))+k[12]+1804603682&4294967295,I=R+(A<<7&4294967295|A>>>25),A=O+(N^I&(R^N))+k[13]+4254626195&4294967295,O=I+(A<<12&4294967295|A>>>20),A=N+(R^O&(I^R))+k[14]+2792965006&4294967295,N=O+(A<<17&4294967295|A>>>15),A=R+(I^N&(O^I))+k[15]+1236535329&4294967295,R=N+(A<<22&4294967295|A>>>10),A=I+(N^O&(R^N))+k[1]+4129170786&4294967295,I=R+(A<<5&4294967295|A>>>27),A=O+(R^N&(I^R))+k[6]+3225465664&4294967295,O=I+(A<<9&4294967295|A>>>23),A=N+(I^R&(O^I))+k[11]+643717713&4294967295,N=O+(A<<14&4294967295|A>>>18),A=R+(O^I&(N^O))+k[0]+3921069994&4294967295,R=N+(A<<20&4294967295|A>>>12),A=I+(N^O&(R^N))+k[5]+3593408605&4294967295,I=R+(A<<5&4294967295|A>>>27),A=O+(R^N&(I^R))+k[10]+38016083&4294967295,O=I+(A<<9&4294967295|A>>>23),A=N+(I^R&(O^I))+k[15]+3634488961&4294967295,N=O+(A<<14&4294967295|A>>>18),A=R+(O^I&(N^O))+k[4]+3889429448&4294967295,R=N+(A<<20&4294967295|A>>>12),A=I+(N^O&(R^N))+k[9]+568446438&4294967295,I=R+(A<<5&4294967295|A>>>27),A=O+(R^N&(I^R))+k[14]+3275163606&4294967295,O=I+(A<<9&4294967295|A>>>23),A=N+(I^R&(O^I))+k[3]+4107603335&4294967295,N=O+(A<<14&4294967295|A>>>18),A=R+(O^I&(N^O))+k[8]+1163531501&4294967295,R=N+(A<<20&4294967295|A>>>12),A=I+(N^O&(R^N))+k[13]+2850285829&4294967295,I=R+(A<<5&4294967295|A>>>27),A=O+(R^N&(I^R))+k[2]+4243563512&4294967295,O=I+(A<<9&4294967295|A>>>23),A=N+(I^R&(O^I))+k[7]+1735328473&4294967295,N=O+(A<<14&4294967295|A>>>18),A=R+(O^I&(N^O))+k[12]+2368359562&4294967295,R=N+(A<<20&4294967295|A>>>12),A=I+(R^N^O)+k[5]+4294588738&4294967295,I=R+(A<<4&4294967295|A>>>28),A=O+(I^R^N)+k[8]+2272392833&4294967295,O=I+(A<<11&4294967295|A>>>21),A=N+(O^I^R)+k[11]+1839030562&4294967295,N=O+(A<<16&4294967295|A>>>16),A=R+(N^O^I)+k[14]+4259657740&4294967295,R=N+(A<<23&4294967295|A>>>9),A=I+(R^N^O)+k[1]+2763975236&4294967295,I=R+(A<<4&4294967295|A>>>28),A=O+(I^R^N)+k[4]+1272893353&4294967295,O=I+(A<<11&4294967295|A>>>21),A=N+(O^I^R)+k[7]+4139469664&4294967295,N=O+(A<<16&4294967295|A>>>16),A=R+(N^O^I)+k[10]+3200236656&4294967295,R=N+(A<<23&4294967295|A>>>9),A=I+(R^N^O)+k[13]+681279174&4294967295,I=R+(A<<4&4294967295|A>>>28),A=O+(I^R^N)+k[0]+3936430074&4294967295,O=I+(A<<11&4294967295|A>>>21),A=N+(O^I^R)+k[3]+3572445317&4294967295,N=O+(A<<16&4294967295|A>>>16),A=R+(N^O^I)+k[6]+76029189&4294967295,R=N+(A<<23&4294967295|A>>>9),A=I+(R^N^O)+k[9]+3654602809&4294967295,I=R+(A<<4&4294967295|A>>>28),A=O+(I^R^N)+k[12]+3873151461&4294967295,O=I+(A<<11&4294967295|A>>>21),A=N+(O^I^R)+k[15]+530742520&4294967295,N=O+(A<<16&4294967295|A>>>16),A=R+(N^O^I)+k[2]+3299628645&4294967295,R=N+(A<<23&4294967295|A>>>9),A=I+(N^(R|~O))+k[0]+4096336452&4294967295,I=R+(A<<6&4294967295|A>>>26),A=O+(R^(I|~N))+k[7]+1126891415&4294967295,O=I+(A<<10&4294967295|A>>>22),A=N+(I^(O|~R))+k[14]+2878612391&4294967295,N=O+(A<<15&4294967295|A>>>17),A=R+(O^(N|~I))+k[5]+4237533241&4294967295,R=N+(A<<21&4294967295|A>>>11),A=I+(N^(R|~O))+k[12]+1700485571&4294967295,I=R+(A<<6&4294967295|A>>>26),A=O+(R^(I|~N))+k[3]+2399980690&4294967295,O=I+(A<<10&4294967295|A>>>22),A=N+(I^(O|~R))+k[10]+4293915773&4294967295,N=O+(A<<15&4294967295|A>>>17),A=R+(O^(N|~I))+k[1]+2240044497&4294967295,R=N+(A<<21&4294967295|A>>>11),A=I+(N^(R|~O))+k[8]+1873313359&4294967295,I=R+(A<<6&4294967295|A>>>26),A=O+(R^(I|~N))+k[15]+4264355552&4294967295,O=I+(A<<10&4294967295|A>>>22),A=N+(I^(O|~R))+k[6]+2734768916&4294967295,N=O+(A<<15&4294967295|A>>>17),A=R+(O^(N|~I))+k[13]+1309151649&4294967295,R=N+(A<<21&4294967295|A>>>11),A=I+(N^(R|~O))+k[4]+4149444226&4294967295,I=R+(A<<6&4294967295|A>>>26),A=O+(R^(I|~N))+k[11]+3174756917&4294967295,O=I+(A<<10&4294967295|A>>>22),A=N+(I^(O|~R))+k[2]+718787259&4294967295,N=O+(A<<15&4294967295|A>>>17),A=R+(O^(N|~I))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+O&4294967295}s.prototype.u=function(D,I){I===void 0&&(I=D.length);for(var R=I-this.blockSize,k=this.B,N=this.h,O=0;O<I;){if(N==0)for(;O<=R;)a(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<I;)if(k[N++]=D.charCodeAt(O++),N==this.blockSize){a(this,k),N=0;break}}else for(;O<I;)if(k[N++]=D[O++],N==this.blockSize){a(this,k),N=0;break}}this.h=N,this.o+=I},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;var R=8*this.o;for(I=D.length-8;I<D.length;++I)D[I]=R&255,R/=256;for(this.u(D),D=Array(16),I=R=0;4>I;++I)for(var k=0;32>k;k+=8)D[R++]=this.g[I]>>>k&255;return D};function c(D,I){var R=m;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=I(D)}function h(D,I){this.h=I;for(var R=[],k=!0,N=D.length-1;0<=N;N--){var O=D[N]|0;k&&O==I||(R[N]=O,k=!1)}this.g=R}var m={};function y(D){return-128<=D&&128>D?c(D,function(I){return new h([I|0],0>I?-1:0)}):new h([D|0],0>D?-1:0)}function v(D){if(isNaN(D)||!isFinite(D))return S;if(0>D)return b(v(-D));for(var I=[],R=1,k=0;D>=R;k++)I[k]=D/R|0,R*=4294967296;return new h(I,0)}function w(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return b(w(D.substring(1),I));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(I,8)),k=S,N=0;N<D.length;N+=8){var O=Math.min(8,D.length-N),A=parseInt(D.substring(N,N+O),I);8>O?(O=v(Math.pow(I,O)),k=k.j(O).add(v(A))):(k=k.j(R),k=k.add(v(A)))}return k}var S=y(0),P=y(1),z=y(16777216);i=h.prototype,i.m=function(){if(Q(this))return-b(this).m();for(var D=0,I=1,R=0;R<this.g.length;R++){var k=this.i(R);D+=(0<=k?k:4294967296+k)*I,I*=4294967296}return D},i.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(G(this))return"0";if(Q(this))return"-"+b(this).toString(D);for(var I=v(Math.pow(D,6)),R=this,k="";;){var N=oe(R,I).g;R=ge(R,N.j(I));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=N,G(R))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},i.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function G(D){if(D.h!=0)return!1;for(var I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function Q(D){return D.h==-1}i.l=function(D){return D=ge(this,D),Q(D)?-1:G(D)?0:1};function b(D){for(var I=D.g.length,R=[],k=0;k<I;k++)R[k]=~D.g[k];return new h(R,~D.h).add(P)}i.abs=function(){return Q(this)?b(this):this},i.add=function(D){for(var I=Math.max(this.g.length,D.g.length),R=[],k=0,N=0;N<=I;N++){var O=k+(this.i(N)&65535)+(D.i(N)&65535),A=(O>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);k=A>>>16,O&=65535,A&=65535,R[N]=A<<16|O}return new h(R,R[R.length-1]&-2147483648?-1:0)};function ge(D,I){return D.add(b(I))}i.j=function(D){if(G(this)||G(D))return S;if(Q(this))return Q(D)?b(this).j(b(D)):b(b(this).j(D));if(Q(D))return b(this.j(b(D)));if(0>this.l(z)&&0>D.l(z))return v(this.m()*D.m());for(var I=this.g.length+D.g.length,R=[],k=0;k<2*I;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<D.g.length;N++){var O=this.i(k)>>>16,A=this.i(k)&65535,Ze=D.i(N)>>>16,Pt=D.i(N)&65535;R[2*k+2*N]+=A*Pt,_e(R,2*k+2*N),R[2*k+2*N+1]+=O*Pt,_e(R,2*k+2*N+1),R[2*k+2*N+1]+=A*Ze,_e(R,2*k+2*N+1),R[2*k+2*N+2]+=O*Ze,_e(R,2*k+2*N+2)}for(k=0;k<I;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=I;k<2*I;k++)R[k]=0;return new h(R,0)};function _e(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function Z(D,I){this.g=D,this.h=I}function oe(D,I){if(G(I))throw Error("division by zero");if(G(D))return new Z(S,S);if(Q(D))return I=oe(b(D),I),new Z(b(I.g),b(I.h));if(Q(I))return I=oe(D,b(I)),new Z(b(I.g),I.h);if(30<D.g.length){if(Q(D)||Q(I))throw Error("slowDivide_ only works with positive integers.");for(var R=P,k=I;0>=k.l(D);)R=Se(R),k=Se(k);var N=Ee(R,1),O=Ee(k,1);for(k=Ee(k,2),R=Ee(R,2);!G(k);){var A=O.add(k);0>=A.l(D)&&(N=N.add(R),O=A),k=Ee(k,1),R=Ee(R,1)}return I=ge(D,N.j(I)),new Z(N,I)}for(N=S;0<=D.l(I);){for(R=Math.max(1,Math.floor(D.m()/I.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=v(R),A=O.j(I);Q(A)||0<A.l(D);)R-=k,O=v(R),A=O.j(I);G(O)&&(O=P),N=N.add(O),D=ge(D,A)}return new Z(N,D)}i.A=function(D){return oe(this,D).h},i.and=function(D){for(var I=Math.max(this.g.length,D.g.length),R=[],k=0;k<I;k++)R[k]=this.i(k)&D.i(k);return new h(R,this.h&D.h)},i.or=function(D){for(var I=Math.max(this.g.length,D.g.length),R=[],k=0;k<I;k++)R[k]=this.i(k)|D.i(k);return new h(R,this.h|D.h)},i.xor=function(D){for(var I=Math.max(this.g.length,D.g.length),R=[],k=0;k<I;k++)R[k]=this.i(k)^D.i(k);return new h(R,this.h^D.h)};function Se(D){for(var I=D.g.length+1,R=[],k=0;k<I;k++)R[k]=D.i(k)<<1|D.i(k-1)>>>31;return new h(R,D.h)}function Ee(D,I){var R=I>>5;I%=32;for(var k=D.g.length-R,N=[],O=0;O<k;O++)N[O]=0<I?D.i(O+R)>>>I|D.i(O+R+1)<<32-I:D.i(O+R);return new h(N,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,tg=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,Hr=h}).apply(typeof Kp<"u"?Kp:typeof self<"u"?self:typeof window<"u"?window:{});var Dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ng,Wo,rg,Fl,dh,ig,sg,og;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dl=="object"&&Dl];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var g=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var L=l[E];if(!(L in g))break e;g=g[L]}l=l[l.length-1],E=g[l],d=d(E),d!=E&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var g=0,E=!1,L={next:function(){if(!E&&g<l.length){var j=g++;return{value:d(j,l[j]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function y(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function v(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function w(l,d,g){return l.call.apply(l.bind,arguments)}function S(l,d,g){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function P(l,d,g){return P=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:S,P.apply(null,arguments)}function z(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function G(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(E,L,j){for(var Y=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)Y[Ue-2]=arguments[Ue];return d.prototype[L].apply(E,Y)}}function Q(l){const d=l.length;if(0<d){const g=Array(d);for(let E=0;E<d;E++)g[E]=l[E];return g}return[]}function b(l,d){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(y(E)){const L=l.length||0,j=E.length||0;l.length=L+j;for(let Y=0;Y<j;Y++)l[L+Y]=E[Y]}else l.push(E)}}class ge{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _e(l){return/^[\s\xa0]*$/.test(l)}function Z(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function oe(l){return oe[" "](l),l}oe[" "]=function(){};var Se=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function Ee(l,d,g){for(const E in l)d.call(g,l[E],E,l)}function D(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function I(l){const d={};for(const g in l)d[g]=l[g];return d}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,d){let g,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(g in E)l[g]=E[g];for(let j=0;j<R.length;j++)g=R[j],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function N(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function O(l){m.setTimeout(()=>{throw l},0)}function A(){var l=he;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Ze{constructor(){this.h=this.g=null}add(d,g){const E=Pt.get();E.set(d,g),this.h?this.h.next=E:this.g=E,this.h=E}}var Pt=new ge(()=>new kt,l=>l.reset());class kt{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,J=!1,he=new Ze,ne=()=>{const l=m.Promise.resolve(void 0);ze=()=>{l.then(x)}};var x=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(g){O(g)}var d=Pt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}J=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return l}();function Te(l,d){if(ue.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(Se){e:{try{oe(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Pe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Te.aa.h.call(this)}}G(Te,ue);var Pe={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Me=0;function be(l,d,g,E,L){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!E,this.ha=L,this.key=++Me,this.da=this.fa=!1}function pt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Xn(l){this.src=l,this.g={},this.h=0}Xn.prototype.add=function(l,d,g,E,L){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var Y=yr(l,d,E,L);return-1<Y?(d=l[Y],g||(d.fa=!1)):(d=new be(d,this.src,j,!!E,L),d.fa=g,l.push(d)),d};function Mi(l,d){var g=d.type;if(g in l.g){var E=l.g[g],L=Array.prototype.indexOf.call(E,d,void 0),j;(j=0<=L)&&Array.prototype.splice.call(E,L,1),j&&(pt(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function yr(l,d,g,E){for(var L=0;L<l.length;++L){var j=l[L];if(!j.da&&j.listener==d&&j.capture==!!g&&j.ha==E)return L}return-1}var ni="closure_lm_"+(1e6*Math.random()|0),Fi={};function Ks(l,d,g,E,L){if(Array.isArray(d)){for(var j=0;j<d.length;j++)Ks(l,d[j],g,E,L);return null}return g=Js(g),l&&l[Le]?l.K(d,g,v(E)?!!E.capture:!1,L):Xs(l,d,g,!1,E,L)}function Xs(l,d,g,E,L,j){if(!d)throw Error("Invalid event type");var Y=v(L)?!!L.capture:!!L,Ue=zi(l);if(Ue||(l[ni]=Ue=new Xn(l)),g=Ue.add(d,g,E,Y,j),g.proxy)return g;if(E=ma(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)we||(L=Y),L===void 0&&(L=!1),l.addEventListener(d.toString(),E,L);else if(l.attachEvent)l.attachEvent(Jn(d.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ma(){function l(g){return d.call(l.src,l.listener,g)}const d=Ys;return l}function Ui(l,d,g,E,L){if(Array.isArray(d))for(var j=0;j<d.length;j++)Ui(l,d[j],g,E,L);else E=v(E)?!!E.capture:!!E,g=Js(g),l&&l[Le]?(l=l.i,d=String(d).toString(),d in l.g&&(j=l.g[d],g=yr(j,g,E,L),-1<g&&(pt(j[g]),Array.prototype.splice.call(j,g,1),j.length==0&&(delete l.g[d],l.h--)))):l&&(l=zi(l))&&(d=l.g[d.toString()],l=-1,d&&(l=yr(d,g,E,L)),(g=-1<l?d[l]:null)&&Yn(g))}function Yn(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Le])Mi(d.i,l);else{var g=l.type,E=l.proxy;d.removeEventListener?d.removeEventListener(g,E,l.capture):d.detachEvent?d.detachEvent(Jn(g),E):d.addListener&&d.removeListener&&d.removeListener(E),(g=zi(d))?(Mi(g,l),g.h==0&&(g.src=null,d[ni]=null)):pt(l)}}}function Jn(l){return l in Fi?Fi[l]:Fi[l]="on"+l}function Ys(l,d){if(l.da)l=!0;else{d=new Te(d,this);var g=l.listener,E=l.ha||l.src;l.fa&&Yn(l),l=g.call(E,d)}return l}function zi(l){return l=l[ni],l instanceof Xn?l:null}var ji="__closure_events_fn_"+(1e9*Math.random()>>>0);function Js(l){return typeof l=="function"?l:(l[ji]||(l[ji]=function(d){return l.handleEvent(d)}),l[ji])}function at(){q.call(this),this.i=new Xn(this),this.M=this,this.F=null}G(at,q),at.prototype[Le]=!0,at.prototype.removeEventListener=function(l,d,g,E){Ui(this,l,d,g,E)};function lt(l,d){var g,E=l.F;if(E)for(g=[];E;E=E.F)g.push(E);if(l=l.M,E=d.type||d,typeof d=="string")d=new ue(d,l);else if(d instanceof ue)d.target=d.target||l;else{var L=d;d=new ue(E,l),k(d,L)}if(L=!0,g)for(var j=g.length-1;0<=j;j--){var Y=d.g=g[j];L=Zn(Y,E,!0,d)&&L}if(Y=d.g=l,L=Zn(Y,E,!0,d)&&L,L=Zn(Y,E,!1,d)&&L,g)for(j=0;j<g.length;j++)Y=d.g=g[j],L=Zn(Y,E,!1,d)&&L}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],E=0;E<g.length;E++)pt(g[E]);delete l.g[d],l.h--}}this.F=null},at.prototype.K=function(l,d,g,E){return this.i.add(String(l),d,!1,g,E)},at.prototype.L=function(l,d,g,E){return this.i.add(String(l),d,!0,g,E)};function Zn(l,d,g,E){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,j=0;j<d.length;++j){var Y=d[j];if(Y&&!Y.da&&Y.capture==g){var Ue=Y.listener,ut=Y.ha||Y.src;Y.fa&&Mi(l.i,Y),L=Ue.call(ut,E)!==!1&&L}}return L&&!E.defaultPrevented}function Zs(l,d,g){if(typeof l=="function")g&&(l=P(l,g));else if(l&&typeof l.handleEvent=="function")l=P(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function _r(l){l.g=Zs(()=>{l.g=null,l.i&&(l.i=!1,_r(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ri extends q{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ii(l){q.call(this),this.h=l,this.g={}}G(ii,q);var eo=[];function to(l){Ee(l.g,function(d,g){this.g.hasOwnProperty(g)&&Yn(d)},l),l.g={}}ii.prototype.N=function(){ii.aa.N.call(this),to(this)},ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var no=m.JSON.stringify,ro=m.JSON.parse,io=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function si(){}si.prototype.h=null;function Bi(l){return l.h||(l.h=l.i())}function bi(){}var un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mn(){ue.call(this,"d")}G(Mn,ue);function $i(){ue.call(this,"c")}G($i,ue);var Fn={},so=null;function oi(){return so=so||new at}Fn.La="serverreachability";function oo(l){ue.call(this,Fn.La,l)}G(oo,ue);function er(l){const d=oi();lt(d,new oo(d))}Fn.STAT_EVENT="statevent";function ao(l,d){ue.call(this,Fn.STAT_EVENT,l),this.stat=d}G(ao,ue);function et(l){const d=oi();lt(d,new ao(d,l))}Fn.Ma="timingevent";function qi(l,d){ue.call(this,Fn.Ma,l),this.size=d}G(qi,ue);function vn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function ai(){this.g=!0}ai.prototype.xa=function(){this.g=!1};function li(l,d,g,E,L,j){l.info(function(){if(l.g)if(j)for(var Y="",Ue=j.split("&"),ut=0;ut<Ue.length;ut++){var ke=Ue[ut].split("=");if(1<ke.length){var mt=ke[0];ke=ke[1];var rt=mt.split("_");Y=2<=rt.length&&rt[1]=="type"?Y+(mt+"="+ke+"&"):Y+(mt+"=redacted&")}}else Y=null;else Y=j;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+d+`
`+g+`
`+Y})}function Hi(l,d,g,E,L,j,Y){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+d+`
`+g+`
`+j+" "+Y})}function En(l,d,g,E){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+vu(l,g)+(E?" "+E:"")})}function lo(l,d){l.info(function(){return"TIMEOUT: "+d})}ai.prototype.info=function(){};function vu(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var E=g[l];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var Y=1;Y<L.length;Y++)L[Y]=""}}}}return no(g)}catch{return d}}var Wi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ga={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wn;function ui(){}G(ui,si),ui.prototype.g=function(){return new XMLHttpRequest},ui.prototype.i=function(){return{}},wn=new ui;function Tn(l,d,g,E){this.j=l,this.i=d,this.l=g,this.R=E||1,this.U=new ii(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ya}function ya(){this.i=null,this.g="",this.h=!1}var uo={},Qi={};function Gi(l,d,g){l.L=1,l.v=Ir(en(d)),l.m=g,l.P=!0,co(l,null)}function co(l,d){l.F=Date.now(),$e(l),l.A=en(l.v);var g=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Ar(g.i,"t",E),l.C=0,g=l.j.J,l.h=new ya,l.g=La(l.j,g?d:null,!l.m),0<l.O&&(l.M=new ri(P(l.Y,l,l.g),l.O)),d=l.U,g=l.g,E=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(eo[0]=L.toString()),L=eo);for(var j=0;j<L.length;j++){var Y=Ks(g,L[j],E||d.handleEvent,!1,d.h||d);if(!Y)break;d.g[Y.key]=Y}d=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),er(),li(l.i,l.u,l.A,l.l,l.R,l.m)}Tn.prototype.ca=function(l){l=l.target;const d=this.M;d&&bt(l)==3?d.j():this.Y(l)},Tn.prototype.Y=function(l){try{if(l==this.g)e:{const rt=bt(this.g);var d=this.g.Ba();const fn=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||yo(this.g)))){this.J||rt!=4||d==7||(d==8||0>=fn?er(3):er(2)),ci(this);var g=this.g.Z();this.X=g;t:if(_a(this)){var E=yo(this.g);l="";var L=E.length,j=bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),vr(this);var Y="";break t}this.h.i=new m.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(E[d],{stream:!(j&&d==L-1)});E.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,Hi(this.i,this.u,this.A,this.l,this.R,rt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,ut=this.g;if((Ue=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_e(Ue)){var ke=Ue;break t}}ke=null}if(g=ke)En(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ho(this,g);else{this.o=!1,this.s=3,et(12),cn(this),vr(this);break e}}if(this.P){g=!0;let nn;for(;!this.J&&this.C<Y.length;)if(nn=Eu(this,Y),nn==Qi){rt==4&&(this.s=4,et(14),g=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==uo){this.s=4,et(15),En(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else En(this.i,this.l,nn,null),ho(this,nn);if(_a(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||Y.length!=0||this.h.h||(this.s=1,et(16),g=!1),this.o=this.o&&g,!g)En(this.i,this.l,Y,"[Invalid Chunked Response]"),cn(this),vr(this);else if(0<Y.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),vo(mt),mt.M=!0,et(11))}}else En(this.i,this.l,Y,null),ho(this,Y);rt==4&&cn(this),this.o&&!this.J&&(rt==4?ss(this.j,this):(this.o=!1,$e(this)))}else es(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),cn(this),vr(this)}}}catch{}finally{}};function _a(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Eu(l,d){var g=l.C,E=d.indexOf(`
`,g);return E==-1?Qi:(g=Number(d.substring(g,E)),isNaN(g)?uo:(E+=1,E+g>d.length?Qi:(d=d.slice(E,E+g),l.C=E+g,d)))}Tn.prototype.cancel=function(){this.J=!0,cn(this)};function $e(l){l.S=Date.now()+l.I,va(l,l.I)}function va(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=vn(P(l.ba,l),d)}function ci(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Tn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(lo(this.i,this.A),this.L!=2&&(er(),et(17)),cn(this),this.s=2,vr(this)):va(this,this.S-l)};function vr(l){l.j.G==0||l.J||ss(l.j,l)}function cn(l){ci(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,to(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function ho(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||Mt(g.h,l))){if(!l.K&&Mt(g.h,l)&&g.G==3){try{var E=g.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)is(g),Cn(g);else break e;rs(g),et(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=vn(P(g.Za,g),6e3));if(1>=wa(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else sr(g,11)}else if((l.K||g.g==l)&&is(g),!_e(d))for(L=g.Da.g.parse(d),d=0;d<L.length;d++){let ke=L[d];if(g.T=ke[0],ke=ke[1],g.G==2)if(ke[0]=="c"){g.K=ke[1],g.ia=ke[2];const mt=ke[3];mt!=null&&(g.la=mt,g.j.info("VER="+g.la));const rt=ke[4];rt!=null&&(g.Aa=rt,g.j.info("SVER="+g.Aa));const fn=ke[5];fn!=null&&typeof fn=="number"&&0<fn&&(E=1.5*fn,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const nn=l.g;if(nn){const yi=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yi){var j=E.h;j.g||yi.indexOf("spdy")==-1&&yi.indexOf("quic")==-1&&yi.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(fo(j,j.h),j.h=null))}if(E.D){const as=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;as&&(E.ya=as,je(E.I,E.D,as))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var Y=l;if(E.qa=Oa(E,E.J?E.ia:null,E.W),Y.K){Ta(E.h,Y);var Ue=Y,ut=E.L;ut&&(Ue.I=ut),Ue.B&&(ci(Ue),$e(Ue)),E.g=Y}else gi(E);0<g.i.length&&Bn(g)}else ke[0]!="stop"&&ke[0]!="close"||sr(g,7);else g.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?sr(g,7):Tt(g):ke[0]!="noop"&&g.l&&g.l.ta(ke),g.v=0)}}er(4)}catch{}}var Ea=class{constructor(l,d){this.g=l,this.map=d}};function hi(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function wa(l){return l.h?1:l.g?l.g.size:0}function Mt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function fo(l,d){l.g?l.g.add(d):l.h=d}function Ta(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}hi.prototype.cancel=function(){if(this.i=Ia(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ia(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return Q(l.i)}function Ki(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var d=[],g=l.length,E=0;E<g;E++)d.push(l[E]);return d}d=[],g=0;for(E in l)d[g++]=l[E];return d}function Xi(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const E in l)d[g++]=E;return d}}}function Er(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=Xi(l),E=Ki(l),L=E.length,j=0;j<L;j++)d.call(void 0,E[j],g&&g[j],l)}var fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wu(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var E=l[g].indexOf("="),L=null;if(0<=E){var j=l[g].substring(0,E);L=l[g].substring(E+1)}else j=l[g];d(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function tr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof tr){this.h=l.h,di(this,l.j),this.o=l.o,this.g=l.g,wr(this,l.s),this.l=l.l;var d=l.i,g=new Un;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),Tr(this,g),this.m=l.m}else l&&(d=String(l).match(fi))?(this.h=!1,di(this,d[1]||"",!0),this.o=Re(d[2]||""),this.g=Re(d[3]||"",!0),wr(this,d[4]),this.l=Re(d[5]||"",!0),Tr(this,d[6]||"",!0),this.m=Re(d[7]||"")):(this.h=!1,this.i=new Un(null,this.h))}tr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Sr(d,Yi,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Sr(d,Yi,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Sr(g,g.charAt(0)=="/"?Ra:Aa,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Sr(g,po)),l.join("")};function en(l){return new tr(l)}function di(l,d,g){l.j=g?Re(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function wr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Tr(l,d,g){d instanceof Un?(l.i=d,zn(l.i,l.h)):(g||(d=Sr(d,Ca)),l.i=new Un(d,l.h))}function je(l,d,g){l.i.set(d,g)}function Ir(l){return je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Re(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Sr(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,Sa),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Sa(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Yi=/[#\/\?@]/g,Aa=/[#\?:]/g,Ra=/[#\?]/g,Ca=/[#\?@]/g,po=/#/g;function Un(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function wt(l){l.g||(l.g=new Map,l.h=0,l.i&&wu(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=Un.prototype,i.add=function(l,d){wt(this),this.i=null,l=hn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function In(l,d){wt(l),d=hn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Sn(l,d){return wt(l),d=hn(l,d),l.g.has(d)}i.forEach=function(l,d){wt(this),this.g.forEach(function(g,E){g.forEach(function(L){l.call(d,L,E,this)},this)},this)},i.na=function(){wt(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let E=0;E<d.length;E++){const L=l[E];for(let j=0;j<L.length;j++)g.push(d[E])}return g},i.V=function(l){wt(this);let d=[];if(typeof l=="string")Sn(this,l)&&(d=d.concat(this.g.get(hn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},i.set=function(l,d){return wt(this),this.i=null,l=hn(this,l),Sn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Ar(l,d,g){In(l,d),0<g.length&&(l.i=null,l.g.set(hn(l,d),Q(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var E=d[g];const j=encodeURIComponent(String(E)),Y=this.V(E);for(E=0;E<Y.length;E++){var L=j;Y[E]!==""&&(L+="="+encodeURIComponent(String(Y[E]))),l.push(L)}}return this.i=l.join("&")};function hn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function zn(l,d){d&&!l.j&&(wt(l),l.i=null,l.g.forEach(function(g,E){var L=E.toLowerCase();E!=L&&(In(this,E),Ar(this,L,g))},l)),l.j=d}function Tu(l,d){const g=new ai;if(m.Image){const E=new Image;E.onload=z(Bt,g,"TestLoadImage: loaded",!0,d,E),E.onerror=z(Bt,g,"TestLoadImage: error",!1,d,E),E.onabort=z(Bt,g,"TestLoadImage: abort",!1,d,E),E.ontimeout=z(Bt,g,"TestLoadImage: timeout",!1,d,E),m.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else d(!1)}function Pa(l,d){const g=new ai,E=new AbortController,L=setTimeout(()=>{E.abort(),Bt(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:E.signal}).then(j=>{clearTimeout(L),j.ok?Bt(g,"TestPingServer: ok",!0,d):Bt(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Bt(g,"TestPingServer: error",!1,d)})}function Bt(l,d,g,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(g)}catch{}}function Iu(){this.g=new io}function ka(l,d,g){const E=g||"";try{Er(l,function(L,j){let Y=L;v(L)&&(Y=no(L)),d.push(E+j+"="+encodeURIComponent(Y))})}catch(L){throw d.push(E+"type="+encodeURIComponent("_badmap")),L}}function nr(l){this.l=l.Ub||null,this.j=l.eb||!1}G(nr,si),nr.prototype.g=function(){return new pi(this.l,this.j)},nr.prototype.i=function(l){return function(){return l}}({});function pi(l,d){at.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(pi,at),i=pi.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Rn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,An(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Rn(this)),this.g&&(this.readyState=3,Rn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Va(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Va(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?An(this):Rn(this),this.readyState==3&&Va(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,An(this))},i.Qa=function(l){this.g&&(this.response=l,An(this))},i.ga=function(){this.g&&An(this)};function An(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Rn(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function Rn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function rr(l){let d="";return Ee(l,function(g,E){d+=E,d+=":",d+=g,d+=`\r
`}),d}function Rr(l,d,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=rr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):je(l,d,g))}function Qe(l){at.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(Qe,at);var Su=/^https?$/i,mo=["POST","PUT"];i=Qe.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wn.g(),this.v=this.o?Bi(this.o):Bi(wn),this.g.onreadystatechange=P(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(j){mi(this,j);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)g.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())g.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(mo,d,void 0))||E||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,Y]of g)this.g.setRequestHeader(j,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zi(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){mi(this,j)}};function mi(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Ji(l),tn(l)}function Ji(l){l.A||(l.A=!0,lt(l,"complete"),lt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,lt(this,"complete"),lt(this,"abort"),tn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?go(this):this.bb())},i.bb=function(){go(this)};function go(l){if(l.h&&typeof h<"u"&&(!l.v[1]||bt(l)!=4||l.Z()!=2)){if(l.u&&bt(l)==4)Zs(l.Ea,0,l);else if(lt(l,"readystatechange"),bt(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var E;if(E=Y===0){var L=String(l.D).match(fi)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),E=!Su.test(L?L.toLowerCase():"")}g=E}if(g)lt(l,"complete"),lt(l,"success");else{l.m=6;try{var j=2<bt(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",Ji(l)}}finally{tn(l)}}}}function tn(l,d){if(l.g){Zi(l);const g=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||lt(l,"ready");try{g.onreadystatechange=E}catch{}}}function Zi(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function bt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<bt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),ro(d)}};function yo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function es(l){const d={};l=(l.g&&2<=bt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(_e(l[E]))continue;var g=N(l[E]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=d[L]||[];d[L]=j,j.push(g)}D(d,function(E){return E.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jn(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function _o(l){this.Aa=0,this.i=[],this.j=new ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jn("baseRetryDelayMs",5e3,l),this.cb=jn("retryDelaySeedMs",1e4,l),this.Wa=jn("forwardChannelMaxRetries",2,l),this.wa=jn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new hi(l&&l.concurrentRequestLimit),this.Da=new Iu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=_o.prototype,i.la=8,i.G=1,i.connect=function(l,d,g,E){et(0),this.W=l,this.H=d||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=Oa(this,null,this.W),Bn(this)};function Tt(l){if(ts(l),l.G==3){var d=l.U++,g=en(l.I);if(je(g,"SID",l.K),je(g,"RID",d),je(g,"TYPE","terminate"),ir(l,g),d=new Tn(l,l.j,d),d.L=2,d.v=Ir(en(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=La(d.j,null),d.g.ea(d.v)),d.F=Date.now(),$e(d)}xa(l)}function Cn(l){l.g&&(vo(l),l.g.cancel(),l.g=null)}function ts(l){Cn(l),l.u&&(m.clearTimeout(l.u),l.u=null),is(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Bn(l){if(!Zt(l.h)&&!l.s){l.s=!0;var d=l.Ga;ze||ne(),J||(ze(),J=!0),he.add(d,l),l.B=0}}function Au(l,d){return wa(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=vn(P(l.Ga,l,d),Na(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Tn(this,this.j,l);let j=this.o;if(this.S&&(j?(j=I(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Cr(this,L,d),g=en(this.I),je(g,"RID",l),je(g,"CVER",22),this.D&&je(g,"X-HTTP-Session-Id",this.D),ir(this,g),j&&(this.O?d="headers="+encodeURIComponent(String(rr(j)))+"&"+d:this.m&&Rr(g,this.m,j)),fo(this.h,L),this.Ua&&je(g,"TYPE","init"),this.P?(je(g,"$req",d),je(g,"SID","null"),L.T=!0,Gi(L,g,null)):Gi(L,g,d),this.G=2}}else this.G==3&&(l?ns(this,l):this.i.length==0||Zt(this.h)||ns(this))};function ns(l,d){var g;d?g=d.l:g=l.U++;const E=en(l.I);je(E,"SID",l.K),je(E,"RID",g),je(E,"AID",l.T),ir(l,E),l.m&&l.o&&Rr(E,l.m,l.o),g=new Tn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Cr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),fo(l.h,g),Gi(g,E,d)}function ir(l,d){l.H&&Ee(l.H,function(g,E){je(d,E,g)}),l.l&&Er({},function(g,E){je(d,E,g)})}function Cr(l,d,g){g=Math.min(l.i.length,g);var E=l.l?P(l.l.Na,l.l,l):null;e:{var L=l.i;let j=-1;for(;;){const Y=["count="+g];j==-1?0<g?(j=L[0].g,Y.push("ofs="+j)):j=0:Y.push("ofs="+j);let Ue=!0;for(let ut=0;ut<g;ut++){let ke=L[ut].g;const mt=L[ut].map;if(ke-=j,0>ke)j=Math.max(0,L[ut].g-100),Ue=!1;else try{ka(mt,Y,"req"+ke+"_")}catch{E&&E(mt)}}if(Ue){E=Y.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,E}function gi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;ze||ne(),J||(ze(),J=!0),he.add(d,l),l.v=0}}function rs(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=vn(P(l.Fa,l),Na(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Da(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=vn(P(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),Cn(this),Da(this))};function vo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Da(l){l.g=new Tn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=en(l.qa);je(d,"RID","rpc"),je(d,"SID",l.K),je(d,"AID",l.T),je(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&je(d,"TO",l.ja),je(d,"TYPE","xmlhttp"),ir(l,d),l.m&&l.o&&Rr(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Ir(en(d)),g.m=null,g.P=!0,co(g,l)}i.Za=function(){this.C!=null&&(this.C=null,Cn(this),rs(this),et(19))};function is(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ss(l,d){var g=null;if(l.g==d){is(l),vo(l),l.g=null;var E=2}else if(Mt(l.h,d))g=d.D,Ta(l.h,d),E=1;else return;if(l.G!=0){if(d.o)if(E==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;E=oi(),lt(E,new qi(E,g)),Bn(l)}else gi(l);else if(L=d.s,L==3||L==0&&0<d.X||!(E==1&&Au(l,d)||E==2&&rs(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),L){case 1:sr(l,5);break;case 4:sr(l,10);break;case 3:sr(l,6);break;default:sr(l,2)}}}function Na(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function sr(l,d){if(l.j.info("Error code "+d),d==2){var g=P(l.fb,l),E=l.Xa;const L=!E;E=new tr(E||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||di(E,"https"),Ir(E),L?Tu(E.toString(),g):Pa(E.toString(),g)}else et(2);l.G=0,l.l&&l.l.sa(d),xa(l),ts(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function xa(l){if(l.G=0,l.ka=[],l.l){const d=Ia(l.h);(d.length!=0||l.i.length!=0)&&(b(l.ka,d),b(l.ka,l.i),l.h.i.length=0,Q(l.i),l.i.length=0),l.l.ra()}}function Oa(l,d,g){var E=g instanceof tr?en(g):new tr(g);if(E.g!="")d&&(E.g=d+"."+E.g),wr(E,E.s);else{var L=m.location;E=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var j=new tr(null);E&&di(j,E),d&&(j.g=d),L&&wr(j,L),g&&(j.l=g),E=j}return g=l.D,d=l.ya,g&&d&&je(E,g,d),je(E,"VER",l.la),ir(l,E),E}function La(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Qe(new nr({eb:g})):new Qe(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eo(){}i=Eo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function os(){}os.prototype.g=function(l,d){return new Ft(l,d)};function Ft(l,d){at.call(this),this.g=new _o(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!_e(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_e(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new bn(this)}G(Ft,at),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Tt(this.g)},Ft.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=no(l),l=g);d.i.push(new Ea(d.Ya++,l)),d.G==3&&Bn(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Tt(this.g),delete this.g,Ft.aa.N.call(this)};function Ma(l){Mn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}G(Ma,Mn);function Fa(){$i.call(this),this.status=1}G(Fa,$i);function bn(l){this.g=l}G(bn,Eo),bn.prototype.ua=function(){lt(this.g,"a")},bn.prototype.ta=function(l){lt(this.g,new Ma(l))},bn.prototype.sa=function(l){lt(this.g,new Fa)},bn.prototype.ra=function(){lt(this.g,"b")},os.prototype.createWebChannel=os.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,og=function(){return new os},sg=function(){return oi()},ig=Fn,dh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,Fl=Wi,ga.COMPLETE="complete",rg=ga,bi.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",at.prototype.listen=at.prototype.K,Wo=bi,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,ng=Qe}).apply(typeof Dl<"u"?Dl:typeof self<"u"?self:typeof window<"u"?window:{});const Xp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qs="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new Km("@firebase/firestore");function Ps(){return Ni.logLevel}function re(i,...e){if(Ni.logLevel<=De.DEBUG){const n=e.map(Nh);Ni.debug(`Firestore (${qs}): ${i}`,...n)}}function mr(i,...e){if(Ni.logLevel<=De.ERROR){const n=e.map(Nh);Ni.error(`Firestore (${qs}): ${i}`,...n)}}function Fs(i,...e){if(Ni.logLevel<=De.WARN){const n=e.map(Nh);Ni.warn(`Firestore (${qs}): ${i}`,...n)}}function Nh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(i="Unexpected state"){const e=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: `+i;throw mr(e),new Error(e)}function Ne(i,e){i||pe()}function ve(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends $s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class TE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IE{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0);let s=this.i;const a=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Wr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await a(this.currentUser)})},m=y=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Wr)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ne(typeof s.accessToken=="string"),new ag(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string"),new Lt(e)}}class SE{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class AE{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new SE(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CE{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ne(this.o===void 0);const s=c=>{c.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.R;return this.R=c.token,re("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string"),this.R=n.token,new RE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=PE(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%e.length))}return s}}function Ce(i,e){return i<e?-1:i>e?1:0}function Us(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ft(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new ft(0,0))}static max(){return new me(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n,s){n===void 0?n=0:n>e.length&&pe(),s===void 0?s=e.length-n:s>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Qn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=Qn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Math.sign(e.length-n.length)}static compareSegments(e,n){const s=Qn.isNumericId(e),a=Qn.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Qn.extractNumericId(e).compare(Qn.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class Be extends Qn{construct(e,n,s){return new Be(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new te(B.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const kE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Qn{construct(e,n,s){return new Rt(e,n,s)}static isValidIdentifier(e){return kE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Rt(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new te(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new te(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new te(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(h=!h,a++):m!=="."||h?(s+=m,a++):(c(),a++)}if(c(),h)throw new te(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(n)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Be.fromString(e))}static fromName(e){return new ce(Be.fromString(e).popFirst(5))}static empty(){return new ce(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Be(e.slice()))}}function VE(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=me.fromTimestamp(s===1e9?new ft(n+1,0):new ft(n,s));return new Gr(a,ce.empty(),e)}function DE(i){return new Gr(i.readTime,i.key,-1)}class Gr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Gr(me.min(),ce.empty(),-1)}static max(){return new Gr(me.max(),ce.empty(),-1)}}function NE(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(i.documentKey,e.documentKey),n!==0?n:Ce(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(i){if(i.code!==B.FAILED_PRECONDITION||i.message!==xE)throw i;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,s)=>{n(e)})}static reject(e){return new $((n,s)=>{s(e)})}static waitFor(e){return new $((n,s)=>{let a=0,c=0,h=!1;e.forEach(m=>{++a,m.next(()=>{++c,h&&c===a&&n()},y=>s(y))}),h=!0,c===a&&n()})}static or(e){let n=$.resolve(!1);for(const s of e)n=n.next(a=>a?$.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new $((s,a)=>{const c=e.length,h=new Array(c);let m=0;for(let y=0;y<c;y++){const v=y;n(e[v]).next(w=>{h[v]=w,++m,m===c&&s(h)},w=>a(w))}})}static doWhile(e,n){return new $((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function LE(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ws(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}su.oe=-1;function ua(i){return i==null}function Ql(i){return i===0&&1/i==-1/0}function ME(i){return typeof i=="number"&&Number.isInteger(i)&&!Ql(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Yp(e)),e=UE(i.get(n),e);return Yp(e)}function UE(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function Yp(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Zr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function ug(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nl(this.root,e,this.comparator,!0)}}class Nl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??At.RED,this.left=a??At.EMPTY,this.right=c??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new At(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return At.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,s,a,c){return this}insert(e,n,s){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zp(this.data.getIterator())}getIteratorFrom(e){return new Zp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class Zp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new an([])}unionWith(e){let n=new dt(Rt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Us(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new cg("Invalid base64 string: "+c):c}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(a){let c="";for(let h=0;h<a.length;++h)c+=String.fromCharCode(a[h]);return c}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const zE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(i){if(Ne(!!i),typeof i=="string"){let e=0;const n=zE.exec(i);if(Ne(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nt(i.seconds),nanos:nt(i.nanos)}}function nt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Xr(i){return typeof i=="string"?Ct.fromBase64String(i):Ct.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ou(i){const e=i.mapValue.fields.__previous_value__;return xh(e)?ou(e):e}function na(i){const e=Kr(i.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n,s,a,c,h,m,y,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v}}class ra{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ra("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?xh(i)?4:bE(i)?9007199254740991:BE(i)?10:11:pe()}function Kn(i,e){if(i===e)return!0;const n=Yr(i);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return na(i).isEqual(na(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const h=Kr(a.timestampValue),m=Kr(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return Xr(a.bytesValue).isEqual(Xr(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return nt(a.geoPointValue.latitude)===nt(c.geoPointValue.latitude)&&nt(a.geoPointValue.longitude)===nt(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return nt(a.integerValue)===nt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const h=nt(a.doubleValue),m=nt(c.doubleValue);return h===m?Ql(h)===Ql(m):isNaN(h)&&isNaN(m)}return!1}(i,e);case 9:return Us(i.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return function(a,c){const h=a.mapValue.fields||{},m=c.mapValue.fields||{};if(Jp(h)!==Jp(m))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(m[y]===void 0||!Kn(h[y],m[y])))return!1;return!0}(i,e);default:return pe()}}function ia(i,e){return(i.values||[]).find(n=>Kn(n,e))!==void 0}function zs(i,e){if(i===e)return 0;const n=Yr(i),s=Yr(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(i.booleanValue,e.booleanValue);case 2:return function(c,h){const m=nt(c.integerValue||c.doubleValue),y=nt(h.integerValue||h.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(i,e);case 3:return em(i.timestampValue,e.timestampValue);case 4:return em(na(i),na(e));case 5:return Ce(i.stringValue,e.stringValue);case 6:return function(c,h){const m=Xr(c),y=Xr(h);return m.compareTo(y)}(i.bytesValue,e.bytesValue);case 7:return function(c,h){const m=c.split("/"),y=h.split("/");for(let v=0;v<m.length&&v<y.length;v++){const w=Ce(m[v],y[v]);if(w!==0)return w}return Ce(m.length,y.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,h){const m=Ce(nt(c.latitude),nt(h.latitude));return m!==0?m:Ce(nt(c.longitude),nt(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return tm(i.arrayValue,e.arrayValue);case 10:return function(c,h){var m,y,v,w;const S=c.fields||{},P=h.fields||{},z=(m=S.value)===null||m===void 0?void 0:m.arrayValue,G=(y=P.value)===null||y===void 0?void 0:y.arrayValue,Q=Ce(((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0,((w=G==null?void 0:G.values)===null||w===void 0?void 0:w.length)||0);return Q!==0?Q:tm(z,G)}(i.mapValue,e.mapValue);case 11:return function(c,h){if(c===xl.mapValue&&h===xl.mapValue)return 0;if(c===xl.mapValue)return 1;if(h===xl.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),v=h.fields||{},w=Object.keys(v);y.sort(),w.sort();for(let S=0;S<y.length&&S<w.length;++S){const P=Ce(y[S],w[S]);if(P!==0)return P;const z=zs(m[y[S]],v[w[S]]);if(z!==0)return z}return Ce(y.length,w.length)}(i.mapValue,e.mapValue);default:throw pe()}}function em(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ce(i,e);const n=Kr(i),s=Kr(e),a=Ce(n.seconds,s.seconds);return a!==0?a:Ce(n.nanos,s.nanos)}function tm(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=zs(n[a],s[a]);if(c)return c}return Ce(n.length,s.length)}function js(i){return ph(i)}function ph(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=Kr(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Xr(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return ce.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=ph(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const h of s)c?c=!1:a+=",",a+=`${h}:${ph(n.fields[h])}`;return a+"}"}(i.mapValue):pe()}function Ul(i){switch(Yr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ou(i);return e?16+Ul(e):16;case 5:return 2*i.stringValue.length;case 6:return Xr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+Ul(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return Zr(s.fields,(c,h)=>{a+=c.length+Ul(h)}),a}(i.mapValue);default:throw pe()}}function nm(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function mh(i){return!!i&&"integerValue"in i}function Oh(i){return!!i&&"arrayValue"in i}function rm(i){return!!i&&"nullValue"in i}function im(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function zl(i){return!!i&&"mapValue"in i}function BE(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ko(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Zr(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ko(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ko(i.arrayValue.values[n]);return e}return Object.assign({},i)}function bE(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!zl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ko(n)}setAll(e){let n=Rt.emptyPath(),s={},a=[];e.forEach((h,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,s,a),s={},a=[],n=m.popLast()}h?s[m.lastSegment()]=Ko(h):a.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());zl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];zl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Zr(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new jt(Ko(this.value))}}function hg(i){const e=[];return Zr(i.fields,(n,s)=>{const a=new Rt([n]);if(zl(s)){const c=hg(s.mapValue).fields;if(c.length===0)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,s,a,c,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Et(e,0,me.min(),me.min(),me.min(),jt.empty(),0)}static newFoundDocument(e,n,s,a){return new Et(e,1,n,me.min(),s,a,0)}static newNoDocument(e,n){return new Et(e,2,n,me.min(),me.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,me.min(),me.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.position=e,this.inclusive=n}}function sm(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],h=i.position[a];if(c.field.isKeyField()?s=ce.comparator(ce.fromName(h.referenceValue),n.key):s=zs(h,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function om(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Kn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n="asc"){this.field=e,this.dir=n}}function $E(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{}class ot extends fg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new HE(e,n,s):n==="array-contains"?new GE(e,s):n==="in"?new KE(e,s):n==="not-in"?new XE(e,s):n==="array-contains-any"?new YE(e,s):new ot(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new WE(e,s):new QE(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zs(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(zs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends fg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ln(e,n)}matches(e){return dg(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function dg(i){return i.op==="and"}function pg(i){return qE(i)&&dg(i)}function qE(i){for(const e of i.filters)if(e instanceof Ln)return!1;return!0}function gh(i){if(i instanceof ot)return i.field.canonicalString()+i.op.toString()+js(i.value);if(pg(i))return i.filters.map(e=>gh(e)).join(",");{const e=i.filters.map(n=>gh(n)).join(",");return`${i.op}(${e})`}}function mg(i,e){return i instanceof ot?function(s,a){return a instanceof ot&&s.op===a.op&&s.field.isEqual(a.field)&&Kn(s.value,a.value)}(i,e):i instanceof Ln?function(s,a){return a instanceof Ln&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,h,m)=>c&&mg(h,a.filters[m]),!0):!1}(i,e):void pe()}function gg(i){return i instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${js(n.value)}`}(i):i instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map(gg).join(" ,")+"}"}(i):"Filter"}class HE extends ot{constructor(e,n,s){super(e,n,s),this.key=ce.fromName(s.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class WE extends ot{constructor(e,n){super(e,"in",n),this.keys=yg("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QE extends ot{constructor(e,n){super(e,"not-in",n),this.keys=yg("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yg(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ce.fromName(s.referenceValue))}class GE extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Oh(n)&&ia(n.arrayValue,this.value)}}class KE extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ia(this.value.arrayValue,n)}}class XE extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ia(this.value.arrayValue,n)}}class YE extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Oh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ia(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n=null,s=[],a=[],c=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=h,this.endAt=m,this.ue=null}}function am(i,e=null,n=[],s=[],a=null,c=null,h=null){return new JE(i,e,n,s,a,c,h)}function Lh(i){const e=ve(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>gh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),ua(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>js(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>js(s)).join(",")),e.ue=n}return e.ue}function Mh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!$E(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!mg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!om(i.startAt,e.startAt)&&om(i.endAt,e.endAt)}function yh(i){return ce.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n=null,s=[],a=[],c=null,h="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ZE(i,e,n,s,a,c,h,m){return new Qs(i,e,n,s,a,c,h,m)}function Fh(i){return new Qs(i)}function lm(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function _g(i){return i.collectionGroup!==null}function Xo(i){const e=ve(i);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new dt(Rt.comparator);return h.filters.forEach(y=>{y.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new sa(c,s))}),n.has(Rt.keyField().canonicalString())||e.ce.push(new sa(Rt.keyField(),s))}return e.ce}function Gn(i){const e=ve(i);return e.le||(e.le=ew(e,Xo(i))),e.le}function ew(i,e){if(i.limitType==="F")return am(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new sa(a.field,c)});const n=i.endAt?new Gl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Gl(i.startAt.position,i.startAt.inclusive):null;return am(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function _h(i,e){const n=i.filters.concat([e]);return new Qs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Kl(i,e,n){return new Qs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function au(i,e){return Mh(Gn(i),Gn(e))&&i.limitType===e.limitType}function vg(i){return`${Lh(Gn(i))}|lt:${i.limitType}`}function ks(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>gg(a)).join(", ")}]`),ua(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>js(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>js(a)).join(",")),`Target(${s})`}(Gn(i))}; limitType=${i.limitType})`}function lu(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ce.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of Xo(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(h,m,y){const v=sm(h,m,y);return h.inclusive?v<=0:v<0}(s.startAt,Xo(s),a)||s.endAt&&!function(h,m,y){const v=sm(h,m,y);return h.inclusive?v>=0:v>0}(s.endAt,Xo(s),a))}(i,e)}function tw(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Eg(i){return(e,n)=>{let s=!1;for(const a of Xo(i)){const c=nw(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function nw(i,e,n){const s=i.field.isKeyField()?ce.comparator(e.key,n.key):function(c,h,m){const y=h.data.field(c),v=m.data.field(c);return y!==null&&v!==null?zs(y,v):pe()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return ug(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new Ye(ce.comparator);function gr(){return rw}const wg=new Ye(ce.comparator);function Qo(...i){let e=wg;for(const n of i)e=e.insert(n.key,n);return e}function Tg(i){let e=wg;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Di(){return Yo()}function Ig(){return Yo()}function Yo(){return new Oi(i=>i.toString(),(i,e)=>i.isEqual(e))}const iw=new Ye(ce.comparator),sw=new dt(ce.comparator);function Ae(...i){let e=sw;for(const n of i)e=e.add(n);return e}const ow=new dt(Ce);function aw(){return ow}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function Sg(i){return{integerValue:""+i}}function lw(i,e){return ME(e)?Sg(e):Uh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this._=void 0}}function uw(i,e,n){return i instanceof Xl?function(a,c){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&xh(c)&&(c=ou(c)),c&&(h.fields.__previous_value__=c),{mapValue:h}}(n,e):i instanceof oa?Rg(i,e):i instanceof aa?Cg(i,e):function(a,c){const h=Ag(a,c),m=um(h)+um(a.Pe);return mh(h)&&mh(a.Pe)?Sg(m):Uh(a.serializer,m)}(i,e)}function cw(i,e,n){return i instanceof oa?Rg(i,e):i instanceof aa?Cg(i,e):n}function Ag(i,e){return i instanceof Yl?function(s){return mh(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class Xl extends uu{}class oa extends uu{constructor(e){super(),this.elements=e}}function Rg(i,e){const n=Pg(e);for(const s of i.elements)n.some(a=>Kn(a,s))||n.push(s);return{arrayValue:{values:n}}}class aa extends uu{constructor(e){super(),this.elements=e}}function Cg(i,e){let n=Pg(e);for(const s of i.elements)n=n.filter(a=>!Kn(a,s));return{arrayValue:{values:n}}}class Yl extends uu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function um(i){return nt(i.integerValue||i.doubleValue)}function Pg(i){return Oh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function hw(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof oa&&a instanceof oa||s instanceof aa&&a instanceof aa?Us(s.elements,a.elements,Kn):s instanceof Yl&&a instanceof Yl?Kn(s.Pe,a.Pe):s instanceof Xl&&a instanceof Xl}(i.transform,e.transform)}class fw{constructor(e,n){this.version=e,this.transformResults=n}}class Yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class cu{}function kg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new zh(i.key,Yt.none()):new ca(i.key,i.data,Yt.none());{const n=i.data,s=jt.empty();let a=new dt(Rt.comparator);for(let c of e.fields)if(!a.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?s.delete(c):s.set(c,h),a=a.add(c)}return new ei(i.key,s,new an(a.toArray()),Yt.none())}}function dw(i,e,n){i instanceof ca?function(a,c,h){const m=a.value.clone(),y=hm(a.fieldTransforms,c,h.transformResults);m.setAll(y),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(i,e,n):i instanceof ei?function(a,c,h){if(!jl(a.precondition,c))return void c.convertToUnknownDocument(h.version);const m=hm(a.fieldTransforms,c,h.transformResults),y=c.data;y.setAll(Vg(a)),y.setAll(m),c.convertToFoundDocument(h.version,y).setHasCommittedMutations()}(i,e,n):function(a,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function Jo(i,e,n,s){return i instanceof ca?function(c,h,m,y){if(!jl(c.precondition,h))return m;const v=c.value.clone(),w=fm(c.fieldTransforms,y,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null}(i,e,n,s):i instanceof ei?function(c,h,m,y){if(!jl(c.precondition,h))return m;const v=fm(c.fieldTransforms,y,h),w=h.data;return w.setAll(Vg(c)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(S=>S.field))}(i,e,n,s):function(c,h,m){return jl(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(i,e,n)}function pw(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=Ag(s.transform,a||null);c!=null&&(n===null&&(n=jt.empty()),n.set(s.field,c))}return n||null}function cm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Us(s,a,(c,h)=>hw(c,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ca extends cu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ei extends cu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Vg(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function hm(i,e,n){const s=new Map;Ne(i.length===n.length);for(let a=0;a<n.length;a++){const c=i[a],h=c.transform,m=e.data.field(c.field);s.set(c.field,cw(h,m,n[a]))}return s}function fm(i,e,n){const s=new Map;for(const a of i){const c=a.transform,h=n.data.field(a.field);s.set(a.field,uw(c,h,e))}return s}class zh extends cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dg extends cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&dw(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Jo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Jo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Ig();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=n.has(a.key)?null:m;const y=kg(h,m);y!==null&&s.set(a.key,y),h.isValidDocument()||h.convertToNoDocument(me.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Us(this.mutations,e.mutations,(n,s)=>cm(n,s))&&Us(this.baseMutations,e.baseMutations,(n,s)=>cm(n,s))}}class jh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Ne(e.mutations.length===s.length);let a=function(){return iw}();const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,s[h].version);return new jh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Ve;function Ng(i){switch(i){default:return pe();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function xg(i){if(i===void 0)return mr("GRPC error has no .code"),B.UNKNOWN;switch(i){case st.OK:return B.OK;case st.CANCELLED:return B.CANCELLED;case st.UNKNOWN:return B.UNKNOWN;case st.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case st.INTERNAL:return B.INTERNAL;case st.UNAVAILABLE:return B.UNAVAILABLE;case st.UNAUTHENTICATED:return B.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case st.NOT_FOUND:return B.NOT_FOUND;case st.ALREADY_EXISTS:return B.ALREADY_EXISTS;case st.PERMISSION_DENIED:return B.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case st.ABORTED:return B.ABORTED;case st.OUT_OF_RANGE:return B.OUT_OF_RANGE;case st.UNIMPLEMENTED:return B.UNIMPLEMENTED;case st.DATA_LOSS:return B.DATA_LOSS;default:return pe()}}(Ve=st||(st={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=new Hr([4294967295,4294967295],0);function dm(i){const e=_w().encode(i),n=new tg;return n.update(e),new Uint8Array(n.digest())}function pm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Hr([n,s],0),new Hr([a,c],0)]}class Bh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Go(`Invalid padding: ${n}`);if(s<0)throw new Go(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Go(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Hr.fromNumber(this.Te)}de(e,n,s){let a=e.add(n.multiply(Hr.fromNumber(s)));return a.compare(vw)===1&&(a=new Hr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=dm(e),[s,a]=pm(n);for(let c=0;c<this.hashCount;c++){const h=this.de(s,a,c);if(!this.Ee(h))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Bh(c,a,n);return s.forEach(m=>h.insert(m)),h}insert(e){if(this.Te===0)return;const n=dm(e),[s,a]=pm(n);for(let c=0;c<this.hashCount;c++){const h=this.de(s,a,c);this.Ae(h)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ha.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new hu(me.min(),a,new Ye(Ce),gr(),Ae())}}class ha{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ha(s,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class Og{constructor(e,n){this.targetId=e,this.me=n}}class Lg{constructor(e,n,s=Ct.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class mm{constructor(){this.fe=0,this.ge=gm(),this.pe=Ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),s=Ae();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:pe()}}),new ha(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=gm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ew{constructor(e){this.Be=e,this.Le=new Map,this.ke=gr(),this.qe=Ol(),this.Qe=Ol(),this.Ke=new Ye(Ce)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Le.forEach((s,a)=>{this.je(a)&&n(a)})}Je(e){const n=e.targetId,s=e.me.count,a=this.Ye(n);if(a){const c=a.target;if(yh(c))if(s===0){const h=new ce(c.path);this.We(n,h,Et.newNoDocument(h,me.min()))}else Ne(s===1);else{const h=this.Ze(n);if(h!==s){const m=this.Xe(e),y=m?this.et(m,e,h):1;if(y!==0){this.He(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,v)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let h,m;try{h=Xr(s).toUint8Array()}catch(y){if(y instanceof cg)return Fs("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Bh(h,a,c)}catch(y){return Fs(y instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Te===0?null:m}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Be.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const h=this.Be.nt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(n,c,null),a++)}),a}it(e){const n=new Map;this.Le.forEach((c,h)=>{const m=this.Ye(h);if(m){if(c.current&&yh(m.target)){const y=new ce(m.target.path);this.st(y).has(h)||this.ot(h,y)||this.We(h,y,Et.newNoDocument(y,e))}c.be&&(n.set(h,c.ve()),c.Ce())}});let s=Ae();this.Qe.forEach((c,h)=>{let m=!0;h.forEachWhile(y=>{const v=this.Ye(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.ke.forEach((c,h)=>h.setReadTime(e));const a=new hu(e,n,this.Ke,this.ke,s);return this.ke=gr(),this.qe=Ol(),this.Qe=Ol(),this.Ke=new Ye(Ce),a}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,n)?a.Fe(n,1):a.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Le.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Le.get(e);return n||(n=new mm,this.Le.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new dt(Ce),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(Ce),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Le.get(e);return n&&n.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new mm),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function Ol(){return new Ye(ce.comparator)}function gm(){return new Ye(ce.comparator)}const ww={asc:"ASCENDING",desc:"DESCENDING"},Tw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Iw={and:"AND",or:"OR"};class Sw{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vh(i,e){return i.useProto3Json||ua(e)?e:{value:e}}function Jl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Aw(i,e){return Jl(i,e.toTimestamp())}function ln(i){return Ne(!!i),me.fromTimestamp(function(n){const s=Kr(n);return new ft(s.seconds,s.nanos)}(i))}function bh(i,e){return Eh(i,e).canonicalString()}function Eh(i,e){const n=function(a){return new Be(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Fg(i){const e=Be.fromString(i);return Ne($g(e)),e}function Zl(i,e){return bh(i.databaseId,e.path)}function Zo(i,e){const n=Fg(e);if(n.get(1)!==i.databaseId.projectId)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ce(zg(n))}function Ug(i,e){return bh(i.databaseId,e)}function Rw(i){const e=Fg(i);return e.length===4?Be.emptyPath():zg(e)}function wh(i){return new Be(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function zg(i){return Ne(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function ym(i,e,n){return{name:Zl(i,e),fields:n.value.mapValue.fields}}function Cw(i,e){return"found"in e?function(s,a){Ne(!!a.found),a.found.name,a.found.updateTime;const c=Zo(s,a.found.name),h=ln(a.found.updateTime),m=a.found.createTime?ln(a.found.createTime):me.min(),y=new jt({mapValue:{fields:a.found.fields}});return Et.newFoundDocument(c,h,m,y)}(i,e):"missing"in e?function(s,a){Ne(!!a.missing),Ne(!!a.readTime);const c=Zo(s,a.missing),h=ln(a.readTime);return Et.newNoDocument(c,h)}(i,e):pe()}function Pw(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(v,w){return v.useProto3Json?(Ne(w===void 0||typeof w=="string"),Ct.fromBase64String(w||"")):(Ne(w===void 0||w instanceof Buffer||w instanceof Uint8Array),Ct.fromUint8Array(w||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(v){const w=v.code===void 0?B.UNKNOWN:xg(v.code);return new te(w,v.message||"")}(h);n=new Lg(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Zo(i,s.document.name),c=ln(s.document.updateTime),h=s.document.createTime?ln(s.document.createTime):me.min(),m=new jt({mapValue:{fields:s.document.fields}}),y=Et.newFoundDocument(a,c,h,m),v=s.targetIds||[],w=s.removedTargetIds||[];n=new Bl(v,w,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Zo(i,s.document),c=s.readTime?ln(s.readTime):me.min(),h=Et.newNoDocument(a,c),m=s.removedTargetIds||[];n=new Bl([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Zo(i,s.document),c=s.removedTargetIds||[];n=new Bl([],c,a,null)}else{if(!("filter"in e))return pe();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,h=new yw(a,c),m=s.targetId;n=new Og(m,h)}}return n}function jg(i,e){let n;if(e instanceof ca)n={update:ym(i,e.key,e.value)};else if(e instanceof zh)n={delete:Zl(i,e.key)};else if(e instanceof ei)n={update:ym(i,e.key,e.data),updateMask:Fw(e.fieldMask)};else{if(!(e instanceof Dg))return pe();n={verify:Zl(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,h){const m=h.transform;if(m instanceof Xl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof oa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof aa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Yl)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw pe()}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:Aw(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:pe()}(i,e.precondition)),n}function kw(i,e){return i&&i.length>0?(Ne(e!==void 0),i.map(n=>function(a,c){let h=a.updateTime?ln(a.updateTime):ln(c);return h.isEqual(me.min())&&(h=ln(c)),new fw(h,a.transformResults||[])}(n,e))):[]}function Vw(i,e){return{documents:[Ug(i,e.path)]}}function Dw(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Ug(i,a);const c=function(v){if(v.length!==0)return bg(Ln.create(v,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const h=function(v){if(v.length!==0)return v.map(w=>function(P){return{field:Vs(P.field),direction:Ow(P.dir)}}(w))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=vh(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{ct:n,parent:a}}function Nw(i){let e=Rw(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Ne(s===1);const w=n.from[0];w.allDescendants?a=w.collectionId:e=e.child(w.collectionId)}let c=[];n.where&&(c=function(S){const P=Bg(S);return P instanceof Ln&&pg(P)?P.getFilters():[P]}(n.where));let h=[];n.orderBy&&(h=function(S){return S.map(P=>function(G){return new sa(Ds(G.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(P))}(n.orderBy));let m=null;n.limit&&(m=function(S){let P;return P=typeof S=="object"?S.value:S,ua(P)?null:P}(n.limit));let y=null;n.startAt&&(y=function(S){const P=!!S.before,z=S.values||[];return new Gl(z,P)}(n.startAt));let v=null;return n.endAt&&(v=function(S){const P=!S.before,z=S.values||[];return new Gl(z,P)}(n.endAt)),ZE(e,a,h,c,m,"F",y,v)}function xw(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Bg(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ds(n.unaryFilter.field);return ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Ds(n.unaryFilter.field);return ot.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ds(n.unaryFilter.field);return ot.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ds(n.unaryFilter.field);return ot.create(h,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(i):i.fieldFilter!==void 0?function(n){return ot.create(Ds(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(s=>Bg(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(i):pe()}function Ow(i){return ww[i]}function Lw(i){return Tw[i]}function Mw(i){return Iw[i]}function Vs(i){return{fieldPath:i.canonicalString()}}function Ds(i){return Rt.fromServerFormat(i.fieldPath)}function bg(i){return i instanceof ot?function(n){if(n.op==="=="){if(im(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NAN"}};if(rm(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(im(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NOT_NAN"}};if(rm(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vs(n.field),op:Lw(n.op),value:n.value}}}(i):i instanceof Ln?function(n){const s=n.getFilters().map(a=>bg(a));return s.length===1?s[0]:{compositeFilter:{op:Mw(n.op),filters:s}}}(i):pe()}function Fw(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $g(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,s,a,c=me.min(),h=me.min(),m=Ct.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.ht=e}}function zw(i){const e=Nw({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Kl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.ln=new Bw}addToCollectionParentIndex(e,n){return this.ln.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Gr.min())}updateCollectionGroup(e,n,s){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class Bw{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new dt(Be.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new dt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Bs(0)}static Qn(){return new Bs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm([i,e],[n,s]){const a=Ce(i,n);return a===0?Ce(e,s):a}class bw{constructor(e){this.Gn=e,this.buffer=new dt(vm),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();vm(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $w{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ws(n)?re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Hs(n)}await this.Yn(3e5)})}}class qw{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return $.resolve(su.oe);const s=new bw(n);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(_m)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_m):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,a,c,h,m,y,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),a=this.params.maximumSequenceNumbersToCollect):a=S,h=Date.now(),this.nthSequenceNumber(e,a))).next(S=>(s=S,m=Date.now(),this.removeTargets(e,s,n))).next(S=>(c=S,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(S=>(v=Date.now(),Ps()<=De.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${a} in `+(m-h)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${S} documents in `+(v-y)+`ms
Total Duration: ${v-w}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:S})))}}function Hw(i,e){return new qw(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.changes=new Oi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&Jo(s.mutation,a,an.empty(),ft.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ae()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ae()){const a=Di();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let h=Qo();return c.forEach((m,y)=>{h=h.insert(m,y.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const s=Di();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ae()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,m)=>{n.set(h,m)})})}computeViews(e,n,s,a){let c=gr();const h=Yo(),m=function(){return Yo()}();return n.forEach((y,v)=>{const w=s.get(v.key);a.has(v.key)&&(w===void 0||w.mutation instanceof ei)?c=c.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),Jo(w.mutation,v,w.mutation.getFieldMask(),ft.now())):h.set(v.key,an.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((v,w)=>h.set(v,w)),n.forEach((v,w)=>{var S;return m.set(v,new Qw(w,(S=h.get(v))!==null&&S!==void 0?S:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Yo();let a=new Ye((h,m)=>h-m),c=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const m of h)m.keys().forEach(y=>{const v=n.get(y);if(v===null)return;let w=s.get(y)||an.empty();w=m.applyToLocalView(v,w),s.set(y,w);const S=(a.get(m.batchId)||Ae()).add(y);a=a.insert(m.batchId,S)})}).next(()=>{const h=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,w=y.value,S=Ig();w.forEach(P=>{if(!c.has(P)){const z=kg(n.get(P),s.get(P));z!==null&&S.set(P,z),c=c.add(P)}}),h.push(this.documentOverlayCache.saveOverlays(e,v,S))}return $.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(h){return ce.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_g(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):$.resolve(Di());let m=-1,y=c;return h.next(v=>$.forEach(v,(w,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),c.get(w)?$.resolve():this.remoteDocumentCache.getEntry(e,w).next(P=>{y=y.insert(w,P)}))).next(()=>this.populateOverlays(e,v,c)).next(()=>this.computeViews(e,y,v,Ae())).next(w=>({batchId:m,changes:Tg(w)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(s=>{let a=Qo();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let h=Qo();return this.indexManager.getCollectionParents(e,c).next(m=>$.forEach(m,y=>{const v=function(S,P){return new Qs(P,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next(w=>{w.forEach((S,P)=>{h=h.insert(S,P)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(h=>{c.forEach((y,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Et.newInvalidDocument(w)))});let m=Qo();return h.forEach((y,v)=>{const w=c.get(y);w!==void 0&&Jo(w.mutation,v,an.empty(),ft.now()),lu(n,v)&&(m=m.insert(y,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return $.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:ln(a.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(a){return{name:a.name,query:zw(a.bundledQuery),readTime:ln(a.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.overlays=new Ye(ce.comparator),this.dr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Di();return $.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.Tt(e,n,c)}),$.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.dr.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.dr.delete(s)),$.resolve()}getOverlaysForCollection(e,n,s){const a=Di(),c=n.length+1,h=new ce(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return $.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Ye((v,w)=>v-w);const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let w=c.get(v.largestBatchId);w===null&&(w=Di(),c=c.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const m=Di(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((v,w)=>m.set(v,w)),!(m.size()>=a)););return $.resolve(m)}Tt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const h=this.dr.get(a.largestBatchId).delete(s.key);this.dr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new gw(n,s));let c=this.dr.get(n);c===void 0&&(c=Ae(),this.dr.set(n,c)),this.dr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this.Er=new dt(vt.Ar),this.Rr=new dt(vt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,n){const s=new vt(e,n);this.Er=this.Er.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new vt(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new ce(new Be([])),s=new vt(n,e),a=new vt(n,e+1),c=[];return this.Rr.forEachInRange([s,a],h=>{this.gr(h),c.push(h.key)}),c}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ce(new Be([])),s=new vt(n,e),a=new vt(n,e+1);let c=Ae();return this.Rr.forEachInRange([s,a],h=>{c=c.add(h.key)}),c}containsKey(e){const n=new vt(e,0),s=this.Er.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class vt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ce.comparator(e.key,n.key)||Ce(e.br,n.br)}static Vr(e,n){return Ce(e.br,n.br)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new dt(vt.Ar)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new mw(c,n,s,a);this.mutationQueue.push(h);for(const m of a)this.vr=this.vr.add(new vt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return $.resolve(h)}lookupMutationBatch(e,n){return $.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Fr(s),c=a<0?0:a;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new vt(n,0),a=new vt(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([s,a],h=>{const m=this.Cr(h.br);c.push(m)}),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new dt(Ce);return n.forEach(a=>{const c=new vt(a,0),h=new vt(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,h],m=>{s=s.add(m.br)})}),$.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;ce.isDocumentKey(c)||(c=c.child(""));const h=new vt(new ce(c),0);let m=new dt(Ce);return this.vr.forEachWhile(y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(m=m.add(y.br)),!0)},h),$.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Ne(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return $.forEach(n.mutations,a=>{const c=new vt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Bn(e){}containsKey(e,n){const s=new vt(n,0),a=this.vr.firstAfterOrEqual(s);return $.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.Nr=e,this.docs=function(){return new Ye(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,h=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let s=gr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Et.newInvalidDocument(a))}),$.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=gr();const h=n.path,m=new ce(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:w}}=y.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||NE(DE(w),s)<=0||(a.has(w.key)||lu(n,w))&&(c=c.insert(w.key,w.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(e,n,s,a){pe()}Br(e,n){return $.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new eT(this)}getSize(e){return $.resolve(this.size)}}class eT extends Ww{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),$.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.persistence=e,this.Lr=new Oi(n=>Lh(n),Mh),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.kr=0,this.qr=new $h,this.targetCount=0,this.Qr=Bs.qn()}forEachTarget(e,n){return this.Lr.forEach((s,a)=>n(a)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),$.resolve()}Un(e){this.Lr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Bs(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Un(n),$.resolve()}removeTargetData(e,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.Lr.forEach((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Lr.delete(h),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),$.waitFor(c).next(()=>a)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const s=this.Lr.get(n)||null;return $.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),$.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),$.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return $.resolve(s)}containsKey(e,n){return $.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n){this.Kr={},this.overlays={},this.$r=new su(0),this.Ur=!1,this.Ur=!0,this.Wr=new Yw,this.referenceDelegate=e(this),this.Gr=new tT(this),this.indexManager=new jw,this.remoteDocumentCache=function(a){return new Zw(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new Uw(n),this.jr=new Kw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new Jw(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){re("MemoryPersistence","Starting transaction:",e);const a=new nT(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(c=>this.referenceDelegate.Jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Yr(e,n){return $.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class nT extends OE{constructor(e){super(),this.currentSequenceNumber=e}}class qh{constructor(e){this.persistence=e,this.Zr=new $h,this.Xr=null}static ei(e){return new qh(e)}get ti(){if(this.Xr)return this.Xr;throw pe()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),$.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),$.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.ti.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.ti,s=>{const a=ce.fromPath(s);return this.ni(e,a).next(c=>{c||n.removeEntry(a,me.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return $.or([()=>$.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class eu{constructor(e,n){this.persistence=e,this.ri=new Oi(s=>FE(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=Hw(this,n)}static ei(e,n){return new eu(e,n)}Hr(){}Jr(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return $.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(c=>c?$.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.Br(e,h=>this.ir(e,h,n).next(m=>{m||(s++,c.removeEntry(h,me.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),$.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ul(e.data.value)),n}ir(e,n,s){return $.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.ri.get(n);return $.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=a}static zi(e,n){let s=Ae(),a=Ae();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Hh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return rv()?8:LE(tv())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.Xi(e,n).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.es(e,n,a,s).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new rT;return this.ts(e,n,h).next(m=>{if(c.result=m,this.Hi)return this.ns(e,n,h,m.size)})}).next(()=>c.result)}ns(e,n,s,a){return s.documentReadCount<this.Ji?(Ps()<=De.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),$.resolve()):(Ps()<=De.DEBUG&&re("QueryEngine","Query:",ks(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(Ps()<=De.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gn(n))):$.resolve())}Xi(e,n){if(lm(n))return $.resolve(null);let s=Gn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=Kl(n,null,"F"),s=Gn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const h=Ae(...c);return this.Zi.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,s).next(y=>{const v=this.rs(n,m);return this.ss(n,v,h,y.readTime)?this.Xi(e,Kl(n,null,"F")):this.os(e,v,n,y)}))})))}es(e,n,s,a){return lm(n)||a.isEqual(me.min())?$.resolve(null):this.Zi.getDocuments(e,s).next(c=>{const h=this.rs(n,c);return this.ss(n,h,s,a)?$.resolve(null):(Ps()<=De.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ks(n)),this.os(e,h,n,VE(a,-1)).next(m=>m))})}rs(e,n){let s=new dt(Eg(e));return n.forEach((a,c)=>{lu(e,c)&&(s=s.add(c))}),s}ss(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ts(e,n,s){return Ps()<=De.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",ks(n)),this.Zi.getDocumentsMatchingQuery(e,n,Gr.min(),s)}os(e,n,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,s,a){this.persistence=e,this._s=n,this.serializer=a,this.us=new Ye(Ce),this.cs=new Oi(c=>Lh(c),Mh),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gw(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function oT(i,e,n,s){return new sT(i,e,n,s)}async function Hg(i,e){const n=ve(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const h=[],m=[];let y=Ae();for(const v of a){h.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}for(const v of c){m.push(v.batchId);for(const w of v.mutations)y=y.add(w.key)}return n.localDocuments.getDocuments(s,y).next(v=>({Ts:v,removedBatchIds:h,addedBatchIds:m}))})})}function aT(i,e){const n=ve(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,y,v,w){const S=v.batch,P=S.keys();let z=$.resolve();return P.forEach(G=>{z=z.next(()=>w.getEntry(y,G)).next(Q=>{const b=v.docVersions.get(G);Ne(b!==null),Q.version.compareTo(b)<0&&(S.applyToRemoteDocument(Q,v),Q.isValidDocument()&&(Q.setReadTime(v.commitVersion),w.addEntry(Q)))})}),z.next(()=>m.mutationQueue.removeMutationBatch(y,S))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let y=Ae();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function Wg(i){const e=ve(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function lT(i,e){const n=ve(i),s=e.snapshotVersion;let a=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=n.hs.newChangeBuffer({trackRemovals:!0});a=n.us;const m=[];e.targetChanges.forEach((w,S)=>{const P=a.get(S);if(!P)return;m.push(n.Gr.removeMatchingKeys(c,w.removedDocuments,S).next(()=>n.Gr.addMatchingKeys(c,w.addedDocuments,S)));let z=P.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?z=z.withResumeToken(Ct.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):w.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(w.resumeToken,s)),a=a.insert(S,z),function(Q,b,ge){return Q.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8?!0:ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0}(P,z,w)&&m.push(n.Gr.updateTargetData(c,z))});let y=gr(),v=Ae();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,w))}),m.push(uT(c,h,e.documentUpdates).next(w=>{y=w.Is,v=w.ds})),!s.isEqual(me.min())){const w=n.Gr.getLastRemoteSnapshotVersion(c).next(S=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(w)}return $.waitFor(m).next(()=>h.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,y,v)).next(()=>y)}).then(c=>(n.us=a,c))}function uT(i,e,n){let s=Ae(),a=Ae();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let h=gr();return n.forEach((m,y)=>{const v=c.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(me.min())?(e.removeEntry(m,y.readTime),h=h.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),h=h.insert(m,y)):re("LocalStore","Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)}),{Is:h,ds:a}})}function cT(i,e){const n=ve(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function hT(i,e){const n=ve(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Gr.getTargetData(s,e).next(c=>c?(a=c,$.resolve(a)):n.Gr.allocateTargetId(s).next(h=>(a=new br(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function Th(i,e,n){const s=ve(i),a=s.us.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,h=>s.persistence.referenceDelegate.removeTarget(h,a))}catch(h){if(!Ws(h))throw h;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function Em(i,e,n){const s=ve(i);let a=me.min(),c=Ae();return s.persistence.runTransaction("Execute query","readwrite",h=>function(y,v,w){const S=ve(y),P=S.cs.get(w);return P!==void 0?$.resolve(S.us.get(P)):S.Gr.getTargetData(v,w)}(s,h,Gn(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,m.targetId).next(y=>{c=y})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,n?a:me.min(),n?c:Ae())).next(m=>(fT(s,tw(e),m),{documents:m,Es:c})))}function fT(i,e,n){let s=i.ls.get(e)||me.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.ls.set(e,s)}class wm{constructor(){this.activeTargetIds=aw()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dT{constructor(){this._o=new wm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new wm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll=null;function rh(){return Ll===null?Ll=function(){return 268435456+Math.round(2147483648*Math.random())}():Ll++,"0x"+Ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class yT extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${a}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}Oo(n,s,a,c,h){const m=rh(),y=this.No(n,s.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${m}:`,y,a);const v={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(v,c,h),this.Lo(n,y,v,a).then(w=>(re("RestConnection",`Received RPC '${n}' ${m}: `,w),w),w=>{throw Fs("RestConnection",`RPC '${n}' ${m} failed with error: `,w,"url: ",y,"request:",a),w})}ko(n,s,a,c,h,m){return this.Oo(n,s,a,c,h)}Bo(n,s,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,h)=>n[h]=c),a&&a.headers.forEach((c,h)=>n[h]=c)}No(n,s){const a=mT[n];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,n,s,a){const c=rh();return new Promise((h,m)=>{const y=new ng;y.setWithCredentials(!0),y.listenOnce(rg.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Fl.NO_ERROR:const w=y.getResponseJson();re(Ot,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),h(w);break;case Fl.TIMEOUT:re(Ot,`RPC '${e}' ${c} timed out`),m(new te(B.DEADLINE_EXCEEDED,"Request time out"));break;case Fl.HTTP_ERROR:const S=y.getStatus();if(re(Ot,`RPC '${e}' ${c} failed with status:`,S,"response text:",y.getResponseText()),S>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const z=P==null?void 0:P.error;if(z&&z.status&&z.message){const G=function(b){const ge=b.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(ge)>=0?ge:B.UNKNOWN}(z.status);m(new te(G,z.message))}else m(new te(B.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new te(B.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{re(Ot,`RPC '${e}' ${c} completed.`)}});const v=JSON.stringify(a);re(Ot,`RPC '${e}' ${c} sending request:`,a),y.send(n,"POST",v,s,15)})}qo(e,n,s){const a=rh(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=og(),m=sg(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Bo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const w=c.join("");re(Ot,`Creating RPC '${e}' stream ${a}: ${w}`,y);const S=h.createWebChannel(w,y);let P=!1,z=!1;const G=new gT({Eo:b=>{z?re(Ot,`Not sending because RPC '${e}' stream ${a} is closed:`,b):(P||(re(Ot,`Opening RPC '${e}' stream ${a} transport.`),S.open(),P=!0),re(Ot,`RPC '${e}' stream ${a} sending:`,b),S.send(b))},Ao:()=>S.close()}),Q=(b,ge,_e)=>{b.listen(ge,Z=>{try{_e(Z)}catch(oe){setTimeout(()=>{throw oe},0)}})};return Q(S,Wo.EventType.OPEN,()=>{z||(re(Ot,`RPC '${e}' stream ${a} transport opened.`),G.So())}),Q(S,Wo.EventType.CLOSE,()=>{z||(z=!0,re(Ot,`RPC '${e}' stream ${a} transport closed`),G.Do())}),Q(S,Wo.EventType.ERROR,b=>{z||(z=!0,Fs(Ot,`RPC '${e}' stream ${a} transport errored:`,b),G.Do(new te(B.UNAVAILABLE,"The operation could not be completed")))}),Q(S,Wo.EventType.MESSAGE,b=>{var ge;if(!z){const _e=b.data[0];Ne(!!_e);const Z=_e,oe=(Z==null?void 0:Z.error)||((ge=Z[0])===null||ge===void 0?void 0:ge.error);if(oe){re(Ot,`RPC '${e}' stream ${a} received error:`,oe);const Se=oe.status;let Ee=function(R){const k=st[R];if(k!==void 0)return xg(k)}(Se),D=oe.message;Ee===void 0&&(Ee=B.INTERNAL,D="Unknown error status: "+Se+" with message "+oe.message),z=!0,G.Do(new te(Ee,D)),S.close()}else re(Ot,`RPC '${e}' stream ${a} received:`,_e),G.vo(_e)}}),Q(m,ig.STAT_EVENT,b=>{b.stat===dh.PROXY?re(Ot,`RPC '${e}' stream ${a} detected buffering proxy`):b.stat===dh.NOPROXY&&re(Ot,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{G.bo()},0),G}}function ih(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(i){return new Sw(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,s=1e3,a=1.5,c=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=a,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,n-s);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n,s,a,c,h,m,y){this.li=e,this.Yo=s,this.Zo=a,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Wh(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(mr(n.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===n&&this.I_(s,a)},s=>{e(()=>{const a=new te(B.UNKNOWN,"Fetching auth token failed: "+s.message);return this.d_(a)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.E_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.d_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _T extends Qg{constructor(e,n,s,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,h),this.serializer=c}E_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=Pw(this.serializer,e),s=function(c){if(!("targetChange"in c))return me.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?me.min():h.readTime?ln(h.readTime):me.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=wh(this.serializer),n.addTarget=function(c,h){let m;const y=h.target;if(m=yh(y)?{documents:Vw(c,y)}:{query:Dw(c,y).ct},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Mg(c,h.resumeToken);const v=vh(c,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(me.min())>0){m.readTime=Jl(c,h.snapshotVersion.toTimestamp());const v=vh(c,h.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const s=xw(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=wh(this.serializer),n.removeTarget=e,this.c_(n)}}class vT extends Qg{constructor(e,n,s,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,h),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=kw(e.writeResults,e.commitTime),s=ln(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=wh(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>jg(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Oo(e,Eh(n,s),a,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new te(B.UNKNOWN,c.toString())})}ko(e,n,s,a,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.ko(e,Eh(n,s),a,h,m,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new te(B.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class wT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(mr(n),this.C_=!1):re("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{Li(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(y){const v=ve(y);v.k_.add(4),await fa(v),v.K_.set("Unknown"),v.k_.delete(4),await du(v)}(this))})}),this.K_=new wT(s,a)}}async function du(i){if(Li(i))for(const e of i.q_)await e(!0)}async function fa(i){for(const e of i.q_)await e(!1)}function Gg(i,e){const n=ve(i);n.L_.has(e.targetId)||(n.L_.set(e.targetId,e),Xh(n)?Kh(n):Gs(n).s_()&&Gh(n,e))}function Qh(i,e){const n=ve(i),s=Gs(n);n.L_.delete(e),s.s_()&&Kg(n,e),n.L_.size===0&&(s.s_()?s.a_():Li(n)&&n.K_.set("Unknown"))}function Gh(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gs(i).V_(e)}function Kg(i,e){i.U_.xe(e),Gs(i).m_(e)}function Kh(i){i.U_=new Ew({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.L_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Gs(i).start(),i.K_.F_()}function Xh(i){return Li(i)&&!Gs(i).i_()&&i.L_.size>0}function Li(i){return ve(i).k_.size===0}function Xg(i){i.U_=void 0}async function IT(i){i.K_.set("Online")}async function ST(i){i.L_.forEach((e,n)=>{Gh(i,e)})}async function AT(i,e){Xg(i),Xh(i)?(i.K_.O_(e),Kh(i)):i.K_.set("Unknown")}async function RT(i,e,n){if(i.K_.set("Online"),e instanceof Lg&&e.state===2&&e.cause)try{await async function(a,c){const h=c.cause;for(const m of c.targetIds)a.L_.has(m)&&(await a.remoteSyncer.rejectListen(m,h),a.L_.delete(m),a.U_.removeTarget(m))}(i,e)}catch(s){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await tu(i,s)}else if(e instanceof Bl?i.U_.$e(e):e instanceof Og?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(me.min()))try{const s=await Wg(i.localStore);n.compareTo(s)>=0&&await function(c,h){const m=c.U_.it(h);return m.targetChanges.forEach((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const w=c.L_.get(v);w&&c.L_.set(v,w.withResumeToken(y.resumeToken,h))}}),m.targetMismatches.forEach((y,v)=>{const w=c.L_.get(y);if(!w)return;c.L_.set(y,w.withResumeToken(Ct.EMPTY_BYTE_STRING,w.snapshotVersion)),Kg(c,y);const S=new br(w.target,y,v,w.sequenceNumber);Gh(c,S)}),c.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){re("RemoteStore","Failed to raise snapshot:",s),await tu(i,s)}}async function tu(i,e,n){if(!Ws(e))throw e;i.k_.add(1),await fa(i),i.K_.set("Offline"),n||(n=()=>Wg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await du(i)})}function Yg(i,e){return e().catch(n=>tu(i,n,e))}async function pu(i){const e=ve(i),n=Jr(e);let s=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;CT(e);)try{const a=await cT(e.localStore,s);if(a===null){e.B_.length===0&&n.a_();break}s=a.batchId,PT(e,a)}catch(a){await tu(e,a)}Jg(e)&&Zg(e)}function CT(i){return Li(i)&&i.B_.length<10}function PT(i,e){i.B_.push(e);const n=Jr(i);n.s_()&&n.f_&&n.g_(e.mutations)}function Jg(i){return Li(i)&&!Jr(i).i_()&&i.B_.length>0}function Zg(i){Jr(i).start()}async function kT(i){Jr(i).w_()}async function VT(i){const e=Jr(i);for(const n of i.B_)e.g_(n.mutations)}async function DT(i,e,n){const s=i.B_.shift(),a=jh.from(s,e,n);await Yg(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await pu(i)}async function NT(i,e){e&&Jr(i).f_&&await async function(s,a){if(function(h){return Ng(h)&&h!==B.ABORTED}(a.code)){const c=s.B_.shift();Jr(s).__(),await Yg(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await pu(s)}}(i,e),Jg(i)&&Zg(i)}async function Im(i,e){const n=ve(i);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const s=Li(n);n.k_.add(3),await fa(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await du(n)}async function xT(i,e){const n=ve(i);e?(n.k_.delete(2),await du(n)):e||(n.k_.add(2),await fa(n),n.K_.set("Unknown"))}function Gs(i){return i.W_||(i.W_=function(n,s,a){const c=ve(n);return c.b_(),new _T(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:IT.bind(null,i),mo:ST.bind(null,i),po:AT.bind(null,i),R_:RT.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),Xh(i)?Kh(i):i.K_.set("Unknown")):(await i.W_.stop(),Xg(i))})),i.W_}function Jr(i){return i.G_||(i.G_=function(n,s,a){const c=ve(n);return c.b_(),new vT(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:kT.bind(null,i),po:NT.bind(null,i),p_:VT.bind(null,i),y_:DT.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await pu(i)):(await i.G_.stop(),i.B_.length>0&&(re("RemoteStore",`Stopping write stream with ${i.B_.length} pending writes`),i.B_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const h=Date.now()+s,m=new Yh(e,n,h,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jh(i,e){if(mr("AsyncQueue",`${e}: ${i}`),Ws(i))return new te(B.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{static emptySet(e){return new Ls(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ce.comparator(n.key,s.key):(n,s)=>ce.comparator(n.key,s.key),this.keyedMap=Qo(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ls)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ls;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this.z_=new Ye(ce.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):pe():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class bs{constructor(e,n,s,a,c,h,m,y,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,c){const h=[];return n.forEach(m=>{h.push({type:0,doc:m})}),new bs(e,n,Ls.emptySet(n),h,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class LT{constructor(){this.queries=Am(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const a=ve(n),c=a.queries;a.queries=Am(),c.forEach((h,m)=>{for(const y of m.J_)y.onError(s)})})(this,new te(B.ABORTED,"Firestore shutting down"))}}function Am(){return new Oi(i=>vg(i),au)}async function MT(i,e){const n=ve(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Y_()&&e.Z_()&&(s=2):(c=new OT,s=e.Z_()?0:1);try{switch(s){case 0:c.H_=await n.onListen(a,!0);break;case 1:c.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(h){const m=Jh(h,`Initialization of query '${ks(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.J_.push(e),e.ea(n.onlineState),c.H_&&e.ta(c.H_)&&Zh(n)}async function FT(i,e){const n=ve(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const h=c.J_.indexOf(e);h>=0&&(c.J_.splice(h,1),c.J_.length===0?a=e.Z_()?0:1:!c.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function UT(i,e){const n=ve(i);let s=!1;for(const a of e){const c=a.query,h=n.queries.get(c);if(h){for(const m of h.J_)m.ta(a)&&(s=!0);h.H_=a}}s&&Zh(n)}function zT(i,e,n){const s=ve(i),a=s.queries.get(e);if(a)for(const c of a.J_)c.onError(n);s.queries.delete(e)}function Zh(i){i.X_.forEach(e=>{e.next()})}var Ih,Rm;(Rm=Ih||(Ih={})).na="default",Rm.Cache="cache";class jT{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new bs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Ih.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.key=e}}class ty{constructor(e){this.key=e}}class BT{constructor(e,n){this.query=e,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ae(),this.mutatedKeys=Ae(),this.Va=Eg(e),this.ma=new Ls(this.Va)}get fa(){return this.Ea}ga(e,n){const s=n?n.pa:new Sm,a=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,h=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((w,S)=>{const P=a.get(w),z=lu(this.query,S)?S:null,G=!!P&&this.mutatedKeys.has(P.key),Q=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let b=!1;P&&z?P.data.isEqual(z.data)?G!==Q&&(s.track({type:3,doc:z}),b=!0):this.ya(P,z)||(s.track({type:2,doc:z}),b=!0,(y&&this.Va(z,y)>0||v&&this.Va(z,v)<0)&&(m=!0)):!P&&z?(s.track({type:0,doc:z}),b=!0):P&&!z&&(s.track({type:1,doc:P}),b=!0,(y||v)&&(m=!0)),b&&(z?(h=h.add(z),c=Q?c.add(w):c.delete(w)):(h=h.delete(w),c=c.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),c=c.delete(w.key),s.track({type:1,doc:w})}return{ma:h,pa:s,ss:m,mutatedKeys:c}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((w,S)=>function(z,G){const Q=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return Q(z)-Q(G)}(w.type,S.type)||this.Va(w.doc,S.doc)),this.wa(s),a=a!=null&&a;const m=n&&!a?this.Sa():[],y=this.Ra.size===0&&this.current&&!a?1:0,v=y!==this.Aa;return this.Aa=y,h.length!==0||v?{snapshot:new bs(this.query,e.ma,c,h,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Sm,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ae(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new ty(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new ey(s))}),n}va(e){this.Ea=e.Es,this.Ra=Ae();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return bs.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class bT{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class $T{constructor(e){this.key=e,this.Fa=!1}}class qT{constructor(e,n,s,a,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new Oi(m=>vg(m),au),this.Oa=new Map,this.Na=new Set,this.Ba=new Ye(ce.comparator),this.La=new Map,this.ka=new $h,this.qa={},this.Qa=new Map,this.Ka=Bs.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function HT(i,e,n=!0){const s=ay(i);let a;const c=s.xa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ca()):a=await ny(s,e,n,!0),a}async function WT(i,e){const n=ay(i);await ny(n,e,!0,!1)}async function ny(i,e,n,s){const a=await hT(i.localStore,Gn(e)),c=a.targetId,h=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await QT(i,e,c,h==="current",a.resumeToken)),i.isPrimaryClient&&n&&Gg(i.remoteStore,a),m}async function QT(i,e,n,s,a){i.Ua=(S,P,z)=>async function(Q,b,ge,_e){let Z=b.view.ga(ge);Z.ss&&(Z=await Em(Q.localStore,b.query,!1).then(({documents:D})=>b.view.ga(D,Z)));const oe=_e&&_e.targetChanges.get(b.targetId),Se=_e&&_e.targetMismatches.get(b.targetId)!=null,Ee=b.view.applyChanges(Z,Q.isPrimaryClient,oe,Se);return Pm(Q,b.targetId,Ee.ba),Ee.snapshot}(i,S,P,z);const c=await Em(i.localStore,e,!0),h=new BT(e,c.Es),m=h.ga(c.documents),y=ha.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=h.applyChanges(m,i.isPrimaryClient,y);Pm(i,n,v.ba);const w=new bT(e,n,h);return i.xa.set(e,w),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),v.snapshot}async function GT(i,e,n){const s=ve(i),a=s.xa.get(e),c=s.Oa.get(a.targetId);if(c.length>1)return s.Oa.set(a.targetId,c.filter(h=>!au(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Th(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Qh(s.remoteStore,a.targetId),Sh(s,a.targetId)}).catch(Hs)):(Sh(s,a.targetId),await Th(s.localStore,a.targetId,!0))}async function KT(i,e){const n=ve(i),s=n.xa.get(e),a=n.Oa.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Qh(n.remoteStore,s.targetId))}async function XT(i,e,n){const s=r0(i);try{const a=await function(h,m){const y=ve(h),v=ft.now(),w=m.reduce((z,G)=>z.add(G.key),Ae());let S,P;return y.persistence.runTransaction("Locally write mutations","readwrite",z=>{let G=gr(),Q=Ae();return y.hs.getEntries(z,w).next(b=>{G=b,G.forEach((ge,_e)=>{_e.isValidDocument()||(Q=Q.add(ge))})}).next(()=>y.localDocuments.getOverlayedDocuments(z,G)).next(b=>{S=b;const ge=[];for(const _e of m){const Z=pw(_e,S.get(_e.key).overlayedDocument);Z!=null&&ge.push(new ei(_e.key,Z,hg(Z.value.mapValue),Yt.exists(!0)))}return y.mutationQueue.addMutationBatch(z,v,ge,m)}).next(b=>{P=b;const ge=b.applyToLocalDocumentSet(S,Q);return y.documentOverlayCache.saveOverlays(z,b.batchId,ge)})}).then(()=>({batchId:P.batchId,changes:Tg(S)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(h,m,y){let v=h.qa[h.currentUser.toKey()];v||(v=new Ye(Ce)),v=v.insert(m,y),h.qa[h.currentUser.toKey()]=v}(s,a.batchId,n),await da(s,a.changes),await pu(s.remoteStore)}catch(a){const c=Jh(a,"Failed to persist write");n.reject(c)}}async function ry(i,e){const n=ve(i);try{const s=await lT(n.localStore,e);e.targetChanges.forEach((a,c)=>{const h=n.La.get(c);h&&(Ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.Fa=!0:a.modifiedDocuments.size>0?Ne(h.Fa):a.removedDocuments.size>0&&(Ne(h.Fa),h.Fa=!1))}),await da(n,s,e)}catch(s){await Hs(s)}}function Cm(i,e,n){const s=ve(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.xa.forEach((c,h)=>{const m=h.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(h,m){const y=ve(h);y.onlineState=m;let v=!1;y.queries.forEach((w,S)=>{for(const P of S.J_)P.ea(m)&&(v=!0)}),v&&Zh(y)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function YT(i,e,n){const s=ve(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.La.get(e),c=a&&a.key;if(c){let h=new Ye(ce.comparator);h=h.insert(c,Et.newNoDocument(c,me.min()));const m=Ae().add(c),y=new hu(me.min(),new Map,new Ye(Ce),h,m);await ry(s,y),s.Ba=s.Ba.remove(c),s.La.delete(e),ef(s)}else await Th(s.localStore,e,!1).then(()=>Sh(s,e,n)).catch(Hs)}async function JT(i,e){const n=ve(i),s=e.batch.batchId;try{const a=await aT(n.localStore,e);sy(n,s,null),iy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await da(n,a)}catch(a){await Hs(a)}}async function ZT(i,e,n){const s=ve(i);try{const a=await function(h,m){const y=ve(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let w;return y.mutationQueue.lookupMutationBatch(v,m).next(S=>(Ne(S!==null),w=S.keys(),y.mutationQueue.removeMutationBatch(v,S))).next(()=>y.mutationQueue.performConsistencyCheck(v)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(v,w,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w)).next(()=>y.localDocuments.getDocuments(v,w))})}(s.localStore,e);sy(s,e,n),iy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await da(s,a)}catch(a){await Hs(a)}}function iy(i,e){(i.Qa.get(e)||[]).forEach(n=>{n.resolve()}),i.Qa.delete(e)}function sy(i,e,n){const s=ve(i);let a=s.qa[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function Sh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),n&&i.Ma.Wa(s,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||oy(i,s)})}function oy(i,e){i.Na.delete(e.path.canonicalString());const n=i.Ba.get(e);n!==null&&(Qh(i.remoteStore,n),i.Ba=i.Ba.remove(e),i.La.delete(n),ef(i))}function Pm(i,e,n){for(const s of n)s instanceof ey?(i.ka.addReference(s.key,e),e0(i,s)):s instanceof ty?(re("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||oy(i,s.key)):pe()}function e0(i,e){const n=e.key,s=n.path.canonicalString();i.Ba.get(n)||i.Na.has(s)||(re("SyncEngine","New document in limbo: "+n),i.Na.add(s),ef(i))}function ef(i){for(;i.Na.size>0&&i.Ba.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new ce(Be.fromString(e)),s=i.Ka.next();i.La.set(s,new $T(n)),i.Ba=i.Ba.insert(n,s),Gg(i.remoteStore,new br(Gn(Fh(n.path)),s,"TargetPurposeLimboResolution",su.oe))}}async function da(i,e,n){const s=ve(i),a=[],c=[],h=[];s.xa.isEmpty()||(s.xa.forEach((m,y)=>{h.push(s.Ua(y,e,n).then(v=>{var w;if((v||n)&&s.isPrimaryClient){const S=v?!v.fromCache:(w=n==null?void 0:n.targetChanges.get(y.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(y.targetId,S?"current":"not-current")}if(v){a.push(v);const S=Hh.zi(y.targetId,v);c.push(S)}}))}),await Promise.all(h),s.Ma.R_(a),await async function(y,v){const w=ve(y);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>$.forEach(v,P=>$.forEach(P.Wi,z=>w.persistence.referenceDelegate.addReference(S,P.targetId,z)).next(()=>$.forEach(P.Gi,z=>w.persistence.referenceDelegate.removeReference(S,P.targetId,z)))))}catch(S){if(!Ws(S))throw S;re("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const P=S.targetId;if(!S.fromCache){const z=w.us.get(P),G=z.snapshotVersion,Q=z.withLastLimboFreeSnapshotVersion(G);w.us=w.us.insert(P,Q)}}}(s.localStore,c))}async function t0(i,e){const n=ve(i);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const s=await Hg(n.localStore,e);n.currentUser=e,function(c,h){c.Qa.forEach(m=>{m.forEach(y=>{y.reject(new te(B.CANCELLED,h))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await da(n,s.Ts)}}function n0(i,e){const n=ve(i),s=n.La.get(e);if(s&&s.Fa)return Ae().add(s.key);{let a=Ae();const c=n.Oa.get(e);if(!c)return a;for(const h of c){const m=n.xa.get(h);a=a.unionWith(m.view.fa)}return a}}function ay(i){const e=ve(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ry.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YT.bind(null,e),e.Ma.R_=UT.bind(null,e.eventManager),e.Ma.Wa=zT.bind(null,e.eventManager),e}function r0(i){const e=ve(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZT.bind(null,e),e}class nu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return oT(this.persistence,new iT,e.initialUser,this.serializer)}ja(e){return new qg(qh.ei,this.serializer)}za(e){return new dT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nu.provider={build:()=>new nu};class i0 extends nu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Ne(this.persistence.referenceDelegate instanceof eu);const s=this.persistence.referenceDelegate.garbageCollector;return new $w(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new qg(s=>eu.ei(s,n),this.serializer)}}class Ah{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Cm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=t0.bind(null,this.syncEngine),await xT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LT}()}createDatastore(e){const n=fu(e.databaseInfo.databaseId),s=function(c){return new yT(c)}(e.databaseInfo);return function(c,h,m,y){return new ET(c,h,m,y)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,h,m){return new TT(s,a,c,h,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Cm(this.syncEngine,n,0),function(){return Tm.p()?new Tm:new pT}())}createSyncEngine(e,n){return function(a,c,h,m,y,v,w){const S=new qT(a,c,h,m,y,v);return w&&(S.$a=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const c=ve(a);re("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await fa(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ah.provider={build:()=>new Ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new te(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(a,c){const h=ve(a),m={documents:c.map(S=>Zl(h.serializer,S))},y=await h.ko("BatchGetDocuments",h.serializer.databaseId,Be.emptyPath(),m,c.length),v=new Map;y.forEach(S=>{const P=Cw(h.serializer,S);v.set(P.key.toString(),P)});const w=[];return c.forEach(S=>{const P=v.get(S.toString());Ne(!!P),w.push(P)}),w}(this.datastore,e);return n.forEach(s=>this.recordVersion(s)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new zh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,s)=>{const a=ce.fromPath(s);this.mutations.push(new Dg(a,this.precondition(a)))}),await async function(s,a){const c=ve(s),h={writes:a.map(m=>jg(c.serializer,m))};await c.Oo("Commit",c.serializer.databaseId,Be.emptyPath(),h)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw pe();n=me.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new te(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(me.min())?Yt.exists(!1):Yt.updateTime(n):Yt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(me.min()))throw new te(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yt.updateTime(n)}return Yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n,s,a,c){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=a,this.deferred=c,this.uu=s.maxAttempts,this.r_=new Wh(this.asyncQueue,"transaction_retry")}cu(){this.uu-=1,this.lu()}lu(){this.r_.jo(async()=>{const e=new o0(this.datastore),n=this.hu(e);n&&n.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(a=>{this.Pu(a)}))}).catch(s=>{this.Pu(s)})})}hu(e){try{const n=this.updateFunction(e);return!ua(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Pu(e){this.uu>0&&this.Tu(e)?(this.uu-=1,this.asyncQueue.enqueueAndForget(()=>(this.lu(),Promise.resolve()))):this.deferred.reject(e)}Tu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Ng(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Lt.UNAUTHENTICATED,this.clientId=lg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async h=>{re("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(re("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Jh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function sh(i,e){i.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await Hg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function km(i,e){i.asyncQueue.verifyOperationInProgress();const n=await u0(i);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>Im(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>Im(e.remoteStore,a)),i._onlineComponents=e}async function u0(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await sh(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===B.FAILED_PRECONDITION||a.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Fs("Error using user provided cache. Falling back to memory cache: "+n),await sh(i,new nu)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await sh(i,new i0(void 0));return i._offlineComponents}async function tf(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await km(i,i._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await km(i,new Ah))),i._onlineComponents}function c0(i){return tf(i).then(e=>e.syncEngine)}function h0(i){return tf(i).then(e=>e.datastore)}async function Vm(i){const e=await tf(i),n=e.eventManager;return n.onListen=HT.bind(null,e.syncEngine),n.onUnlisten=GT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KT.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(i,e,n){if(!n)throw new te(B.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function f0(i,e,n,s){if(e===!0&&s===!0)throw new te(B.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Nm(i){if(!ce.isDocumentKey(i))throw new te(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function xm(i){if(ce.isDocumentKey(i))throw new te(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function mu(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":pe()}function Ms(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new te(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mu(i);throw new te(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new te(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ly((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Om({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Om(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new wE;switch(s.type){case"firstParty":return new AE(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new te(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Dm.get(n);s&&(re("ComponentProvider","Removing Datastore"),Dm.delete(n),s.terminate())}(this),Promise.resolve()}}function d0(i,e,n,s={}){var a;const c=(i=Ms(i,gu))._getSettings(),h=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==h&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:h,ssl:!1})),s.mockUserToken){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=Lt.MOCK_USER;else{m=ev(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new te(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Lt(v)}i._authCredentials=new TE(new ag(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ti(this.firestore,e,this._query)}}class Jt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Qr extends ti{constructor(e,n,s){super(e,n,Fh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new ce(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function Rh(i,e,...n){if(i=On(i),uy("collection","path",e),i instanceof gu){const s=Be.fromString(e,...n);return xm(s),new Qr(i,null,s)}{if(!(i instanceof Jt||i instanceof Qr))throw new te(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Be.fromString(e,...n));return xm(s),new Qr(i.firestore,null,s)}}function cy(i,e,...n){if(i=On(i),arguments.length===1&&(e=lg.newId()),uy("doc","path",e),i instanceof gu){const s=Be.fromString(e,...n);return Nm(s),new Jt(i,null,new ce(s))}{if(!(i instanceof Jt||i instanceof Qr))throw new te(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Be.fromString(e,...n));return Nm(s),new Jt(i.firestore,i instanceof Qr?i.converter:null,new ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Wh(this,"async_queue_retry"),this.fu=()=>{const s=ih();s&&re("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=ih();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const n=ih();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const n=new Wr;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ws(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(s);throw mr("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const a=Yh.createAndSchedule(this,e,n,s,c=>this.Su(c));return this.Eu.push(a),a}pu(){this.Au&&pe()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.Eu)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.Eu.indexOf(e);this.Eu.splice(n,1)}}function Mm(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1}(i,["next","error","complete"])}class la extends gu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new Lm,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lm(e),this._firestoreClient=void 0,await e}}}function p0(i,e){const n=typeof i=="object"?i:uE(),s=typeof i=="string"?i:"(default)",a=sE(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=J_("firestore");c&&d0(a,...c)}return a}function nf(i){if(i._terminated)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||m0(i),i._firestoreClient}function m0(i){var e,n,s;const a=i._freezeSettings(),c=function(m,y,v,w){return new jE(m,y,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,ly(w.experimentalLongPollingOptions),w.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new l0(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xi(Ct.fromBase64String(e))}catch(n){throw new te(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xi(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=/^__.*__$/;class y0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ei(e,this.data,this.fieldMask,n,this.fieldTransforms):new ca(e,this.data,n,this.fieldTransforms)}}class hy{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ei(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fy(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class af{constructor(e,n,s,a,c,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new af(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Bu(e),a}Lu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return ru(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(fy(this.Mu)&&g0.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class _0{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||fu(e)}$u(e,n,s,a=!1){return new af({Mu:e,methodName:n,Ku:s,path:Rt.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lf(i){const e=i._freezeSettings(),n=fu(i._databaseId);return new _0(i._databaseId,!!e.ignoreUndefinedProperties,n)}function dy(i,e,n,s,a,c={}){const h=i.$u(c.merge||c.mergeFields?2:0,e,n,a);uf("Data must be an object, but it was:",h,s);const m=py(s,h);let y,v;if(c.merge)y=new an(h.fieldMask),v=h.fieldTransforms;else if(c.mergeFields){const w=[];for(const S of c.mergeFields){const P=Ch(e,S,n);if(!h.contains(P))throw new te(B.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);gy(w,P)||w.push(P)}y=new an(w),v=h.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,v=h.fieldTransforms;return new y0(new jt(m),y,v)}class _u extends rf{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _u}}function v0(i,e,n,s){const a=i.$u(1,e,n);uf("Data must be an object, but it was:",a,s);const c=[],h=jt.empty();Zr(s,(y,v)=>{const w=cf(e,y,n);v=On(v);const S=a.Lu(w);if(v instanceof _u)c.push(w);else{const P=pa(v,S);P!=null&&(c.push(w),h.set(w,P))}});const m=new an(c);return new hy(h,m,a.fieldTransforms)}function E0(i,e,n,s,a,c){const h=i.$u(1,e,n),m=[Ch(e,s,n)],y=[a];if(c.length%2!=0)throw new te(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<c.length;P+=2)m.push(Ch(e,c[P])),y.push(c[P+1]);const v=[],w=jt.empty();for(let P=m.length-1;P>=0;--P)if(!gy(v,m[P])){const z=m[P];let G=y[P];G=On(G);const Q=h.Lu(z);if(G instanceof _u)v.push(z);else{const b=pa(G,Q);b!=null&&(v.push(z),w.set(z,b))}}const S=new an(v);return new hy(w,S,h.fieldTransforms)}function w0(i,e,n,s=!1){return pa(n,i.$u(s?4:3,e))}function pa(i,e){if(my(i=On(i)))return uf("Unsupported field value:",e,i),py(i,e);if(i instanceof rf)return function(s,a){if(!fy(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const c=[];let h=0;for(const m of s){let y=pa(m,a.ku(h));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),h++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=On(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return lw(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ft.fromDate(s);return{timestampValue:Jl(a.serializer,c)}}if(s instanceof ft){const c=new ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Jl(a.serializer,c)}}if(s instanceof sf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof xi)return{bytesValue:Mg(a.serializer,s._byteString)};if(s instanceof Jt){const c=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw a.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:bh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof of)return function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw m.qu("VectorValues must only contain numeric values.");return Uh(m.serializer,y)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${mu(s)}`)}(i,e)}function py(i,e){const n={};return ug(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(i,(s,a)=>{const c=pa(a,e.Ou(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function my(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ft||i instanceof sf||i instanceof xi||i instanceof Jt||i instanceof rf||i instanceof of)}function uf(i,e,n){if(!my(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=mu(n);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function Ch(i,e,n){if((e=On(e))instanceof yu)return e._internalPath;if(typeof e=="string")return cf(i,e);throw ru("Field path arguments must be of type string or ",i,!1,void 0,n)}const T0=new RegExp("[~\\*/\\[\\]]");function cf(i,e,n){if(e.search(T0)>=0)throw ru(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new yu(...e.split("."))._internalPath}catch{throw ru(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function ru(i,e,n,s,a){const c=s&&!s.isEmpty(),h=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||h)&&(y+=" (found",c&&(y+=` in field ${s}`),h&&(y+=` in document ${a}`),y+=")"),new te(B.INVALID_ARGUMENT,m+i+y)}function gy(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I0 extends iu{data(){return super.data()}}function hf(i,e){return typeof e=="string"?cf(i,e):e instanceof yu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new te(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ff{}class df extends ff{}function A0(i,e,...n){let s=[];e instanceof ff&&s.push(e),s=s.concat(n),function(c){const h=c.filter(y=>y instanceof mf).length,m=c.filter(y=>y instanceof pf).length;if(h>1||h>0&&m>0)throw new te(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class pf extends df{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new pf(e,n,s)}_apply(e){const n=this._parse(e);return yy(e._query,n),new ti(e.firestore,e.converter,_h(e._query,n))}_parse(e){const n=lf(e.firestore);return function(c,h,m,y,v,w,S){let P;if(v.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new te(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Um(S,w);const z=[];for(const G of S)z.push(Fm(y,c,G));P={arrayValue:{values:z}}}else P=Fm(y,c,S)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Um(S,w),P=w0(m,h,S,w==="in"||w==="not-in");return ot.create(v,w,P)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class mf extends ff{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mf(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,c){let h=a;const m=c.getFlattenedFilters();for(const y of m)yy(h,y),h=_h(h,y)}(e._query,n),new ti(e.firestore,e.converter,_h(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gf extends df{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gf(e,n)}_apply(e){const n=function(a,c,h){if(a.startAt!==null)throw new te(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new te(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sa(c,h)}(e._query,this._field,this._direction);return new ti(e.firestore,e.converter,function(a,c){const h=a.explicitOrderBy.concat([c]);return new Qs(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function R0(i,e="asc"){const n=e,s=hf("orderBy",i);return gf._create(s,n)}class yf extends df{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new yf(e,n,s)}_apply(e){return new ti(e.firestore,e.converter,Kl(e._query,this._limit,this._limitType))}}function C0(i){return yf._create("limit",i,"F")}function Fm(i,e,n){if(typeof(n=On(n))=="string"){if(n==="")throw new te(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_g(e)&&n.indexOf("/")!==-1)throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Be.fromString(n));if(!ce.isDocumentKey(s))throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return nm(i,new ce(s))}if(n instanceof Jt)return nm(i,n._key);throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mu(n)}.`)}function Um(i,e){if(!Array.isArray(i)||i.length===0)throw new te(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yy(i,e){const n=function(a,c){for(const h of a)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _y{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Zr(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(h=>nt(h.doubleValue));return new of(c)}convertGeoPoint(e){return new sf(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ou(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(na(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Be.fromString(e);Ne($g(s));const a=new ra(s.get(1),s.get(3)),c=new ce(s.popFirst(5));return a.isEqual(n)||mr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class P0 extends _y{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _f extends iu{constructor(e,n,s,a,c,h){super(e,n,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(hf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class bl extends _f{data(e={}){return super.data(e)}}class k0{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Ns(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new bl(this._firestore,this._userDataWriter,s.key,s,new Ns(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(m=>{const y=new bl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Ns(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}})}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const y=new bl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Ns(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,w=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),w=h.indexOf(m.doc.key)),{type:V0(m.type),doc:y,oldIndex:v,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function V0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}class vf extends _y{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function D0(i,e){const n=Ms(i.firestore,la),s=cy(i),a=vy(i.converter,e);return x0(n,[dy(lf(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,Yt.exists(!1))]).then(()=>s)}function N0(i,...e){var n,s,a;i=On(i);let c={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Mm(e[h])||(c=e[h],h++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Mm(e[h])){const S=e[h];e[h]=(n=S.next)===null||n===void 0?void 0:n.bind(S),e[h+1]=(s=S.error)===null||s===void 0?void 0:s.bind(S),e[h+2]=(a=S.complete)===null||a===void 0?void 0:a.bind(S)}let y,v,w;if(i instanceof Jt)v=Ms(i.firestore,la),w=Fh(i._key.path),y={next:S=>{e[h]&&e[h](O0(v,i,S))},error:e[h+1],complete:e[h+2]};else{const S=Ms(i,ti);v=Ms(S.firestore,la),w=S._query;const P=new vf(v);y={next:z=>{e[h]&&e[h](new k0(v,P,S,z))},error:e[h+1],complete:e[h+2]},S0(i._query)}return function(P,z,G,Q){const b=new s0(Q),ge=new jT(z,b,G);return P.asyncQueue.enqueueAndForget(async()=>MT(await Vm(P),ge)),()=>{b.eu(),P.asyncQueue.enqueueAndForget(async()=>FT(await Vm(P),ge))}}(nf(v),w,m,y)}function x0(i,e){return function(s,a){const c=new Wr;return s.asyncQueue.enqueueAndForget(async()=>XT(await c0(s),a,c)),c.promise}(nf(i),e)}function O0(i,e,n){const s=n.docs.get(e._key),a=new vf(i);return new _f(i,a,e._key,s,new Ns(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0={maxAttempts:5};function Ho(i,e){if((i=On(i)).firestore!==e)throw new te(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0 extends class{constructor(n,s){this._firestore=n,this._transaction=s,this._dataReader=lf(n)}get(n){const s=Ho(n,this._firestore),a=new P0(this._firestore);return this._transaction.lookup([s._key]).then(c=>{if(!c||c.length!==1)return pe();const h=c[0];if(h.isFoundDocument())return new iu(this._firestore,a,h.key,h,s.converter);if(h.isNoDocument())return new iu(this._firestore,a,s._key,null,s.converter);throw pe()})}set(n,s,a){const c=Ho(n,this._firestore),h=vy(c.converter,s,a),m=dy(this._dataReader,"Transaction.set",c._key,h,c.converter!==null,a);return this._transaction.set(c._key,m),this}update(n,s,a,...c){const h=Ho(n,this._firestore);let m;return m=typeof(s=On(s))=="string"||s instanceof yu?E0(this._dataReader,"Transaction.update",h._key,s,a,c):v0(this._dataReader,"Transaction.update",h._key,s),this._transaction.update(h._key,m),this}delete(n){const s=Ho(n,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ho(e,this._firestore),s=new vf(this._firestore);return super.get(e).then(a=>new _f(this._firestore,s,n._key,a._document,new Ns(!1,!1),n.converter))}}function F0(i,e,n){i=Ms(i,la);const s=Object.assign(Object.assign({},L0),n);return function(c){if(c.maxAttempts<1)throw new te(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,h,m){const y=new Wr;return c.asyncQueue.enqueueAndForget(async()=>{const v=await h0(c);new a0(c.asyncQueue,v,m,h,y).cu()}),y.promise}(nf(i),a=>e(new M0(i,a)),s)}(function(e,n=!0){(function(a){qs=a})(lE),Wl(new ea("firestore",(s,{instanceIdentifier:a,options:c})=>{const h=s.getProvider("app").getImmediate(),m=new la(new IE(s.getProvider("auth-internal")),new CE(s.getProvider("app-check-internal")),function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new te(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ra(v.options.projectId,w)}(h,a),h);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Os(Xp,"4.7.6",e),Os(Xp,"4.7.6","esm2017")})();const U0={apiKey:"AIzaSyBEZgAk2IjPwrzNuIRZIX1naes3moHZifY",authDomain:"project-7547149738420636194.firebaseapp.com",projectId:"project-7547149738420636194",storageBucket:"project-7547149738420636194.firebasestorage.app",messagingSenderId:"4317860658",appId:"1:4317860658:web:b2a44eb37eaefc81b8bd2b",measurementId:"G-3QNH70ZXVV"},z0=Jm(U0),$l=p0(z0),j0="Left",B0="Right",b0="Up",$0="Down",xs={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Ph={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},zm="mousemove",jm="mouseup",q0="touchend",H0="touchmove",W0="touchstart";function Q0(i,e,n,s){return i>e?n>0?B0:j0:s>0?$0:b0}function Bm(i,e){if(e===0)return i;const n=Math.PI/180*e,s=i[0]*Math.cos(n)+i[1]*Math.sin(n),a=i[1]*Math.cos(n)-i[0]*Math.sin(n);return[s,a]}function G0(i,e){const n=w=>{const S="touches"in w;S&&w.touches.length>1||i((P,z)=>{z.trackMouse&&!S&&(document.addEventListener(zm,s),document.addEventListener(jm,h));const{clientX:G,clientY:Q}=S?w.touches[0]:w,b=Bm([G,Q],z.rotationAngle);return z.onTouchStartOrOnMouseDown&&z.onTouchStartOrOnMouseDown({event:w}),Object.assign(Object.assign(Object.assign({},P),Ph),{initial:b.slice(),xy:b,start:w.timeStamp||0})})},s=w=>{i((S,P)=>{const z="touches"in w;if(z&&w.touches.length>1)return S;if(w.timeStamp-S.start>P.swipeDuration)return S.swiping?Object.assign(Object.assign({},S),{swiping:!1}):S;const{clientX:G,clientY:Q}=z?w.touches[0]:w,[b,ge]=Bm([G,Q],P.rotationAngle),_e=b-S.xy[0],Z=ge-S.xy[1],oe=Math.abs(_e),Se=Math.abs(Z),Ee=(w.timeStamp||0)-S.start,D=Math.sqrt(oe*oe+Se*Se)/(Ee||1),I=[_e/(Ee||1),Z/(Ee||1)],R=Q0(oe,Se,_e,Z),k=typeof P.delta=="number"?P.delta:P.delta[R.toLowerCase()]||xs.delta;if(oe<k&&Se<k&&!S.swiping)return S;const N={absX:oe,absY:Se,deltaX:_e,deltaY:Z,dir:R,event:w,first:S.first,initial:S.initial,velocity:D,vxvy:I};N.first&&P.onSwipeStart&&P.onSwipeStart(N),P.onSwiping&&P.onSwiping(N);let O=!1;return(P.onSwiping||P.onSwiped||P[`onSwiped${R}`])&&(O=!0),O&&P.preventScrollOnSwipe&&P.trackTouch&&w.cancelable&&w.preventDefault(),Object.assign(Object.assign({},S),{first:!1,eventData:N,swiping:!0})})},a=w=>{i((S,P)=>{let z;if(S.swiping&&S.eventData){if(w.timeStamp-S.start<P.swipeDuration){z=Object.assign(Object.assign({},S.eventData),{event:w}),P.onSwiped&&P.onSwiped(z);const G=P[`onSwiped${z.dir}`];G&&G(z)}}else P.onTap&&P.onTap({event:w});return P.onTouchEndOrOnMouseUp&&P.onTouchEndOrOnMouseUp({event:w}),Object.assign(Object.assign(Object.assign({},S),Ph),{eventData:z})})},c=()=>{document.removeEventListener(zm,s),document.removeEventListener(jm,h)},h=w=>{c(),a(w)},m=(w,S)=>{let P=()=>{};if(w&&w.addEventListener){const z=Object.assign(Object.assign({},xs.touchEventOptions),S.touchEventOptions),G=[[W0,n,z],[H0,s,Object.assign(Object.assign({},z),S.preventScrollOnSwipe?{passive:!1}:{})],[q0,a,z]];G.forEach(([Q,b,ge])=>w.addEventListener(Q,b,ge)),P=()=>G.forEach(([Q,b])=>w.removeEventListener(Q,b))}return P},v={ref:w=>{w!==null&&i((S,P)=>{if(S.el===w)return S;const z={};return S.el&&S.el!==w&&S.cleanUpTouch&&(S.cleanUpTouch(),z.cleanUpTouch=void 0),P.trackTouch&&w&&(z.cleanUpTouch=m(w,P)),Object.assign(Object.assign(Object.assign({},S),{el:w}),z)})}};return e.trackMouse&&(v.onMouseDown=n),[v,m]}function K0(i,e,n,s){return!e.trackTouch||!i.el?(i.cleanUpTouch&&i.cleanUpTouch(),Object.assign(Object.assign({},i),{cleanUpTouch:void 0})):i.cleanUpTouch?e.preventScrollOnSwipe!==n.preventScrollOnSwipe||e.touchEventOptions.passive!==n.touchEventOptions.passive?(i.cleanUpTouch(),Object.assign(Object.assign({},i),{cleanUpTouch:s(i.el,e)})):i:Object.assign(Object.assign({},i),{cleanUpTouch:s(i.el,e)})}function X0(i){const{trackMouse:e}=i,n=Xt.useRef(Object.assign({},Ph)),s=Xt.useRef(Object.assign({},xs)),a=Xt.useRef(Object.assign({},s.current));a.current=Object.assign({},s.current),s.current=Object.assign(Object.assign({},xs),i);let c;for(c in xs)s.current[c]===void 0&&(s.current[c]=xs[c]);const[h,m]=Xt.useMemo(()=>G0(y=>n.current=y(n.current,s.current),{trackMouse:e}),[e]);return n.current=K0(n.current,s.current,a.current,m),h}function Ey({n:i=4}){const e=Up(i),[n,s]=Xt.useState(()=>{const Z=window.localStorage.getItem("score");return Z?JSON.parse(Z):0}),[a,c]=Xt.useState(()=>{const Z=window.localStorage.getItem("bestScore");return Z?JSON.parse(Z):0}),[h,m]=Xt.useState(()=>{const Z=window.localStorage.getItem("onGoing");return Z?JSON.parse(Z):"1"}),[y,v]=Xt.useState(()=>{const Z=window.localStorage.getItem("board");return Z?JSON.parse(Z):e}),[w,S]=Xt.useState(()=>{const Z=window.localStorage.getItem("username");return Z?JSON.parse(Z):""}),P=async()=>{if(z(),!!w.trim())try{const Z=w.trim(),oe=Rh($l,"scores"),Se=cy(oe,Z);await F0($l,async Ee=>{const D=await Ee.get(Se);if(D.exists()){const I=D.data().score;n>I&&Ee.update(Se,{score:n,date:new Date})}else Ee.set(Se,{name:w.trim(),score:n,date:new Date})}),G()}catch(Z){console.error("Failed to save score: ",Z)}},z=async()=>{if(n!=0)try{await D0(Rh($l,"games"),{name:w,score:n,date:new Date})}catch(Z){console.error("Error saving game: ",Z)}},G=()=>{c(Math.max(n,a)),v(Up(i)),s(0),m(!0),window.localStorage.removeItem("board"),window.localStorage.removeItem("score"),window.localStorage.removeItem("onGoing")};Xt.useEffect(()=>{window.localStorage.setItem("board",JSON.stringify(y)),window.localStorage.setItem("score",JSON.stringify(n)),window.localStorage.setItem("bestScore",JSON.stringify(a)),window.localStorage.setItem("onGoing",JSON.stringify(h)),window.localStorage.setItem("username",JSON.stringify(w)),B_(y)||m("2")},[y,n,a,h,w]);const Q=Z=>{let oe=y.slice(),Se=0;switch(Z){case"left":[oe,Se]=F_(y);break;case"right":[oe,Se]=U_(y);break;case"up":[oe,Se]=z_(y);break;case"down":[oe,Se]=j_(y);break;default:return}b_(y,oe)||(oe=M_(oe),v(oe),s(n+Se))};Xt.useEffect(()=>{const Z=oe=>{switch((oe.key==="ArrowLeft"||oe.key==="ArrowRight"||oe.key==="ArrowUp"||oe.key==="ArrowDown")&&oe.preventDefault(),oe.key){case"ArrowLeft":Q("left");break;case"ArrowRight":Q("right");break;case"ArrowUp":Q("up");break;case"ArrowDown":Q("down");break;default:return}};return window.addEventListener("keydown",Z),()=>{window.removeEventListener("keydown",Z)}});const b=X0({onSwipedLeft:()=>Q("left"),onSwipedRight:()=>Q("right"),onSwipedUp:()=>Q("up"),onSwipedDown:()=>Q("down"),preventDefaultTouchmoveEvent:!0}),ge=w!=""?"Play Again":"Save score",_e=w!=""?"Game over":"Would you like to save your score?";return Fe.jsxs("main",{className:"board",children:[Fe.jsx("h1",{children:"2048"}),Fe.jsx("p",{children:w===""?"Complete a game to set username":""}),Fe.jsx(qm,{score:n,bestScore:a}),Fe.jsx("section",{className:"game",...b,children:y.map((Z,oe)=>Fe.jsx($m,{value:Z,children:y[oe]},oe))}),Fe.jsx("button",{onClick:()=>{z(),G()},children:"Reset"}),h=="2"&&Fe.jsx("section",{className:"game-over",children:Fe.jsxs("div",{className:"score-form",children:[Fe.jsx("h3",{children:_e}),Fe.jsx("input",{type:"text",placeholder:"username",value:w,onChange:Z=>S(Z.target.value)}),Fe.jsx("button",{onClick:P,children:ge})]})})]})}Ey.propTypes={n:bm.PropTypes.number};function Y0(){const[i,e]=Xt.useState([]);return Xt.useEffect(()=>{const n=A0(Rh($l,"scores"),R0("score","desc"),C0(5)),s=N0(n,a=>{const c=[];a.forEach(h=>{c.push(h.data())}),e(c)});return()=>s()},[]),Fe.jsxs("div",{className:"top-scores",children:[Fe.jsx("h3",{children:"Top 5 Scores"}),Fe.jsx("ol",{children:i.map((n,s)=>Fe.jsxs("li",{children:[n.name,": ",n.score,s===0&&" ",s===1&&" ",s===2&&" "]},s))})]})}function J0(){return Fe.jsxs(Fe.Fragment,{children:[Fe.jsx(Ey,{}),Fe.jsx(Y0,{})]})}N_.createRoot(document.getElementById("root")).render(Fe.jsx(Xt.StrictMode,{children:Fe.jsx(J0,{})}));
