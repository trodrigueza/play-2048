(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function __(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var qc={exports:{}},$o={},Wc={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function v_(){if(Sp)return Te;Sp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.iterator;function x(N){return N===null||typeof N!="object"?null:(N=C&&N[C]||N["@@iterator"],typeof N=="function"?N:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,X={};function W(N,$,le){this.props=N,this.context=$,this.refs=X,this.updater=le||B}W.prototype.isReactComponent={},W.prototype.setState=function(N,$){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,$,"setState")},W.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function te(){}te.prototype=W.prototype;function ye(N,$,le){this.props=N,this.context=$,this.refs=X,this.updater=le||B}var he=ye.prototype=new te;he.constructor=ye,K(he,W.prototype),he.isPureReactComponent=!0;var ve=Array.isArray,He=Object.prototype.hasOwnProperty,Se={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function I(N,$,le){var Ee,we={},Pe=null,Oe=null;if($!=null)for(Ee in $.ref!==void 0&&(Oe=$.ref),$.key!==void 0&&(Pe=""+$.key),$)He.call($,Ee)&&!V.hasOwnProperty(Ee)&&(we[Ee]=$[Ee]);var Me=arguments.length-2;if(Me===1)we.children=le;else if(1<Me){for(var je=Array(Me),pt=0;pt<Me;pt++)je[pt]=arguments[pt+2];we.children=je}if(N&&N.defaultProps)for(Ee in Me=N.defaultProps,Me)we[Ee]===void 0&&(we[Ee]=Me[Ee]);return{$$typeof:i,type:N,key:Pe,ref:Oe,props:we,_owner:Se.current}}function A(N,$){return{$$typeof:i,type:N.type,key:$,ref:N.ref,props:N.props,_owner:N._owner}}function k(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function D(N){var $={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(le){return $[le]})}var L=/\/+/g;function S(N,$){return typeof N=="object"&&N!==null&&N.key!=null?D(""+N.key):$.toString(36)}function Ze(N,$,le,Ee,we){var Pe=typeof N;(Pe==="undefined"||Pe==="boolean")&&(N=null);var Oe=!1;if(N===null)Oe=!0;else switch(Pe){case"string":case"number":Oe=!0;break;case"object":switch(N.$$typeof){case i:case e:Oe=!0}}if(Oe)return Oe=N,we=we(Oe),N=Ee===""?"."+S(Oe,0):Ee,ve(we)?(le="",N!=null&&(le=N.replace(L,"$&/")+"/"),Ze(we,$,le,"",function(pt){return pt})):we!=null&&(k(we)&&(we=A(we,le+(!we.key||Oe&&Oe.key===we.key?"":(""+we.key).replace(L,"$&/")+"/")+N)),$.push(we)),1;if(Oe=0,Ee=Ee===""?".":Ee+":",ve(N))for(var Me=0;Me<N.length;Me++){Pe=N[Me];var je=Ee+S(Pe,Me);Oe+=Ze(Pe,$,le,je,we)}else if(je=x(N),typeof je=="function")for(N=je.call(N),Me=0;!(Pe=N.next()).done;)Pe=Pe.value,je=Ee+S(Pe,Me++),Oe+=Ze(Pe,$,le,je,we);else if(Pe==="object")throw $=String(N),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Oe}function Pt(N,$,le){if(N==null)return N;var Ee=[],we=0;return Ze(N,Ee,"","",function(Pe){return $.call(le,Pe,we++)}),Ee}function kt(N){if(N._status===-1){var $=N._result;$=$(),$.then(function(le){(N._status===0||N._status===-1)&&(N._status=1,N._result=le)},function(le){(N._status===0||N._status===-1)&&(N._status=2,N._result=le)}),N._status===-1&&(N._status=0,N._result=$)}if(N._status===1)return N._result.default;throw N._result}var Ue={current:null},J={transition:null},ce={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:J,ReactCurrentOwner:Se};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Te.Children={map:Pt,forEach:function(N,$,le){Pt(N,function(){$.apply(this,arguments)},le)},count:function(N){var $=0;return Pt(N,function(){$++}),$},toArray:function(N){return Pt(N,function($){return $})||[]},only:function(N){if(!k(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Te.Component=W,Te.Fragment=n,Te.Profiler=a,Te.PureComponent=ye,Te.StrictMode=s,Te.Suspense=y,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Te.act=ne,Te.cloneElement=function(N,$,le){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Ee=K({},N.props),we=N.key,Pe=N.ref,Oe=N._owner;if($!=null){if($.ref!==void 0&&(Pe=$.ref,Oe=Se.current),$.key!==void 0&&(we=""+$.key),N.type&&N.type.defaultProps)var Me=N.type.defaultProps;for(je in $)He.call($,je)&&!V.hasOwnProperty(je)&&(Ee[je]=$[je]===void 0&&Me!==void 0?Me[je]:$[je])}var je=arguments.length-2;if(je===1)Ee.children=le;else if(1<je){Me=Array(je);for(var pt=0;pt<je;pt++)Me[pt]=arguments[pt+2];Ee.children=Me}return{$$typeof:i,type:N.type,key:we,ref:Pe,props:Ee,_owner:Oe}},Te.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:c,_context:N},N.Consumer=N},Te.createElement=I,Te.createFactory=function(N){var $=I.bind(null,N);return $.type=N,$},Te.createRef=function(){return{current:null}},Te.forwardRef=function(N){return{$$typeof:m,render:N}},Te.isValidElement=k,Te.lazy=function(N){return{$$typeof:w,_payload:{_status:-1,_result:N},_init:kt}},Te.memo=function(N,$){return{$$typeof:E,type:N,compare:$===void 0?null:$}},Te.startTransition=function(N){var $=J.transition;J.transition={};try{N()}finally{J.transition=$}},Te.unstable_act=ne,Te.useCallback=function(N,$){return Ue.current.useCallback(N,$)},Te.useContext=function(N){return Ue.current.useContext(N)},Te.useDebugValue=function(){},Te.useDeferredValue=function(N){return Ue.current.useDeferredValue(N)},Te.useEffect=function(N,$){return Ue.current.useEffect(N,$)},Te.useId=function(){return Ue.current.useId()},Te.useImperativeHandle=function(N,$,le){return Ue.current.useImperativeHandle(N,$,le)},Te.useInsertionEffect=function(N,$){return Ue.current.useInsertionEffect(N,$)},Te.useLayoutEffect=function(N,$){return Ue.current.useLayoutEffect(N,$)},Te.useMemo=function(N,$){return Ue.current.useMemo(N,$)},Te.useReducer=function(N,$,le){return Ue.current.useReducer(N,$,le)},Te.useRef=function(N){return Ue.current.useRef(N)},Te.useState=function(N){return Ue.current.useState(N)},Te.useSyncExternalStore=function(N,$,le){return Ue.current.useSyncExternalStore(N,$,le)},Te.useTransition=function(){return Ue.current.useTransition()},Te.version="18.3.1",Te}var Ap;function Ch(){return Ap||(Ap=1,Wc.exports=v_()),Wc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function E_(){if(Rp)return $o;Rp=1;var i=Ch(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(m,y,E){var w,C={},x=null,B=null;E!==void 0&&(x=""+E),y.key!==void 0&&(x=""+y.key),y.ref!==void 0&&(B=y.ref);for(w in y)s.call(y,w)&&!c.hasOwnProperty(w)&&(C[w]=y[w]);if(m&&m.defaultProps)for(w in y=m.defaultProps,y)C[w]===void 0&&(C[w]=y[w]);return{$$typeof:e,type:m,key:x,ref:B,props:C,_owner:a.current}}return $o.Fragment=n,$o.jsx=h,$o.jsxs=h,$o}var Cp;function w_(){return Cp||(Cp=1,qc.exports=E_()),qc.exports}var Re=w_(),Hn=Ch(),kl={},Hc={exports:{}},Gt={},Qc={exports:{}},Gc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function T_(){return Pp||(Pp=1,function(i){function e(J,ce){var ne=J.length;J.push(ce);e:for(;0<ne;){var N=ne-1>>>1,$=J[N];if(0<a($,ce))J[N]=ce,J[ne]=$,ne=N;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ce=J[0],ne=J.pop();if(ne!==ce){J[0]=ne;e:for(var N=0,$=J.length,le=$>>>1;N<le;){var Ee=2*(N+1)-1,we=J[Ee],Pe=Ee+1,Oe=J[Pe];if(0>a(we,ne))Pe<$&&0>a(Oe,we)?(J[N]=Oe,J[Pe]=ne,N=Pe):(J[N]=we,J[Ee]=ne,N=Ee);else if(Pe<$&&0>a(Oe,ne))J[N]=Oe,J[Pe]=ne,N=Pe;else break e}}return ce}function a(J,ce){var ne=J.sortIndex-ce.sortIndex;return ne!==0?ne:J.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var y=[],E=[],w=1,C=null,x=3,B=!1,K=!1,X=!1,W=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function he(J){for(var ce=n(E);ce!==null;){if(ce.callback===null)s(E);else if(ce.startTime<=J)s(E),ce.sortIndex=ce.expirationTime,e(y,ce);else break;ce=n(E)}}function ve(J){if(X=!1,he(J),!K)if(n(y)!==null)K=!0,kt(He);else{var ce=n(E);ce!==null&&Ue(ve,ce.startTime-J)}}function He(J,ce){K=!1,X&&(X=!1,te(I),I=-1),B=!0;var ne=x;try{for(he(ce),C=n(y);C!==null&&(!(C.expirationTime>ce)||J&&!D());){var N=C.callback;if(typeof N=="function"){C.callback=null,x=C.priorityLevel;var $=N(C.expirationTime<=ce);ce=i.unstable_now(),typeof $=="function"?C.callback=$:C===n(y)&&s(y),he(ce)}else s(y);C=n(y)}if(C!==null)var le=!0;else{var Ee=n(E);Ee!==null&&Ue(ve,Ee.startTime-ce),le=!1}return le}finally{C=null,x=ne,B=!1}}var Se=!1,V=null,I=-1,A=5,k=-1;function D(){return!(i.unstable_now()-k<A)}function L(){if(V!==null){var J=i.unstable_now();k=J;var ce=!0;try{ce=V(!0,J)}finally{ce?S():(Se=!1,V=null)}}else Se=!1}var S;if(typeof ye=="function")S=function(){ye(L)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Pt=Ze.port2;Ze.port1.onmessage=L,S=function(){Pt.postMessage(null)}}else S=function(){W(L,0)};function kt(J){V=J,Se||(Se=!0,S())}function Ue(J,ce){I=W(function(){J(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){K||B||(K=!0,kt(He))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return n(y)},i.unstable_next=function(J){switch(x){case 1:case 2:case 3:var ce=3;break;default:ce=x}var ne=x;x=ce;try{return J()}finally{x=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,ce){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ne=x;x=J;try{return ce()}finally{x=ne}},i.unstable_scheduleCallback=function(J,ce,ne){var N=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?N+ne:N):ne=N,J){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ne+$,J={id:w++,callback:ce,priorityLevel:J,startTime:ne,expirationTime:$,sortIndex:-1},ne>N?(J.sortIndex=ne,e(E,J),n(y)===null&&J===n(E)&&(X?(te(I),I=-1):X=!0,Ue(ve,ne-N))):(J.sortIndex=$,e(y,J),K||B||(K=!0,kt(He))),J},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(J){var ce=x;return function(){var ne=x;x=ce;try{return J.apply(this,arguments)}finally{x=ne}}}}(Gc)),Gc}var kp;function I_(){return kp||(kp=1,Qc.exports=T_()),Qc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function S_(){if(Vp)return Gt;Vp=1;var i=Ch(),e=I_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){h(t,r),h(t+"Capture",r)}function h(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},C={};function x(t){return y.call(C,t)?!0:y.call(w,t)?!1:E.test(t)?C[t]=!0:(w[t]=!0,!1)}function B(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function K(t,r,o,u){if(r===null||typeof r>"u"||B(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function X(t,r,o,u,f,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){W[t]=new X(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];W[r]=new X(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){W[t]=new X(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){W[t]=new X(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){W[t]=new X(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){W[t]=new X(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){W[t]=new X(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){W[t]=new X(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){W[t]=new X(t,5,!1,t.toLowerCase(),null,!1,!1)});var te=/[\-:]([a-z])/g;function ye(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(te,ye);W[r]=new X(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(te,ye);W[r]=new X(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(te,ye);W[r]=new X(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){W[t]=new X(t,1,!1,t.toLowerCase(),null,!1,!1)}),W.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){W[t]=new X(t,1,!1,t.toLowerCase(),null,!0,!0)});function he(t,r,o,u){var f=W.hasOwnProperty(r)?W[r]:null;(f!==null?f.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(K(r,o,f,u)&&(o=null),u||f===null?x(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):f.mustUseProperty?t[f.propertyName]=o===null?f.type===3?!1:"":o:(r=f.attributeName,u=f.attributeNamespace,o===null?t.removeAttribute(r):(f=f.type,o=f===3||f===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var ve=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,He=Symbol.for("react.element"),Se=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),Pt=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),J=Symbol.iterator;function ce(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,N;function $(t){if(N===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+t}var le=!1;function Ee(t,r){if(!t||le)return"";le=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var f=U.stack.split(`
`),p=u.stack.split(`
`),_=f.length-1,T=p.length-1;1<=_&&0<=T&&f[_]!==p[T];)T--;for(;1<=_&&0<=T;_--,T--)if(f[_]!==p[T]){if(_!==1||T!==1)do if(_--,T--,0>T||f[_]!==p[T]){var R=`
`+f[_].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=_&&0<=T);break}}}finally{le=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?$(t):""}function we(t){switch(t.tag){case 5:return $(t.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return t=Ee(t.type,!1),t;case 11:return t=Ee(t.type.render,!1),t;case 1:return t=Ee(t.type,!0),t;default:return""}}function Pe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case Se:return"Portal";case A:return"Profiler";case I:return"StrictMode";case S:return"Suspense";case Ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case L:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pt:return r=t.displayName||null,r!==null?r:Pe(t.type)||"Memo";case kt:r=t._payload,t=t._init;try{return Pe(t(r))}catch{}}return null}function Oe(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Me(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function je(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pt(t){var r=je(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Xn(t){t._valueTracker||(t._valueTracker=pt(t))}function Mi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=je(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function yr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ni(t,r){var o=r.checked;return ne({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Fi(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Me(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Gs(t,r){r=r.checked,r!=null&&he(t,"checked",r,!1)}function Ks(t,r){Gs(t,r);var o=Me(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Ui(t,r.type,o):r.hasOwnProperty("defaultValue")&&Ui(t,r.type,Me(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function pa(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Ui(t,r,o){(r!=="number"||yr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Yn=Array.isArray;function Jn(t,r,o,u){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Me(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,u&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Xs(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(Yn(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Me(o)}}function Bi(t,r){var o=Me(r.value),u=Me(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Ys(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?at(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zn,Js=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,f){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,f)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Zn=Zn||document.createElement("div"),Zn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Zn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function _r(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ii=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){ii.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ri[r]=ri[t]})});function Zs(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ri.hasOwnProperty(t)&&ri[t]?(""+r).trim():r+"px"}function eo(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,f=Zs(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,f):t[o]=f}}var to=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function no(t,r){if(r){if(to[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function ro(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var si=null;function ji(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bi=null,ln=null,On=null;function $i(t){if(t=Po(t)){if(typeof bi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=qa(r),bi(t.stateNode,t.type,r))}}function Mn(t){ln?On?On.push(t):On=[t]:ln=t}function io(){if(ln){var t=ln,r=On;if(On=ln=null,$i(t),r)for(t=0;t<r.length;t++)$i(r[t])}}function oi(t,r){return t(r)}function so(){}var er=!1;function oo(t,r,o){if(er)return t(r,o);er=!0;try{return oi(t,r,o)}finally{er=!1,(ln!==null||On!==null)&&(so(),io())}}function et(t,r){var o=t.stateNode;if(o===null)return null;var u=qa(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var qi=!1;if(m)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){qi=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{qi=!1}function ai(t,r,o,u,f,p,_,T,R){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(H){this.onError(H)}}var li=!1,Wi=null,vn=!1,ao=null,_u={onError:function(t){li=!0,Wi=t}};function Hi(t,r,o,u,f,p,_,T,R){li=!1,Wi=null,ai.apply(_u,arguments)}function ma(t,r,o,u,f,p,_,T,R){if(Hi.apply(this,arguments),li){if(li){var U=Wi;li=!1,Wi=null}else throw Error(n(198));vn||(vn=!0,ao=U)}}function En(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function ui(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function wn(t){if(En(t)!==t)throw Error(n(188))}function ga(t){var r=t.alternate;if(!r){if(r=En(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return wn(f),t;if(p===u)return wn(f),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=f,u=p;else{for(var _=!1,T=f.child;T;){if(T===o){_=!0,o=f,u=p;break}if(T===u){_=!0,u=f,o=p;break}T=T.sibling}if(!_){for(T=p.child;T;){if(T===o){_=!0,o=p,u=f;break}if(T===u){_=!0,u=p,o=f;break}T=T.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function lo(t){return t=ga(t),t!==null?Qi(t):null}function Qi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Qi(t);if(r!==null)return r;t=t.sibling}return null}var Gi=e.unstable_scheduleCallback,uo=e.unstable_cancelCallback,ya=e.unstable_shouldYield,vu=e.unstable_requestPaint,be=e.unstable_now,_a=e.unstable_getCurrentPriorityLevel,ci=e.unstable_ImmediatePriority,vr=e.unstable_UserBlockingPriority,un=e.unstable_NormalPriority,co=e.unstable_LowPriority,va=e.unstable_IdlePriority,hi=null,Jt=null;function Ea(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(hi,t,void 0,(t.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:Ta,ho=Math.log,wa=Math.LN2;function Ta(t){return t>>>=0,t===0?32:31-(ho(t)/wa|0)|0}var Ki=64,Xi=4194304;function Er(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fi(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,f=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var T=_&~f;T!==0?u=Er(T):(p&=_,p!==0&&(u=Er(p)))}else _=o&~f,_!==0?u=Er(_):p!==0&&(u=Er(p));if(u===0)return 0;if(r!==0&&r!==u&&!(r&f)&&(f=u&-u,p=r&-r,f>=p||f===16&&(p&4194240)!==0))return r;if(u&4&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Mt(r),f=1<<o,u|=t[o],r&=~f;return u}function Eu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tr(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Mt(p),T=1<<_,R=f[_];R===-1?(!(T&o)||T&u)&&(f[_]=Eu(T,r)):R<=r&&(t.expiredLanes|=T),p&=~T}}function Zt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function di(){var t=Ki;return Ki<<=1,!(Ki&4194240)&&(Ki=64),t}function wr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Tr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Mt(r),t[r]=o}function ze(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var f=31-Mt(o),p=1<<f;r[f]=0,u[f]=-1,t[f]=-1,o&=~p}}function Ir(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Mt(o),f=1<<u;f&r|t[u]&r&&(t[u]|=r),o&=~f}}var Ae=0;function Sr(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ia,Yi,Sa,Aa,Ra,fo=!1,Fn=[],wt=null,Tn=null,In=null,Ar=new Map,cn=new Map,Un=[],wu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ca(t,r){switch(t){case"focusin":case"focusout":wt=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":Ar.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cn.delete(r.pointerId)}}function jt(t,r,o,u,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},r!==null&&(r=Po(r),r!==null&&Yi(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function Tu(t,r,o,u,f){switch(r){case"focusin":return wt=jt(wt,t,r,o,u,f),!0;case"dragenter":return Tn=jt(Tn,t,r,o,u,f),!0;case"mouseover":return In=jt(In,t,r,o,u,f),!0;case"pointerover":var p=f.pointerId;return Ar.set(p,jt(Ar.get(p)||null,t,r,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,cn.set(p,jt(cn.get(p)||null,t,r,o,u,f)),!0}return!1}function Pa(t){var r=_i(t.target);if(r!==null){var o=En(r);if(o!==null){if(r=o.tag,r===13){if(r=ui(o),r!==null){t.blockedOn=r,Ra(t.priority,function(){Sa(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=Ji(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);si=u,o.target.dispatchEvent(u),si=null}else return r=Po(o),r!==null&&Yi(r),t.blockedOn=o,!1;r.shift()}return!0}function pi(t,r,o){nr(t)&&o.delete(r)}function ka(){fo=!1,wt!==null&&nr(wt)&&(wt=null),Tn!==null&&nr(Tn)&&(Tn=null),In!==null&&nr(In)&&(In=null),Ar.forEach(pi),cn.forEach(pi)}function Sn(t,r){t.blockedOn===r&&(t.blockedOn=null,fo||(fo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ka)))}function An(t){function r(f){return Sn(f,t)}if(0<Fn.length){Sn(Fn[0],t);for(var o=1;o<Fn.length;o++){var u=Fn[o];u.blockedOn===t&&(u.blockedOn=null)}}for(wt!==null&&Sn(wt,t),Tn!==null&&Sn(Tn,t),In!==null&&Sn(In,t),Ar.forEach(r),cn.forEach(r),o=0;o<Un.length;o++)u=Un[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Un.length&&(o=Un[0],o.blockedOn===null);)Pa(o),o.blockedOn===null&&Un.shift()}var rr=ve.ReactCurrentBatchConfig,Rr=!0;function Qe(t,r,o,u){var f=Ae,p=rr.transition;rr.transition=null;try{Ae=1,po(t,r,o,u)}finally{Ae=f,rr.transition=p}}function Iu(t,r,o,u){var f=Ae,p=rr.transition;rr.transition=null;try{Ae=4,po(t,r,o,u)}finally{Ae=f,rr.transition=p}}function po(t,r,o,u){if(Rr){var f=Ji(t,r,o,u);if(f===null)Lu(t,r,u,mi,o),Ca(t,u);else if(Tu(f,t,r,o,u))u.stopPropagation();else if(Ca(t,u),r&4&&-1<wu.indexOf(t)){for(;f!==null;){var p=Po(f);if(p!==null&&Ia(p),p=Ji(t,r,o,u),p===null&&Lu(t,r,u,mi,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Lu(t,r,u,null,o)}}var mi=null;function Ji(t,r,o,u){if(mi=null,t=ji(u),t=_i(t),t!==null)if(r=En(t),r===null)t=null;else if(o=r.tag,o===13){if(t=ui(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return mi=t,null}function mo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_a()){case ci:return 1;case vr:return 4;case un:case co:return 16;case va:return 536870912;default:return 16}default:return 16}}var en=null,Zi=null,bt=null;function go(){if(bt)return bt;var t,r=Zi,o=r.length,u,f="value"in en?en.value:en.textContent,p=f.length;for(t=0;t<o&&r[t]===f[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===f[p-u];u++);return bt=f.slice(t,1<u?1-u:void 0)}function es(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function zn(){return!0}function yo(){return!1}function Tt(t){function r(o,u,f,p,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?zn:yo,this.isPropagationStopped=yo,this}return ne(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),r}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=Tt(Rn),Bn=ne({},Rn,{view:0,detail:0}),Su=Tt(Bn),ns,ir,Cr,gi=ne({},Bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cr&&(Cr&&t.type==="mousemove"?(ns=t.screenX-Cr.screenX,ir=t.screenY-Cr.screenY):ir=ns=0,Cr=t),ns)},movementY:function(t){return"movementY"in t?t.movementY:ir}}),rs=Tt(gi),_o=ne({},gi,{dataTransfer:0}),Va=Tt(_o),is=ne({},Bn,{relatedTarget:0}),ss=Tt(is),Da=ne({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),sr=Tt(Da),Na=ne({},Rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xa=Tt(Na),La=ne({},Rn,{data:0}),vo=Tt(La),os={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ft={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ma(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Oa[t])?!!r[t]:!1}function jn(){return Ma}var l=ne({},Bn,{key:function(t){if(t.key){var r=os[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=es(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ft[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(t){return t.type==="keypress"?es(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?es(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Tt(l),g=ne({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v=Tt(g),O=ne({},Bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn}),z=Tt(O),Y=ne({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fe=Tt(Y),ut=ne({},gi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ke=Tt(ut),mt=[9,13,27,32],rt=m&&"CompositionEvent"in window,hn=null;m&&"documentMode"in document&&(hn=document.documentMode);var tn=m&&"TextEvent"in window&&!hn,yi=m&&(!rt||hn&&8<hn&&11>=hn),as=" ",_f=!1;function vf(t,r){switch(t){case"keyup":return mt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ef(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ls=!1;function gy(t,r){switch(t){case"compositionend":return Ef(r);case"keypress":return r.which!==32?null:(_f=!0,as);case"textInput":return t=r.data,t===as&&_f?null:t;default:return null}}function yy(t,r){if(ls)return t==="compositionend"||!rt&&vf(t,r)?(t=go(),bt=Zi=en=null,ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yi&&r.locale!=="ko"?null:r.data;default:return null}}var _y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!_y[t.type]:r==="textarea"}function Tf(t,r,o,u){Mn(u),r=ja(r,"onChange"),0<r.length&&(o=new ts("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Eo=null,wo=null;function vy(t){Bf(t,0)}function Fa(t){var r=ds(t);if(Mi(r))return t}function Ey(t,r){if(t==="change")return r}var If=!1;if(m){var Au;if(m){var Ru="oninput"in document;if(!Ru){var Sf=document.createElement("div");Sf.setAttribute("oninput","return;"),Ru=typeof Sf.oninput=="function"}Au=Ru}else Au=!1;If=Au&&(!document.documentMode||9<document.documentMode)}function Af(){Eo&&(Eo.detachEvent("onpropertychange",Rf),wo=Eo=null)}function Rf(t){if(t.propertyName==="value"&&Fa(wo)){var r=[];Tf(r,wo,t,ji(t)),oo(vy,r)}}function wy(t,r,o){t==="focusin"?(Af(),Eo=r,wo=o,Eo.attachEvent("onpropertychange",Rf)):t==="focusout"&&Af()}function Ty(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fa(wo)}function Iy(t,r){if(t==="click")return Fa(r)}function Sy(t,r){if(t==="input"||t==="change")return Fa(r)}function Ay(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Cn=typeof Object.is=="function"?Object.is:Ay;function To(t,r){if(Cn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!y.call(r,f)||!Cn(t[f],r[f]))return!1}return!0}function Cf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pf(t,r){var o=Cf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Cf(o)}}function kf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?kf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Vf(){for(var t=window,r=yr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=yr(t.document)}return r}function Cu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Ry(t){var r=Vf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&kf(o.ownerDocument.documentElement,o)){if(u!==null&&Cu(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var f=o.textContent.length,p=Math.min(u.start,f);u=u.end===void 0?p:Math.min(u.end,f),!t.extend&&p>u&&(f=u,u=p,p=f),f=Pf(o,p);var _=Pf(o,u);f&&_&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Cy=m&&"documentMode"in document&&11>=document.documentMode,us=null,Pu=null,Io=null,ku=!1;function Df(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ku||us==null||us!==yr(u)||(u=us,"selectionStart"in u&&Cu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Io&&To(Io,u)||(Io=u,u=ja(Pu,"onSelect"),0<u.length&&(r=new ts("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=us)))}function Ua(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var cs={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionend:Ua("Transition","TransitionEnd")},Vu={},Nf={};m&&(Nf=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function za(t){if(Vu[t])return Vu[t];if(!cs[t])return t;var r=cs[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Nf)return Vu[t]=r[o];return t}var xf=za("animationend"),Lf=za("animationiteration"),Of=za("animationstart"),Mf=za("transitionend"),Ff=new Map,Uf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,r){Ff.set(t,r),c(r,[t])}for(var Du=0;Du<Uf.length;Du++){var Nu=Uf[Du],Py=Nu.toLowerCase(),ky=Nu[0].toUpperCase()+Nu.slice(1);Pr(Py,"on"+ky)}Pr(xf,"onAnimationEnd"),Pr(Lf,"onAnimationIteration"),Pr(Of,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Mf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vy=new Set("cancel close invalid load scroll toggle".split(" ").concat(So));function zf(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,ma(u,r,void 0,t),t.currentTarget=null}function Bf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],f=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],R=T.instance,U=T.currentTarget;if(T=T.listener,R!==p&&f.isPropagationStopped())break e;zf(f,T,U),p=R}else for(_=0;_<u.length;_++){if(T=u[_],R=T.instance,U=T.currentTarget,T=T.listener,R!==p&&f.isPropagationStopped())break e;zf(f,T,U),p=R}}}if(vn)throw t=ao,vn=!1,ao=null,t}function qe(t,r){var o=r[Bu];o===void 0&&(o=r[Bu]=new Set);var u=t+"__bubble";o.has(u)||(jf(r,t,2,!1),o.add(u))}function xu(t,r,o){var u=0;r&&(u|=4),jf(o,t,u,r)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function Ao(t){if(!t[Ba]){t[Ba]=!0,s.forEach(function(o){o!=="selectionchange"&&(Vy.has(o)||xu(o,!1,t),xu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ba]||(r[Ba]=!0,xu("selectionchange",!1,r))}}function jf(t,r,o,u){switch(mo(r)){case 1:var f=Qe;break;case 4:f=Iu;break;default:f=po}o=f.bind(null,r,o,t),f=void 0,!qi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function Lu(t,r,o,u,f){var p=u;if(!(r&1)&&!(r&2)&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(_===4)for(_=u.return;_!==null;){var R=_.tag;if((R===3||R===4)&&(R=_.stateNode.containerInfo,R===f||R.nodeType===8&&R.parentNode===f))return;_=_.return}for(;T!==null;){if(_=_i(T),_===null)return;if(R=_.tag,R===5||R===6){u=p=_;continue e}T=T.parentNode}}u=u.return}oo(function(){var U=p,H=ji(o),Q=[];e:{var q=Ff.get(t);if(q!==void 0){var Z=ts,se=t;switch(t){case"keypress":if(es(o)===0)break e;case"keydown":case"keyup":Z=d;break;case"focusin":se="focus",Z=ss;break;case"focusout":se="blur",Z=ss;break;case"beforeblur":case"afterblur":Z=ss;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=rs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Va;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=z;break;case xf:case Lf:case Of:Z=sr;break;case Mf:Z=Fe;break;case"scroll":Z=Su;break;case"wheel":Z=ke;break;case"copy":case"cut":case"paste":Z=xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=v}var oe=(r&4)!==0,tt=!oe&&t==="scroll",M=oe?q!==null?q+"Capture":null:q;oe=[];for(var P=U,F;P!==null;){F=P;var G=F.stateNode;if(F.tag===5&&G!==null&&(F=G,M!==null&&(G=et(P,M),G!=null&&oe.push(Ro(P,G,F)))),tt)break;P=P.return}0<oe.length&&(q=new Z(q,se,null,o,H),Q.push({event:q,listeners:oe}))}}if(!(r&7)){e:{if(q=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",q&&o!==si&&(se=o.relatedTarget||o.fromElement)&&(_i(se)||se[or]))break e;if((Z||q)&&(q=H.window===H?H:(q=H.ownerDocument)?q.defaultView||q.parentWindow:window,Z?(se=o.relatedTarget||o.toElement,Z=U,se=se?_i(se):null,se!==null&&(tt=En(se),se!==tt||se.tag!==5&&se.tag!==6)&&(se=null)):(Z=null,se=U),Z!==se)){if(oe=rs,G="onMouseLeave",M="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(oe=v,G="onPointerLeave",M="onPointerEnter",P="pointer"),tt=Z==null?q:ds(Z),F=se==null?q:ds(se),q=new oe(G,P+"leave",Z,o,H),q.target=tt,q.relatedTarget=F,G=null,_i(H)===U&&(oe=new oe(M,P+"enter",se,o,H),oe.target=F,oe.relatedTarget=tt,G=oe),tt=G,Z&&se)t:{for(oe=Z,M=se,P=0,F=oe;F;F=hs(F))P++;for(F=0,G=M;G;G=hs(G))F++;for(;0<P-F;)oe=hs(oe),P--;for(;0<F-P;)M=hs(M),F--;for(;P--;){if(oe===M||M!==null&&oe===M.alternate)break t;oe=hs(oe),M=hs(M)}oe=null}else oe=null;Z!==null&&bf(Q,q,Z,oe,!1),se!==null&&tt!==null&&bf(Q,tt,se,oe,!0)}}e:{if(q=U?ds(U):window,Z=q.nodeName&&q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&q.type==="file")var ae=Ey;else if(wf(q))if(If)ae=Sy;else{ae=Ty;var fe=wy}else(Z=q.nodeName)&&Z.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ae=Iy);if(ae&&(ae=ae(t,U))){Tf(Q,ae,o,H);break e}fe&&fe(t,q,U),t==="focusout"&&(fe=q._wrapperState)&&fe.controlled&&q.type==="number"&&Ui(q,"number",q.value)}switch(fe=U?ds(U):window,t){case"focusin":(wf(fe)||fe.contentEditable==="true")&&(us=fe,Pu=U,Io=null);break;case"focusout":Io=Pu=us=null;break;case"mousedown":ku=!0;break;case"contextmenu":case"mouseup":case"dragend":ku=!1,Df(Q,o,H);break;case"selectionchange":if(Cy)break;case"keydown":case"keyup":Df(Q,o,H)}var de;if(rt)e:{switch(t){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else ls?vf(t,o)&&(ge="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ge="onCompositionStart");ge&&(yi&&o.locale!=="ko"&&(ls||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&ls&&(de=go()):(en=H,Zi="value"in en?en.value:en.textContent,ls=!0)),fe=ja(U,ge),0<fe.length&&(ge=new vo(ge,t,null,o,H),Q.push({event:ge,listeners:fe}),de?ge.data=de:(de=Ef(o),de!==null&&(ge.data=de)))),(de=tn?gy(t,o):yy(t,o))&&(U=ja(U,"onBeforeInput"),0<U.length&&(H=new vo("onBeforeInput","beforeinput",null,o,H),Q.push({event:H,listeners:U}),H.data=de))}Bf(Q,r)})}function Ro(t,r,o){return{instance:t,listener:r,currentTarget:o}}function ja(t,r){for(var o=r+"Capture",u=[];t!==null;){var f=t,p=f.stateNode;f.tag===5&&p!==null&&(f=p,p=et(t,o),p!=null&&u.unshift(Ro(t,p,f)),p=et(t,r),p!=null&&u.push(Ro(t,p,f))),t=t.return}return u}function hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bf(t,r,o,u,f){for(var p=r._reactName,_=[];o!==null&&o!==u;){var T=o,R=T.alternate,U=T.stateNode;if(R!==null&&R===u)break;T.tag===5&&U!==null&&(T=U,f?(R=et(o,p),R!=null&&_.unshift(Ro(o,R,T))):f||(R=et(o,p),R!=null&&_.push(Ro(o,R,T)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var Dy=/\r\n?/g,Ny=/\u0000|\uFFFD/g;function $f(t){return(typeof t=="string"?t:""+t).replace(Dy,`
`).replace(Ny,"")}function ba(t,r,o){if(r=$f(r),$f(t)!==r&&o)throw Error(n(425))}function $a(){}var Ou=null,Mu=null;function Fu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Uu=typeof setTimeout=="function"?setTimeout:void 0,xy=typeof clearTimeout=="function"?clearTimeout:void 0,qf=typeof Promise=="function"?Promise:void 0,Ly=typeof queueMicrotask=="function"?queueMicrotask:typeof qf<"u"?function(t){return qf.resolve(null).then(t).catch(Oy)}:Uu;function Oy(t){setTimeout(function(){throw t})}function zu(t,r){var o=r,u=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(u===0){t.removeChild(f),An(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=f}while(o);An(r)}function kr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Wf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var fs=Math.random().toString(36).slice(2),bn="__reactFiber$"+fs,Co="__reactProps$"+fs,or="__reactContainer$"+fs,Bu="__reactEvents$"+fs,My="__reactListeners$"+fs,Fy="__reactHandles$"+fs;function _i(t){var r=t[bn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[or]||o[bn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Wf(t);t!==null;){if(o=t[bn])return o;t=Wf(t)}return r}t=o,o=t.parentNode}return null}function Po(t){return t=t[bn]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function qa(t){return t[Co]||null}var ju=[],ps=-1;function Vr(t){return{current:t}}function We(t){0>ps||(t.current=ju[ps],ju[ps]=null,ps--)}function $e(t,r){ps++,ju[ps]=t.current,t.current=r}var Dr={},Vt=Vr(Dr),$t=Vr(!1),vi=Dr;function ms(t,r){var o=t.type.contextTypes;if(!o)return Dr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var f={},p;for(p in o)f[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=f),f}function qt(t){return t=t.childContextTypes,t!=null}function Wa(){We($t),We(Vt)}function Hf(t,r,o){if(Vt.current!==Dr)throw Error(n(168));$e(Vt,r),$e($t,o)}function Qf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var f in u)if(!(f in r))throw Error(n(108,Oe(t)||"Unknown",f));return ne({},o,u)}function Ha(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dr,vi=Vt.current,$e(Vt,t),$e($t,$t.current),!0}function Gf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Qf(t,r,vi),u.__reactInternalMemoizedMergedChildContext=t,We($t),We(Vt),$e(Vt,t)):We($t),$e($t,o)}var ar=null,Qa=!1,bu=!1;function Kf(t){ar===null?ar=[t]:ar.push(t)}function Uy(t){Qa=!0,Kf(t)}function Nr(){if(!bu&&ar!==null){bu=!0;var t=0,r=Ae;try{var o=ar;for(Ae=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}ar=null,Qa=!1}catch(f){throw ar!==null&&(ar=ar.slice(t+1)),Gi(ci,Nr),f}finally{Ae=r,bu=!1}}return null}var gs=[],ys=0,Ga=null,Ka=0,fn=[],dn=0,Ei=null,lr=1,ur="";function wi(t,r){gs[ys++]=Ka,gs[ys++]=Ga,Ga=t,Ka=r}function Xf(t,r,o){fn[dn++]=lr,fn[dn++]=ur,fn[dn++]=Ei,Ei=t;var u=lr;t=ur;var f=32-Mt(u)-1;u&=~(1<<f),o+=1;var p=32-Mt(r)+f;if(30<p){var _=f-f%5;p=(u&(1<<_)-1).toString(32),u>>=_,f-=_,lr=1<<32-Mt(r)+f|o<<f|u,ur=p+t}else lr=1<<p|o<<f|u,ur=t}function $u(t){t.return!==null&&(wi(t,1),Xf(t,1,0))}function qu(t){for(;t===Ga;)Ga=gs[--ys],gs[ys]=null,Ka=gs[--ys],gs[ys]=null;for(;t===Ei;)Ei=fn[--dn],fn[dn]=null,ur=fn[--dn],fn[dn]=null,lr=fn[--dn],fn[dn]=null}var nn=null,rn=null,Ge=!1,Pn=null;function Yf(t,r){var o=yn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Jf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,nn=t,rn=kr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,nn=t,rn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ei!==null?{id:lr,overflow:ur}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=yn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,nn=t,rn=null,!0):!1;default:return!1}}function Wu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hu(t){if(Ge){var r=rn;if(r){var o=r;if(!Jf(t,r)){if(Wu(t))throw Error(n(418));r=kr(o.nextSibling);var u=nn;r&&Jf(t,r)?Yf(u,o):(t.flags=t.flags&-4097|2,Ge=!1,nn=t)}}else{if(Wu(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ge=!1,nn=t}}}function Zf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function Xa(t){if(t!==nn)return!1;if(!Ge)return Zf(t),Ge=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Fu(t.type,t.memoizedProps)),r&&(r=rn)){if(Wu(t))throw ed(),Error(n(418));for(;r;)Yf(t,r),r=kr(r.nextSibling)}if(Zf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){rn=kr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}rn=null}}else rn=nn?kr(t.stateNode.nextSibling):null;return!0}function ed(){for(var t=rn;t;)t=kr(t.nextSibling)}function _s(){rn=nn=null,Ge=!1}function Qu(t){Pn===null?Pn=[t]:Pn.push(t)}var zy=ve.ReactCurrentBatchConfig;function ko(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var f=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var T=f.refs;_===null?delete T[p]:T[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Ya(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function td(t){var r=t._init;return r(t._payload)}function nd(t){function r(M,P){if(t){var F=M.deletions;F===null?(M.deletions=[P],M.flags|=16):F.push(P)}}function o(M,P){if(!t)return null;for(;P!==null;)r(M,P),P=P.sibling;return null}function u(M,P){for(M=new Map;P!==null;)P.key!==null?M.set(P.key,P):M.set(P.index,P),P=P.sibling;return M}function f(M,P){return M=Br(M,P),M.index=0,M.sibling=null,M}function p(M,P,F){return M.index=F,t?(F=M.alternate,F!==null?(F=F.index,F<P?(M.flags|=2,P):F):(M.flags|=2,P)):(M.flags|=1048576,P)}function _(M){return t&&M.alternate===null&&(M.flags|=2),M}function T(M,P,F,G){return P===null||P.tag!==6?(P=Uc(F,M.mode,G),P.return=M,P):(P=f(P,F),P.return=M,P)}function R(M,P,F,G){var ae=F.type;return ae===V?H(M,P,F.props.children,G,F.key):P!==null&&(P.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===kt&&td(ae)===P.type)?(G=f(P,F.props),G.ref=ko(M,P,F),G.return=M,G):(G=wl(F.type,F.key,F.props,null,M.mode,G),G.ref=ko(M,P,F),G.return=M,G)}function U(M,P,F,G){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=zc(F,M.mode,G),P.return=M,P):(P=f(P,F.children||[]),P.return=M,P)}function H(M,P,F,G,ae){return P===null||P.tag!==7?(P=ki(F,M.mode,G,ae),P.return=M,P):(P=f(P,F),P.return=M,P)}function Q(M,P,F){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Uc(""+P,M.mode,F),P.return=M,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case He:return F=wl(P.type,P.key,P.props,null,M.mode,F),F.ref=ko(M,null,P),F.return=M,F;case Se:return P=zc(P,M.mode,F),P.return=M,P;case kt:var G=P._init;return Q(M,G(P._payload),F)}if(Yn(P)||ce(P))return P=ki(P,M.mode,F,null),P.return=M,P;Ya(M,P)}return null}function q(M,P,F,G){var ae=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ae!==null?null:T(M,P,""+F,G);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case He:return F.key===ae?R(M,P,F,G):null;case Se:return F.key===ae?U(M,P,F,G):null;case kt:return ae=F._init,q(M,P,ae(F._payload),G)}if(Yn(F)||ce(F))return ae!==null?null:H(M,P,F,G,null);Ya(M,F)}return null}function Z(M,P,F,G,ae){if(typeof G=="string"&&G!==""||typeof G=="number")return M=M.get(F)||null,T(P,M,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case He:return M=M.get(G.key===null?F:G.key)||null,R(P,M,G,ae);case Se:return M=M.get(G.key===null?F:G.key)||null,U(P,M,G,ae);case kt:var fe=G._init;return Z(M,P,F,fe(G._payload),ae)}if(Yn(G)||ce(G))return M=M.get(F)||null,H(P,M,G,ae,null);Ya(P,G)}return null}function se(M,P,F,G){for(var ae=null,fe=null,de=P,ge=P=0,_t=null;de!==null&&ge<F.length;ge++){de.index>ge?(_t=de,de=null):_t=de.sibling;var Le=q(M,de,F[ge],G);if(Le===null){de===null&&(de=_t);break}t&&de&&Le.alternate===null&&r(M,de),P=p(Le,P,ge),fe===null?ae=Le:fe.sibling=Le,fe=Le,de=_t}if(ge===F.length)return o(M,de),Ge&&wi(M,ge),ae;if(de===null){for(;ge<F.length;ge++)de=Q(M,F[ge],G),de!==null&&(P=p(de,P,ge),fe===null?ae=de:fe.sibling=de,fe=de);return Ge&&wi(M,ge),ae}for(de=u(M,de);ge<F.length;ge++)_t=Z(de,M,ge,F[ge],G),_t!==null&&(t&&_t.alternate!==null&&de.delete(_t.key===null?ge:_t.key),P=p(_t,P,ge),fe===null?ae=_t:fe.sibling=_t,fe=_t);return t&&de.forEach(function(jr){return r(M,jr)}),Ge&&wi(M,ge),ae}function oe(M,P,F,G){var ae=ce(F);if(typeof ae!="function")throw Error(n(150));if(F=ae.call(F),F==null)throw Error(n(151));for(var fe=ae=null,de=P,ge=P=0,_t=null,Le=F.next();de!==null&&!Le.done;ge++,Le=F.next()){de.index>ge?(_t=de,de=null):_t=de.sibling;var jr=q(M,de,Le.value,G);if(jr===null){de===null&&(de=_t);break}t&&de&&jr.alternate===null&&r(M,de),P=p(jr,P,ge),fe===null?ae=jr:fe.sibling=jr,fe=jr,de=_t}if(Le.done)return o(M,de),Ge&&wi(M,ge),ae;if(de===null){for(;!Le.done;ge++,Le=F.next())Le=Q(M,Le.value,G),Le!==null&&(P=p(Le,P,ge),fe===null?ae=Le:fe.sibling=Le,fe=Le);return Ge&&wi(M,ge),ae}for(de=u(M,de);!Le.done;ge++,Le=F.next())Le=Z(de,M,ge,Le.value,G),Le!==null&&(t&&Le.alternate!==null&&de.delete(Le.key===null?ge:Le.key),P=p(Le,P,ge),fe===null?ae=Le:fe.sibling=Le,fe=Le);return t&&de.forEach(function(y_){return r(M,y_)}),Ge&&wi(M,ge),ae}function tt(M,P,F,G){if(typeof F=="object"&&F!==null&&F.type===V&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case He:e:{for(var ae=F.key,fe=P;fe!==null;){if(fe.key===ae){if(ae=F.type,ae===V){if(fe.tag===7){o(M,fe.sibling),P=f(fe,F.props.children),P.return=M,M=P;break e}}else if(fe.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===kt&&td(ae)===fe.type){o(M,fe.sibling),P=f(fe,F.props),P.ref=ko(M,fe,F),P.return=M,M=P;break e}o(M,fe);break}else r(M,fe);fe=fe.sibling}F.type===V?(P=ki(F.props.children,M.mode,G,F.key),P.return=M,M=P):(G=wl(F.type,F.key,F.props,null,M.mode,G),G.ref=ko(M,P,F),G.return=M,M=G)}return _(M);case Se:e:{for(fe=F.key;P!==null;){if(P.key===fe)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){o(M,P.sibling),P=f(P,F.children||[]),P.return=M,M=P;break e}else{o(M,P);break}else r(M,P);P=P.sibling}P=zc(F,M.mode,G),P.return=M,M=P}return _(M);case kt:return fe=F._init,tt(M,P,fe(F._payload),G)}if(Yn(F))return se(M,P,F,G);if(ce(F))return oe(M,P,F,G);Ya(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,P!==null&&P.tag===6?(o(M,P.sibling),P=f(P,F),P.return=M,M=P):(o(M,P),P=Uc(F,M.mode,G),P.return=M,M=P),_(M)):o(M,P)}return tt}var vs=nd(!0),rd=nd(!1),Ja=Vr(null),Za=null,Es=null,Gu=null;function Ku(){Gu=Es=Za=null}function Xu(t){var r=Ja.current;We(Ja),t._currentValue=r}function Yu(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function ws(t,r){Za=t,Gu=Es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Wt=!0),t.firstContext=null)}function pn(t){var r=t._currentValue;if(Gu!==t)if(t={context:t,memoizedValue:r,next:null},Es===null){if(Za===null)throw Error(n(308));Es=t,Za.dependencies={lanes:0,firstContext:t}}else Es=Es.next=t;return r}var Ti=null;function Ju(t){Ti===null?Ti=[t]:Ti.push(t)}function id(t,r,o,u){var f=r.interleaved;return f===null?(o.next=o,Ju(r)):(o.next=f.next,f.next=o),r.interleaved=o,cr(t,u)}function cr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var xr=!1;function Zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Lr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,xe&2){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,cr(t,o)}return f=u.interleaved,f===null?(r.next=r,Ju(u)):(r.next=f.next,f.next=r),u.interleaved=r,cr(t,o)}function el(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Ir(t,o)}}function od(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?f=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?f=p=r:p=p.next=r}else f=p=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function tl(t,r,o,u){var f=t.updateQueue;xr=!1;var p=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var R=T,U=R.next;R.next=null,_===null?p=U:_.next=U,_=R;var H=t.alternate;H!==null&&(H=H.updateQueue,T=H.lastBaseUpdate,T!==_&&(T===null?H.firstBaseUpdate=U:T.next=U,H.lastBaseUpdate=R))}if(p!==null){var Q=f.baseState;_=0,H=U=R=null,T=p;do{var q=T.lane,Z=T.eventTime;if((u&q)===q){H!==null&&(H=H.next={eventTime:Z,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var se=t,oe=T;switch(q=r,Z=o,oe.tag){case 1:if(se=oe.payload,typeof se=="function"){Q=se.call(Z,Q,q);break e}Q=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=oe.payload,q=typeof se=="function"?se.call(Z,Q,q):se,q==null)break e;Q=ne({},Q,q);break e;case 2:xr=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,q=f.effects,q===null?f.effects=[T]:q.push(T))}else Z={eventTime:Z,lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},H===null?(U=H=Z,R=Q):H=H.next=Z,_|=q;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;q=T,T=q.next,q.next=null,f.lastBaseUpdate=q,f.shared.pending=null}}while(!0);if(H===null&&(R=Q),f.baseState=R,f.firstBaseUpdate=U,f.lastBaseUpdate=H,r=f.shared.interleaved,r!==null){f=r;do _|=f.lane,f=f.next;while(f!==r)}else p===null&&(f.shared.lanes=0);Ai|=_,t.lanes=_,t.memoizedState=Q}}function ad(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],f=u.callback;if(f!==null){if(u.callback=null,u=o,typeof f!="function")throw Error(n(191,f));f.call(u)}}}var Vo={},$n=Vr(Vo),Do=Vr(Vo),No=Vr(Vo);function Ii(t){if(t===Vo)throw Error(n(174));return t}function ec(t,r){switch($e(No,r),$e(Do,t),$e($n,Vo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:lt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=lt(r,t)}We($n),$e($n,r)}function Ts(){We($n),We(Do),We(No)}function ld(t){Ii(No.current);var r=Ii($n.current),o=lt(r,t.type);r!==o&&($e(Do,t),$e($n,o))}function tc(t){Do.current===t&&(We($n),We(Do))}var Ke=Vr(0);function nl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var nc=[];function rc(){for(var t=0;t<nc.length;t++)nc[t]._workInProgressVersionPrimary=null;nc.length=0}var rl=ve.ReactCurrentDispatcher,ic=ve.ReactCurrentBatchConfig,Si=0,Xe=null,ct=null,gt=null,il=!1,xo=!1,Lo=0,By=0;function Dt(){throw Error(n(321))}function sc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Cn(t[o],r[o]))return!1;return!0}function oc(t,r,o,u,f,p){if(Si=p,Xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,rl.current=t===null||t.memoizedState===null?qy:Wy,t=o(u,f),xo){p=0;do{if(xo=!1,Lo=0,25<=p)throw Error(n(301));p+=1,gt=ct=null,r.updateQueue=null,rl.current=Hy,t=o(u,f)}while(xo)}if(rl.current=al,r=ct!==null&&ct.next!==null,Si=0,gt=ct=Xe=null,il=!1,r)throw Error(n(300));return t}function ac(){var t=Lo!==0;return Lo=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Xe.memoizedState=gt=t:gt=gt.next=t,gt}function mn(){if(ct===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var r=gt===null?Xe.memoizedState:gt.next;if(r!==null)gt=r,ct=t;else{if(t===null)throw Error(n(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},gt===null?Xe.memoizedState=gt=t:gt=gt.next=t}return gt}function Oo(t,r){return typeof r=="function"?r(t):r}function lc(t){var r=mn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=ct,f=u.baseQueue,p=o.pending;if(p!==null){if(f!==null){var _=f.next;f.next=p.next,p.next=_}u.baseQueue=f=p,o.pending=null}if(f!==null){p=f.next,u=u.baseState;var T=_=null,R=null,U=p;do{var H=U.lane;if((Si&H)===H)R!==null&&(R=R.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var Q={lane:H,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};R===null?(T=R=Q,_=u):R=R.next=Q,Xe.lanes|=H,Ai|=H}U=U.next}while(U!==null&&U!==p);R===null?_=u:R.next=T,Cn(u,r.memoizedState)||(Wt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=R,o.lastRenderedState=u}if(t=o.interleaved,t!==null){f=t;do p=f.lane,Xe.lanes|=p,Ai|=p,f=f.next;while(f!==t)}else f===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function uc(t){var r=mn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,f=o.pending,p=r.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do p=t(p,_.action),_=_.next;while(_!==f);Cn(p,r.memoizedState)||(Wt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function ud(){}function cd(t,r){var o=Xe,u=mn(),f=r(),p=!Cn(u.memoizedState,f);if(p&&(u.memoizedState=f,Wt=!0),u=u.queue,cc(dd.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||gt!==null&&gt.memoizedState.tag&1){if(o.flags|=2048,Mo(9,fd.bind(null,o,u,f,r),void 0,null),yt===null)throw Error(n(349));Si&30||hd(o,r,f)}return f}function hd(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function fd(t,r,o,u){r.value=o,r.getSnapshot=u,pd(r)&&md(t)}function dd(t,r,o){return o(function(){pd(r)&&md(t)})}function pd(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Cn(t,o)}catch{return!0}}function md(t){var r=cr(t,1);r!==null&&Nn(r,t,1,-1)}function gd(t){var r=qn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},r.queue=t,t=t.dispatch=$y.bind(null,Xe,t),[r.memoizedState,t]}function Mo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function yd(){return mn().memoizedState}function sl(t,r,o,u){var f=qn();Xe.flags|=t,f.memoizedState=Mo(1|r,o,void 0,u===void 0?null:u)}function ol(t,r,o,u){var f=mn();u=u===void 0?null:u;var p=void 0;if(ct!==null){var _=ct.memoizedState;if(p=_.destroy,u!==null&&sc(u,_.deps)){f.memoizedState=Mo(r,o,p,u);return}}Xe.flags|=t,f.memoizedState=Mo(1|r,o,p,u)}function _d(t,r){return sl(8390656,8,t,r)}function cc(t,r){return ol(2048,8,t,r)}function vd(t,r){return ol(4,2,t,r)}function Ed(t,r){return ol(4,4,t,r)}function wd(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Td(t,r,o){return o=o!=null?o.concat([t]):null,ol(4,4,wd.bind(null,r,t),o)}function hc(){}function Id(t,r){var o=mn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&sc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Sd(t,r){var o=mn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&sc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Ad(t,r,o){return Si&21?(Cn(o,r)||(o=di(),Xe.lanes|=o,Ai|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=o)}function jy(t,r){var o=Ae;Ae=o!==0&&4>o?o:4,t(!0);var u=ic.transition;ic.transition={};try{t(!1),r()}finally{Ae=o,ic.transition=u}}function Rd(){return mn().memoizedState}function by(t,r,o){var u=Ur(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},Cd(t))Pd(r,o);else if(o=id(t,r,o,u),o!==null){var f=zt();Nn(o,t,u,f),kd(o,r,u)}}function $y(t,r,o){var u=Ur(t),f={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(Cd(t))Pd(r,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,T=p(_,o);if(f.hasEagerState=!0,f.eagerState=T,Cn(T,_)){var R=r.interleaved;R===null?(f.next=f,Ju(r)):(f.next=R.next,R.next=f),r.interleaved=f;return}}catch{}finally{}o=id(t,r,f,u),o!==null&&(f=zt(),Nn(o,t,u,f),kd(o,r,u))}}function Cd(t){var r=t.alternate;return t===Xe||r!==null&&r===Xe}function Pd(t,r){xo=il=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function kd(t,r,o){if(o&4194240){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Ir(t,o)}}var al={readContext:pn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},qy={readContext:pn,useCallback:function(t,r){return qn().memoizedState=[t,r===void 0?null:r],t},useContext:pn,useEffect:_d,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,sl(4194308,4,wd.bind(null,r,t),o)},useLayoutEffect:function(t,r){return sl(4194308,4,t,r)},useInsertionEffect:function(t,r){return sl(4,2,t,r)},useMemo:function(t,r){var o=qn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=qn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=by.bind(null,Xe,t),[u.memoizedState,t]},useRef:function(t){var r=qn();return t={current:t},r.memoizedState=t},useState:gd,useDebugValue:hc,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=gd(!1),r=t[0];return t=jy.bind(null,t[1]),qn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Xe,f=qn();if(Ge){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),yt===null)throw Error(n(349));Si&30||hd(u,r,o)}f.memoizedState=o;var p={value:o,getSnapshot:r};return f.queue=p,_d(dd.bind(null,u,p,t),[t]),u.flags|=2048,Mo(9,fd.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=qn(),r=yt.identifierPrefix;if(Ge){var o=ur,u=lr;o=(u&~(1<<32-Mt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Lo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=By++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Wy={readContext:pn,useCallback:Id,useContext:pn,useEffect:cc,useImperativeHandle:Td,useInsertionEffect:vd,useLayoutEffect:Ed,useMemo:Sd,useReducer:lc,useRef:yd,useState:function(){return lc(Oo)},useDebugValue:hc,useDeferredValue:function(t){var r=mn();return Ad(r,ct.memoizedState,t)},useTransition:function(){var t=lc(Oo)[0],r=mn().memoizedState;return[t,r]},useMutableSource:ud,useSyncExternalStore:cd,useId:Rd,unstable_isNewReconciler:!1},Hy={readContext:pn,useCallback:Id,useContext:pn,useEffect:cc,useImperativeHandle:Td,useInsertionEffect:vd,useLayoutEffect:Ed,useMemo:Sd,useReducer:uc,useRef:yd,useState:function(){return uc(Oo)},useDebugValue:hc,useDeferredValue:function(t){var r=mn();return ct===null?r.memoizedState=t:Ad(r,ct.memoizedState,t)},useTransition:function(){var t=uc(Oo)[0],r=mn().memoizedState;return[t,r]},useMutableSource:ud,useSyncExternalStore:cd,useId:Rd,unstable_isNewReconciler:!1};function kn(t,r){if(t&&t.defaultProps){r=ne({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function fc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ne({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var ll={isMounted:function(t){return(t=t._reactInternals)?En(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=zt(),f=Ur(t),p=hr(u,f);p.payload=r,o!=null&&(p.callback=o),r=Lr(t,p,f),r!==null&&(Nn(r,t,f,u),el(r,t,f))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=zt(),f=Ur(t),p=hr(u,f);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Lr(t,p,f),r!==null&&(Nn(r,t,f,u),el(r,t,f))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=zt(),u=Ur(t),f=hr(o,u);f.tag=2,r!=null&&(f.callback=r),r=Lr(t,f,u),r!==null&&(Nn(r,t,u,o),el(r,t,u))}};function Vd(t,r,o,u,f,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!To(o,u)||!To(f,p):!0}function Dd(t,r,o){var u=!1,f=Dr,p=r.contextType;return typeof p=="object"&&p!==null?p=pn(p):(f=qt(r)?vi:Vt.current,u=r.contextTypes,p=(u=u!=null)?ms(t,f):Dr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ll,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=p),r}function Nd(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&ll.enqueueReplaceState(r,r.state,null)}function dc(t,r,o,u){var f=t.stateNode;f.props=o,f.state=t.memoizedState,f.refs={},Zu(t);var p=r.contextType;typeof p=="object"&&p!==null?f.context=pn(p):(p=qt(r)?vi:Vt.current,f.context=ms(t,p)),f.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(fc(t,r,p,o),f.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&ll.enqueueReplaceState(f,f.state,null),tl(t,o,f,u),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function Is(t,r){try{var o="",u=r;do o+=we(u),u=u.return;while(u);var f=o}catch(p){f=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:f,digest:null}}function pc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function mc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Qy=typeof WeakMap=="function"?WeakMap:Map;function xd(t,r,o){o=hr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){ml||(ml=!0,Vc=u),mc(t,r)},o}function Ld(t,r,o){o=hr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var f=r.value;o.payload=function(){return u(f)},o.callback=function(){mc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){mc(t,r),typeof u!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Od(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Qy;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(f.add(o),t=a_.bind(null,t,r,o),r.then(t,t))}function Md(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Fd(t,r,o,u,f){return t.mode&1?(t.flags|=65536,t.lanes=f,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=hr(-1,1),r.tag=2,Lr(o,r,1))),o.lanes|=1),t)}var Gy=ve.ReactCurrentOwner,Wt=!1;function Ut(t,r,o,u){r.child=t===null?rd(r,null,o,u):vs(r,t.child,o,u)}function Ud(t,r,o,u,f){o=o.render;var p=r.ref;return ws(r,f),u=oc(t,r,o,u,p,f),o=ac(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~f,fr(t,r,f)):(Ge&&o&&$u(r),r.flags|=1,Ut(t,r,u,f),r.child)}function zd(t,r,o,u,f){if(t===null){var p=o.type;return typeof p=="function"&&!Fc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Bd(t,r,p,u,f)):(t=wl(o.type,null,u,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!(t.lanes&f)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:To,o(_,u)&&t.ref===r.ref)return fr(t,r,f)}return r.flags|=1,t=Br(p,u),t.ref=r.ref,t.return=r,r.child=t}function Bd(t,r,o,u,f){if(t!==null){var p=t.memoizedProps;if(To(p,u)&&t.ref===r.ref)if(Wt=!1,r.pendingProps=u=p,(t.lanes&f)!==0)t.flags&131072&&(Wt=!0);else return r.lanes=t.lanes,fr(t,r,f)}return gc(t,r,o,u,f)}function jd(t,r,o){var u=r.pendingProps,f=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(As,sn),sn|=o;else{if(!(o&1073741824))return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,$e(As,sn),sn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,$e(As,sn),sn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,$e(As,sn),sn|=u;return Ut(t,r,f,o),r.child}function bd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function gc(t,r,o,u,f){var p=qt(o)?vi:Vt.current;return p=ms(r,p),ws(r,f),o=oc(t,r,o,u,p,f),u=ac(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~f,fr(t,r,f)):(Ge&&u&&$u(r),r.flags|=1,Ut(t,r,o,f),r.child)}function $d(t,r,o,u,f){if(qt(o)){var p=!0;Ha(r)}else p=!1;if(ws(r,f),r.stateNode===null)cl(t,r),Dd(r,o,u),dc(r,o,u,f),u=!0;else if(t===null){var _=r.stateNode,T=r.memoizedProps;_.props=T;var R=_.context,U=o.contextType;typeof U=="object"&&U!==null?U=pn(U):(U=qt(o)?vi:Vt.current,U=ms(r,U));var H=o.getDerivedStateFromProps,Q=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function";Q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==u||R!==U)&&Nd(r,_,u,U),xr=!1;var q=r.memoizedState;_.state=q,tl(r,u,_,f),R=r.memoizedState,T!==u||q!==R||$t.current||xr?(typeof H=="function"&&(fc(r,o,H,u),R=r.memoizedState),(T=xr||Vd(r,o,T,u,q,R,U))?(Q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=R),_.props=u,_.state=R,_.context=U,u=T):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,sd(t,r),T=r.memoizedProps,U=r.type===r.elementType?T:kn(r.type,T),_.props=U,Q=r.pendingProps,q=_.context,R=o.contextType,typeof R=="object"&&R!==null?R=pn(R):(R=qt(o)?vi:Vt.current,R=ms(r,R));var Z=o.getDerivedStateFromProps;(H=typeof Z=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==Q||q!==R)&&Nd(r,_,u,R),xr=!1,q=r.memoizedState,_.state=q,tl(r,u,_,f);var se=r.memoizedState;T!==Q||q!==se||$t.current||xr?(typeof Z=="function"&&(fc(r,o,Z,u),se=r.memoizedState),(U=xr||Vd(r,o,U,u,q,se,R)||!1)?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,se,R),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,se,R)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=se),_.props=u,_.state=se,_.context=R,u=U):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),u=!1)}return yc(t,r,o,u,p,f)}function yc(t,r,o,u,f,p){bd(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return f&&Gf(r,o,!1),fr(t,r,p);u=r.stateNode,Gy.current=r;var T=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=vs(r,t.child,null,p),r.child=vs(r,null,T,p)):Ut(t,r,T,p),r.memoizedState=u.state,f&&Gf(r,o,!0),r.child}function qd(t){var r=t.stateNode;r.pendingContext?Hf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Hf(t,r.context,!1),ec(t,r.containerInfo)}function Wd(t,r,o,u,f){return _s(),Qu(f),r.flags|=256,Ut(t,r,o,u),r.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hd(t,r,o){var u=r.pendingProps,f=Ke.current,p=!1,_=(r.flags&128)!==0,T;if((T=_)||(T=t!==null&&t.memoizedState===null?!1:(f&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),$e(Ke,f&1),t===null)return Hu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Tl(_,u,0,null),t=ki(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=vc(o),r.memoizedState=_c,t):Ec(r,_));if(f=t.memoizedState,f!==null&&(T=f.dehydrated,T!==null))return Ky(t,r,_,u,T,f,o);if(p){p=u.fallback,_=r.mode,f=t.child,T=f.sibling;var R={mode:"hidden",children:u.children};return!(_&1)&&r.child!==f?(u=r.child,u.childLanes=0,u.pendingProps=R,r.deletions=null):(u=Br(f,R),u.subtreeFlags=f.subtreeFlags&14680064),T!==null?p=Br(T,p):(p=ki(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?vc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=_c,u}return p=t.child,t=p.sibling,u=Br(p,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function Ec(t,r){return r=Tl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function ul(t,r,o,u){return u!==null&&Qu(u),vs(r,t.child,null,o),t=Ec(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ky(t,r,o,u,f,p,_){if(o)return r.flags&256?(r.flags&=-257,u=pc(Error(n(422))),ul(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,f=r.mode,u=Tl({mode:"visible",children:u.children},f,0,null),p=ki(p,f,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,r.mode&1&&vs(r,t.child,null,_),r.child.memoizedState=vc(_),r.memoizedState=_c,p);if(!(r.mode&1))return ul(t,r,_,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=pc(p,u,void 0),ul(t,r,_,u)}if(T=(_&t.childLanes)!==0,Wt||T){if(u=yt,u!==null){switch(_&-_){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(u.suspendedLanes|_)?0:f,f!==0&&f!==p.retryLane&&(p.retryLane=f,cr(t,f),Nn(u,t,f,-1))}return Mc(),u=pc(Error(n(421))),ul(t,r,_,u)}return f.data==="$?"?(r.flags|=128,r.child=t.child,r=l_.bind(null,t),f._reactRetry=r,null):(t=p.treeContext,rn=kr(f.nextSibling),nn=r,Ge=!0,Pn=null,t!==null&&(fn[dn++]=lr,fn[dn++]=ur,fn[dn++]=Ei,lr=t.id,ur=t.overflow,Ei=r),r=Ec(r,u.children),r.flags|=4096,r)}function Qd(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Yu(t.return,r,o)}function wc(t,r,o,u,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function Gd(t,r,o){var u=r.pendingProps,f=u.revealOrder,p=u.tail;if(Ut(t,r,u.children,o),u=Ke.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qd(t,o,r);else if(t.tag===19)Qd(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if($e(Ke,u),!(r.mode&1))r.memoizedState=null;else switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&nl(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),wc(r,!1,f,o,p);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&nl(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}wc(r,!0,o,null,p);break;case"together":wc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function cl(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function fr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Ai|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Br(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Br(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Xy(t,r,o){switch(r.tag){case 3:qd(r),_s();break;case 5:ld(r);break;case 1:qt(r.type)&&Ha(r);break;case 4:ec(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,f=r.memoizedProps.value;$e(Ja,u._currentValue),u._currentValue=f;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?($e(Ke,Ke.current&1),r.flags|=128,null):o&r.child.childLanes?Hd(t,r,o):($e(Ke,Ke.current&1),t=fr(t,r,o),t!==null?t.sibling:null);$e(Ke,Ke.current&1);break;case 19:if(u=(o&r.childLanes)!==0,t.flags&128){if(u)return Gd(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),$e(Ke,Ke.current),u)break;return null;case 22:case 23:return r.lanes=0,jd(t,r,o)}return fr(t,r,o)}var Kd,Tc,Xd,Yd;Kd=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Tc=function(){},Xd=function(t,r,o,u){var f=t.memoizedProps;if(f!==u){t=r.stateNode,Ii($n.current);var p=null;switch(o){case"input":f=ni(t,f),u=ni(t,u),p=[];break;case"select":f=ne({},f,{value:void 0}),u=ne({},u,{value:void 0}),p=[];break;case"textarea":f=Xs(t,f),u=Xs(t,u),p=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=$a)}no(o,u);var _;o=null;for(U in f)if(!u.hasOwnProperty(U)&&f.hasOwnProperty(U)&&f[U]!=null)if(U==="style"){var T=f[U];for(_ in T)T.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var R=u[U];if(T=f!=null?f[U]:void 0,u.hasOwnProperty(U)&&R!==T&&(R!=null||T!=null))if(U==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||R&&R.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in R)R.hasOwnProperty(_)&&T[_]!==R[_]&&(o||(o={}),o[_]=R[_])}else o||(p||(p=[]),p.push(U,o)),o=R;else U==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(p=p||[]).push(U,R)):U==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(U,""+R):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(R!=null&&U==="onScroll"&&qe("scroll",t),p||T===R||(p=[])):(p=p||[]).push(U,R))}o&&(p=p||[]).push("style",o);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},Yd=function(t,r,o,u){o!==u&&(r.flags|=4)};function Fo(t,r){if(!Ge)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Nt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Yy(t,r,o){var u=r.pendingProps;switch(qu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(r),null;case 1:return qt(r.type)&&Wa(),Nt(r),null;case 3:return u=r.stateNode,Ts(),We($t),We(Vt),rc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Xa(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Pn!==null&&(xc(Pn),Pn=null))),Tc(t,r),Nt(r),null;case 5:tc(r);var f=Ii(No.current);if(o=r.type,t!==null&&r.stateNode!=null)Xd(t,r,o,u,f),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Nt(r),null}if(t=Ii($n.current),Xa(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[bn]=r,u[Co]=p,t=(r.mode&1)!==0,o){case"dialog":qe("cancel",u),qe("close",u);break;case"iframe":case"object":case"embed":qe("load",u);break;case"video":case"audio":for(f=0;f<So.length;f++)qe(So[f],u);break;case"source":qe("error",u);break;case"img":case"image":case"link":qe("error",u),qe("load",u);break;case"details":qe("toggle",u);break;case"input":Fi(u,p),qe("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},qe("invalid",u);break;case"textarea":zi(u,p),qe("invalid",u)}no(o,p),f=null;for(var _ in p)if(p.hasOwnProperty(_)){var T=p[_];_==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&ba(u.textContent,T,t),f=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&ba(u.textContent,T,t),f=["children",""+T]):a.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&qe("scroll",u)}switch(o){case"input":Xn(u),pa(u,p,!0);break;case"textarea":Xn(u),Ys(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=$a)}u=f,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=at(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[bn]=r,t[Co]=u,Kd(t,r,!1,!1),r.stateNode=t;e:{switch(_=ro(o,u),o){case"dialog":qe("cancel",t),qe("close",t),f=u;break;case"iframe":case"object":case"embed":qe("load",t),f=u;break;case"video":case"audio":for(f=0;f<So.length;f++)qe(So[f],t);f=u;break;case"source":qe("error",t),f=u;break;case"img":case"image":case"link":qe("error",t),qe("load",t),f=u;break;case"details":qe("toggle",t),f=u;break;case"input":Fi(t,u),f=ni(t,u),qe("invalid",t);break;case"option":f=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},f=ne({},u,{value:void 0}),qe("invalid",t);break;case"textarea":zi(t,u),f=Xs(t,u),qe("invalid",t);break;default:f=u}no(o,f),T=f;for(p in T)if(T.hasOwnProperty(p)){var R=T[p];p==="style"?eo(t,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Js(t,R)):p==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&_r(t,R):typeof R=="number"&&_r(t,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?R!=null&&p==="onScroll"&&qe("scroll",t):R!=null&&he(t,p,R,_))}switch(o){case"input":Xn(t),pa(t,u,!1);break;case"textarea":Xn(t),Ys(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Me(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Jn(t,!!u.multiple,p,!1):u.defaultValue!=null&&Jn(t,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=$a)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Nt(r),null;case 6:if(t&&r.stateNode!=null)Yd(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Ii(No.current),Ii($n.current),Xa(r)){if(u=r.stateNode,o=r.memoizedProps,u[bn]=r,(p=u.nodeValue!==o)&&(t=nn,t!==null))switch(t.tag){case 3:ba(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ba(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[bn]=r,r.stateNode=u}return Nt(r),null;case 13:if(We(Ke),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&rn!==null&&r.mode&1&&!(r.flags&128))ed(),_s(),r.flags|=98560,p=!1;else if(p=Xa(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[bn]=r}else _s(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Nt(r),p=!1}else Pn!==null&&(xc(Pn),Pn=null),p=!0;if(!p)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,r.mode&1&&(t===null||Ke.current&1?ht===0&&(ht=3):Mc())),r.updateQueue!==null&&(r.flags|=4),Nt(r),null);case 4:return Ts(),Tc(t,r),t===null&&Ao(r.stateNode.containerInfo),Nt(r),null;case 10:return Xu(r.type._context),Nt(r),null;case 17:return qt(r.type)&&Wa(),Nt(r),null;case 19:if(We(Ke),p=r.memoizedState,p===null)return Nt(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)Fo(p,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(_=nl(t),_!==null){for(r.flags|=128,Fo(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return $e(Ke,Ke.current&1|2),r.child}t=t.sibling}p.tail!==null&&be()>Rs&&(r.flags|=128,u=!0,Fo(p,!1),r.lanes=4194304)}else{if(!u)if(t=nl(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Fo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ge)return Nt(r),null}else 2*be()-p.renderingStartTime>Rs&&o!==1073741824&&(r.flags|=128,u=!0,Fo(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=be(),r.sibling=null,o=Ke.current,$e(Ke,u?o&1|2:o&1),r):(Nt(r),null);case 22:case 23:return Oc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&r.mode&1?sn&1073741824&&(Nt(r),r.subtreeFlags&6&&(r.flags|=8192)):Nt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Jy(t,r){switch(qu(r),r.tag){case 1:return qt(r.type)&&Wa(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ts(),We($t),We(Vt),rc(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return tc(r),null;case 13:if(We(Ke),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));_s()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return We(Ke),null;case 4:return Ts(),null;case 10:return Xu(r.type._context),null;case 22:case 23:return Oc(),null;case 24:return null;default:return null}}var hl=!1,xt=!1,Zy=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ss(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Je(t,r,u)}else o.current=null}function Ic(t,r,o){try{o()}catch(u){Je(t,r,u)}}var Jd=!1;function e_(t,r){if(Ou=Rr,t=Vf(),Cu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,T=-1,R=-1,U=0,H=0,Q=t,q=null;t:for(;;){for(var Z;Q!==o||f!==0&&Q.nodeType!==3||(T=_+f),Q!==p||u!==0&&Q.nodeType!==3||(R=_+u),Q.nodeType===3&&(_+=Q.nodeValue.length),(Z=Q.firstChild)!==null;)q=Q,Q=Z;for(;;){if(Q===t)break t;if(q===o&&++U===f&&(T=_),q===p&&++H===u&&(R=_),(Z=Q.nextSibling)!==null)break;Q=q,q=Q.parentNode}Q=Z}o=T===-1||R===-1?null:{start:T,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Mu={focusedElem:t,selectionRange:o},Rr=!1,ie=r;ie!==null;)if(r=ie,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ie=t;else for(;ie!==null;){r=ie;try{var se=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(se!==null){var oe=se.memoizedProps,tt=se.memoizedState,M=r.stateNode,P=M.getSnapshotBeforeUpdate(r.elementType===r.type?oe:kn(r.type,oe),tt);M.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(G){Je(r,r.return,G)}if(t=r.sibling,t!==null){t.return=r.return,ie=t;break}ie=r.return}return se=Jd,Jd=!1,se}function Uo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&t)===t){var p=f.destroy;f.destroy=void 0,p!==void 0&&Ic(r,o,p)}f=f.next}while(f!==u)}}function fl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Sc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Zd(t){var r=t.alternate;r!==null&&(t.alternate=null,Zd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[bn],delete r[Co],delete r[Bu],delete r[My],delete r[Fy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ep(t){return t.tag===5||t.tag===3||t.tag===4}function tp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ep(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ac(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=$a));else if(u!==4&&(t=t.child,t!==null))for(Ac(t,r,o),t=t.sibling;t!==null;)Ac(t,r,o),t=t.sibling}function Rc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Rc(t,r,o),t=t.sibling;t!==null;)Rc(t,r,o),t=t.sibling}var It=null,Vn=!1;function Or(t,r,o){for(o=o.child;o!==null;)np(t,r,o),o=o.sibling}function np(t,r,o){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(hi,o)}catch{}switch(o.tag){case 5:xt||Ss(o,r);case 6:var u=It,f=Vn;It=null,Or(t,r,o),It=u,Vn=f,It!==null&&(Vn?(t=It,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):It.removeChild(o.stateNode));break;case 18:It!==null&&(Vn?(t=It,o=o.stateNode,t.nodeType===8?zu(t.parentNode,o):t.nodeType===1&&zu(t,o),An(t)):zu(It,o.stateNode));break;case 4:u=It,f=Vn,It=o.stateNode.containerInfo,Vn=!0,Or(t,r,o),It=u,Vn=f;break;case 0:case 11:case 14:case 15:if(!xt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var p=f,_=p.destroy;p=p.tag,_!==void 0&&(p&2||p&4)&&Ic(o,r,_),f=f.next}while(f!==u)}Or(t,r,o);break;case 1:if(!xt&&(Ss(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){Je(o,r,T)}Or(t,r,o);break;case 21:Or(t,r,o);break;case 22:o.mode&1?(xt=(u=xt)||o.memoizedState!==null,Or(t,r,o),xt=u):Or(t,r,o);break;default:Or(t,r,o)}}function rp(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Zy),r.forEach(function(u){var f=u_.bind(null,t,u);o.has(u)||(o.add(u),u.then(f,f))})}}function Dn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];try{var p=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 5:It=T.stateNode,Vn=!1;break e;case 3:It=T.stateNode.containerInfo,Vn=!0;break e;case 4:It=T.stateNode.containerInfo,Vn=!0;break e}T=T.return}if(It===null)throw Error(n(160));np(p,_,f),It=null,Vn=!1;var R=f.alternate;R!==null&&(R.return=null),f.return=null}catch(U){Je(f,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)ip(r,t),r=r.sibling}function ip(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(r,t),Wn(t),u&4){try{Uo(3,t,t.return),fl(3,t)}catch(oe){Je(t,t.return,oe)}try{Uo(5,t,t.return)}catch(oe){Je(t,t.return,oe)}}break;case 1:Dn(r,t),Wn(t),u&512&&o!==null&&Ss(o,o.return);break;case 5:if(Dn(r,t),Wn(t),u&512&&o!==null&&Ss(o,o.return),t.flags&32){var f=t.stateNode;try{_r(f,"")}catch(oe){Je(t,t.return,oe)}}if(u&4&&(f=t.stateNode,f!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,T=t.type,R=t.updateQueue;if(t.updateQueue=null,R!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&Gs(f,p),ro(T,_);var U=ro(T,p);for(_=0;_<R.length;_+=2){var H=R[_],Q=R[_+1];H==="style"?eo(f,Q):H==="dangerouslySetInnerHTML"?Js(f,Q):H==="children"?_r(f,Q):he(f,H,Q,U)}switch(T){case"input":Ks(f,p);break;case"textarea":Bi(f,p);break;case"select":var q=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!p.multiple;var Z=p.value;Z!=null?Jn(f,!!p.multiple,Z,!1):q!==!!p.multiple&&(p.defaultValue!=null?Jn(f,!!p.multiple,p.defaultValue,!0):Jn(f,!!p.multiple,p.multiple?[]:"",!1))}f[Co]=p}catch(oe){Je(t,t.return,oe)}}break;case 6:if(Dn(r,t),Wn(t),u&4){if(t.stateNode===null)throw Error(n(162));f=t.stateNode,p=t.memoizedProps;try{f.nodeValue=p}catch(oe){Je(t,t.return,oe)}}break;case 3:if(Dn(r,t),Wn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{An(r.containerInfo)}catch(oe){Je(t,t.return,oe)}break;case 4:Dn(r,t),Wn(t);break;case 13:Dn(r,t),Wn(t),f=t.child,f.flags&8192&&(p=f.memoizedState!==null,f.stateNode.isHidden=p,!p||f.alternate!==null&&f.alternate.memoizedState!==null||(kc=be())),u&4&&rp(t);break;case 22:if(H=o!==null&&o.memoizedState!==null,t.mode&1?(xt=(U=xt)||H,Dn(r,t),xt=U):Dn(r,t),Wn(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!H&&t.mode&1)for(ie=t,H=t.child;H!==null;){for(Q=ie=H;ie!==null;){switch(q=ie,Z=q.child,q.tag){case 0:case 11:case 14:case 15:Uo(4,q,q.return);break;case 1:Ss(q,q.return);var se=q.stateNode;if(typeof se.componentWillUnmount=="function"){u=q,o=q.return;try{r=u,se.props=r.memoizedProps,se.state=r.memoizedState,se.componentWillUnmount()}catch(oe){Je(u,o,oe)}}break;case 5:Ss(q,q.return);break;case 22:if(q.memoizedState!==null){ap(Q);continue}}Z!==null?(Z.return=q,ie=Z):ap(Q)}H=H.sibling}e:for(H=null,Q=t;;){if(Q.tag===5){if(H===null){H=Q;try{f=Q.stateNode,U?(p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=Q.stateNode,R=Q.memoizedProps.style,_=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=Zs("display",_))}catch(oe){Je(t,t.return,oe)}}}else if(Q.tag===6){if(H===null)try{Q.stateNode.nodeValue=U?"":Q.memoizedProps}catch(oe){Je(t,t.return,oe)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===t)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===t)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===t)break e;H===Q&&(H=null),Q=Q.return}H===Q&&(H=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Dn(r,t),Wn(t),u&4&&rp(t);break;case 21:break;default:Dn(r,t),Wn(t)}}function Wn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(ep(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(_r(f,""),u.flags&=-33);var p=tp(t);Rc(t,p,f);break;case 3:case 4:var _=u.stateNode.containerInfo,T=tp(t);Ac(t,T,_);break;default:throw Error(n(161))}}catch(R){Je(t,t.return,R)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function t_(t,r,o){ie=t,sp(t)}function sp(t,r,o){for(var u=(t.mode&1)!==0;ie!==null;){var f=ie,p=f.child;if(f.tag===22&&u){var _=f.memoizedState!==null||hl;if(!_){var T=f.alternate,R=T!==null&&T.memoizedState!==null||xt;T=hl;var U=xt;if(hl=_,(xt=R)&&!U)for(ie=f;ie!==null;)_=ie,R=_.child,_.tag===22&&_.memoizedState!==null?lp(f):R!==null?(R.return=_,ie=R):lp(f);for(;p!==null;)ie=p,sp(p),p=p.sibling;ie=f,hl=T,xt=U}op(t)}else f.subtreeFlags&8772&&p!==null?(p.return=f,ie=p):op(t)}}function op(t){for(;ie!==null;){var r=ie;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:xt||fl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!xt)if(o===null)u.componentDidMount();else{var f=r.elementType===r.type?o.memoizedProps:kn(r.type,o.memoizedProps);u.componentDidUpdate(f,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&ad(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}ad(r,_,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var H=U.memoizedState;if(H!==null){var Q=H.dehydrated;Q!==null&&An(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}xt||r.flags&512&&Sc(r)}catch(q){Je(r,r.return,q)}}if(r===t){ie=null;break}if(o=r.sibling,o!==null){o.return=r.return,ie=o;break}ie=r.return}}function ap(t){for(;ie!==null;){var r=ie;if(r===t){ie=null;break}var o=r.sibling;if(o!==null){o.return=r.return,ie=o;break}ie=r.return}}function lp(t){for(;ie!==null;){var r=ie;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{fl(4,r)}catch(R){Je(r,o,R)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var f=r.return;try{u.componentDidMount()}catch(R){Je(r,f,R)}}var p=r.return;try{Sc(r)}catch(R){Je(r,p,R)}break;case 5:var _=r.return;try{Sc(r)}catch(R){Je(r,_,R)}}}catch(R){Je(r,r.return,R)}if(r===t){ie=null;break}var T=r.sibling;if(T!==null){T.return=r.return,ie=T;break}ie=r.return}}var n_=Math.ceil,dl=ve.ReactCurrentDispatcher,Cc=ve.ReactCurrentOwner,gn=ve.ReactCurrentBatchConfig,xe=0,yt=null,it=null,St=0,sn=0,As=Vr(0),ht=0,zo=null,Ai=0,pl=0,Pc=0,Bo=null,Ht=null,kc=0,Rs=1/0,dr=null,ml=!1,Vc=null,Mr=null,gl=!1,Fr=null,yl=0,jo=0,Dc=null,_l=-1,vl=0;function zt(){return xe&6?be():_l!==-1?_l:_l=be()}function Ur(t){return t.mode&1?xe&2&&St!==0?St&-St:zy.transition!==null?(vl===0&&(vl=di()),vl):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:mo(t.type)),t):1}function Nn(t,r,o,u){if(50<jo)throw jo=0,Dc=null,Error(n(185));Tr(t,o,u),(!(xe&2)||t!==yt)&&(t===yt&&(!(xe&2)&&(pl|=o),ht===4&&zr(t,St)),Qt(t,u),o===1&&xe===0&&!(r.mode&1)&&(Rs=be()+500,Qa&&Nr()))}function Qt(t,r){var o=t.callbackNode;tr(t,r);var u=fi(t,t===yt?St:0);if(u===0)o!==null&&uo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&uo(o),r===1)t.tag===0?Uy(cp.bind(null,t)):Kf(cp.bind(null,t)),Ly(function(){!(xe&6)&&Nr()}),o=null;else{switch(Sr(u)){case 1:o=ci;break;case 4:o=vr;break;case 16:o=un;break;case 536870912:o=va;break;default:o=un}o=_p(o,up.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function up(t,r){if(_l=-1,vl=0,xe&6)throw Error(n(327));var o=t.callbackNode;if(Cs()&&t.callbackNode!==o)return null;var u=fi(t,t===yt?St:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=El(t,u);else{r=u;var f=xe;xe|=2;var p=fp();(yt!==t||St!==r)&&(dr=null,Rs=be()+500,Ci(t,r));do try{s_();break}catch(T){hp(t,T)}while(!0);Ku(),dl.current=p,xe=f,it!==null?r=0:(yt=null,St=0,r=ht)}if(r!==0){if(r===2&&(f=Zt(t),f!==0&&(u=f,r=Nc(t,f))),r===1)throw o=zo,Ci(t,0),zr(t,u),Qt(t,be()),o;if(r===6)zr(t,u);else{if(f=t.current.alternate,!(u&30)&&!r_(f)&&(r=El(t,u),r===2&&(p=Zt(t),p!==0&&(u=p,r=Nc(t,p))),r===1))throw o=zo,Ci(t,0),zr(t,u),Qt(t,be()),o;switch(t.finishedWork=f,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Pi(t,Ht,dr);break;case 3:if(zr(t,u),(u&130023424)===u&&(r=kc+500-be(),10<r)){if(fi(t,0)!==0)break;if(f=t.suspendedLanes,(f&u)!==u){zt(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=Uu(Pi.bind(null,t,Ht,dr),r);break}Pi(t,Ht,dr);break;case 4:if(zr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,f=-1;0<u;){var _=31-Mt(u);p=1<<_,_=r[_],_>f&&(f=_),u&=~p}if(u=f,u=be()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*n_(u/1960))-u,10<u){t.timeoutHandle=Uu(Pi.bind(null,t,Ht,dr),u);break}Pi(t,Ht,dr);break;case 5:Pi(t,Ht,dr);break;default:throw Error(n(329))}}}return Qt(t,be()),t.callbackNode===o?up.bind(null,t):null}function Nc(t,r){var o=Bo;return t.current.memoizedState.isDehydrated&&(Ci(t,r).flags|=256),t=El(t,r),t!==2&&(r=Ht,Ht=o,r!==null&&xc(r)),t}function xc(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function r_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Cn(p(),f))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function zr(t,r){for(r&=~Pc,r&=~pl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Mt(r),u=1<<o;t[o]=-1,r&=~u}}function cp(t){if(xe&6)throw Error(n(327));Cs();var r=fi(t,0);if(!(r&1))return Qt(t,be()),null;var o=El(t,r);if(t.tag!==0&&o===2){var u=Zt(t);u!==0&&(r=u,o=Nc(t,u))}if(o===1)throw o=zo,Ci(t,0),zr(t,r),Qt(t,be()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Pi(t,Ht,dr),Qt(t,be()),null}function Lc(t,r){var o=xe;xe|=1;try{return t(r)}finally{xe=o,xe===0&&(Rs=be()+500,Qa&&Nr())}}function Ri(t){Fr!==null&&Fr.tag===0&&!(xe&6)&&Cs();var r=xe;xe|=1;var o=gn.transition,u=Ae;try{if(gn.transition=null,Ae=1,t)return t()}finally{Ae=u,gn.transition=o,xe=r,!(xe&6)&&Nr()}}function Oc(){sn=As.current,We(As)}function Ci(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,xy(o)),it!==null)for(o=it.return;o!==null;){var u=o;switch(qu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Wa();break;case 3:Ts(),We($t),We(Vt),rc();break;case 5:tc(u);break;case 4:Ts();break;case 13:We(Ke);break;case 19:We(Ke);break;case 10:Xu(u.type._context);break;case 22:case 23:Oc()}o=o.return}if(yt=t,it=t=Br(t.current,null),St=sn=r,ht=0,zo=null,Pc=pl=Ai=0,Ht=Bo=null,Ti!==null){for(r=0;r<Ti.length;r++)if(o=Ti[r],u=o.interleaved,u!==null){o.interleaved=null;var f=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=f,u.next=_}o.pending=u}Ti=null}return t}function hp(t,r){do{var o=it;try{if(Ku(),rl.current=al,il){for(var u=Xe.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}il=!1}if(Si=0,gt=ct=Xe=null,xo=!1,Lo=0,Cc.current=null,o===null||o.return===null){ht=1,zo=r,it=null;break}e:{var p=t,_=o.return,T=o,R=r;if(r=St,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var U=R,H=T,Q=H.tag;if(!(H.mode&1)&&(Q===0||Q===11||Q===15)){var q=H.alternate;q?(H.updateQueue=q.updateQueue,H.memoizedState=q.memoizedState,H.lanes=q.lanes):(H.updateQueue=null,H.memoizedState=null)}var Z=Md(_);if(Z!==null){Z.flags&=-257,Fd(Z,_,T,p,r),Z.mode&1&&Od(p,U,r),r=Z,R=U;var se=r.updateQueue;if(se===null){var oe=new Set;oe.add(R),r.updateQueue=oe}else se.add(R);break e}else{if(!(r&1)){Od(p,U,r),Mc();break e}R=Error(n(426))}}else if(Ge&&T.mode&1){var tt=Md(_);if(tt!==null){!(tt.flags&65536)&&(tt.flags|=256),Fd(tt,_,T,p,r),Qu(Is(R,T));break e}}p=R=Is(R,T),ht!==4&&(ht=2),Bo===null?Bo=[p]:Bo.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=xd(p,R,r);od(p,M);break e;case 1:T=R;var P=p.type,F=p.stateNode;if(!(p.flags&128)&&(typeof P.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Mr===null||!Mr.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var G=Ld(p,T,r);od(p,G);break e}}p=p.return}while(p!==null)}pp(o)}catch(ae){r=ae,it===o&&o!==null&&(it=o=o.return);continue}break}while(!0)}function fp(){var t=dl.current;return dl.current=al,t===null?al:t}function Mc(){(ht===0||ht===3||ht===2)&&(ht=4),yt===null||!(Ai&268435455)&&!(pl&268435455)||zr(yt,St)}function El(t,r){var o=xe;xe|=2;var u=fp();(yt!==t||St!==r)&&(dr=null,Ci(t,r));do try{i_();break}catch(f){hp(t,f)}while(!0);if(Ku(),xe=o,dl.current=u,it!==null)throw Error(n(261));return yt=null,St=0,ht}function i_(){for(;it!==null;)dp(it)}function s_(){for(;it!==null&&!ya();)dp(it)}function dp(t){var r=yp(t.alternate,t,sn);t.memoizedProps=t.pendingProps,r===null?pp(t):it=r,Cc.current=null}function pp(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=Jy(o,r),o!==null){o.flags&=32767,it=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,it=null;return}}else if(o=Yy(o,r,sn),o!==null){it=o;return}if(r=r.sibling,r!==null){it=r;return}it=r=t}while(r!==null);ht===0&&(ht=5)}function Pi(t,r,o){var u=Ae,f=gn.transition;try{gn.transition=null,Ae=1,o_(t,r,o,u)}finally{gn.transition=f,Ae=u}return null}function o_(t,r,o,u){do Cs();while(Fr!==null);if(xe&6)throw Error(n(327));o=t.finishedWork;var f=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(ze(t,p),t===yt&&(it=yt=null,St=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||gl||(gl=!0,_p(un,function(){return Cs(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=gn.transition,gn.transition=null;var _=Ae;Ae=1;var T=xe;xe|=4,Cc.current=null,e_(t,o),ip(o,t),Ry(Mu),Rr=!!Ou,Mu=Ou=null,t.current=o,t_(o),vu(),xe=T,Ae=_,gn.transition=p}else t.current=o;if(gl&&(gl=!1,Fr=t,yl=f),p=t.pendingLanes,p===0&&(Mr=null),Ea(o.stateNode),Qt(t,be()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)f=r[o],u(f.value,{componentStack:f.stack,digest:f.digest});if(ml)throw ml=!1,t=Vc,Vc=null,t;return yl&1&&t.tag!==0&&Cs(),p=t.pendingLanes,p&1?t===Dc?jo++:(jo=0,Dc=t):jo=0,Nr(),null}function Cs(){if(Fr!==null){var t=Sr(yl),r=gn.transition,o=Ae;try{if(gn.transition=null,Ae=16>t?16:t,Fr===null)var u=!1;else{if(t=Fr,Fr=null,yl=0,xe&6)throw Error(n(331));var f=xe;for(xe|=4,ie=t.current;ie!==null;){var p=ie,_=p.child;if(ie.flags&16){var T=p.deletions;if(T!==null){for(var R=0;R<T.length;R++){var U=T[R];for(ie=U;ie!==null;){var H=ie;switch(H.tag){case 0:case 11:case 15:Uo(8,H,p)}var Q=H.child;if(Q!==null)Q.return=H,ie=Q;else for(;ie!==null;){H=ie;var q=H.sibling,Z=H.return;if(Zd(H),H===U){ie=null;break}if(q!==null){q.return=Z,ie=q;break}ie=Z}}}var se=p.alternate;if(se!==null){var oe=se.child;if(oe!==null){se.child=null;do{var tt=oe.sibling;oe.sibling=null,oe=tt}while(oe!==null)}}ie=p}}if(p.subtreeFlags&2064&&_!==null)_.return=p,ie=_;else e:for(;ie!==null;){if(p=ie,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Uo(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,ie=M;break e}ie=p.return}}var P=t.current;for(ie=P;ie!==null;){_=ie;var F=_.child;if(_.subtreeFlags&2064&&F!==null)F.return=_,ie=F;else e:for(_=P;ie!==null;){if(T=ie,T.flags&2048)try{switch(T.tag){case 0:case 11:case 15:fl(9,T)}}catch(ae){Je(T,T.return,ae)}if(T===_){ie=null;break e}var G=T.sibling;if(G!==null){G.return=T.return,ie=G;break e}ie=T.return}}if(xe=f,Nr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(hi,t)}catch{}u=!0}return u}finally{Ae=o,gn.transition=r}}return!1}function mp(t,r,o){r=Is(o,r),r=xd(t,r,1),t=Lr(t,r,1),r=zt(),t!==null&&(Tr(t,1,r),Qt(t,r))}function Je(t,r,o){if(t.tag===3)mp(t,t,o);else for(;r!==null;){if(r.tag===3){mp(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Mr===null||!Mr.has(u))){t=Is(o,t),t=Ld(r,t,1),r=Lr(r,t,1),t=zt(),r!==null&&(Tr(r,1,t),Qt(r,t));break}}r=r.return}}function a_(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=zt(),t.pingedLanes|=t.suspendedLanes&o,yt===t&&(St&o)===o&&(ht===4||ht===3&&(St&130023424)===St&&500>be()-kc?Ci(t,0):Pc|=o),Qt(t,r)}function gp(t,r){r===0&&(t.mode&1?(r=Xi,Xi<<=1,!(Xi&130023424)&&(Xi=4194304)):r=1);var o=zt();t=cr(t,r),t!==null&&(Tr(t,r,o),Qt(t,o))}function l_(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),gp(t,o)}function u_(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),gp(t,o)}var yp;yp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||$t.current)Wt=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return Wt=!1,Xy(t,r,o);Wt=!!(t.flags&131072)}else Wt=!1,Ge&&r.flags&1048576&&Xf(r,Ka,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;cl(t,r),t=r.pendingProps;var f=ms(r,Vt.current);ws(r,o),f=oc(null,r,u,t,f,o);var p=ac();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,qt(u)?(p=!0,Ha(r)):p=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Zu(r),f.updater=ll,r.stateNode=f,f._reactInternals=r,dc(r,u,t,o),r=yc(null,r,u,!0,p,o)):(r.tag=0,Ge&&p&&$u(r),Ut(null,r,f,o),r=r.child),r;case 16:u=r.elementType;e:{switch(cl(t,r),t=r.pendingProps,f=u._init,u=f(u._payload),r.type=u,f=r.tag=h_(u),t=kn(u,t),f){case 0:r=gc(null,r,u,t,o);break e;case 1:r=$d(null,r,u,t,o);break e;case 11:r=Ud(null,r,u,t,o);break e;case 14:r=zd(null,r,u,kn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:kn(u,f),gc(t,r,u,f,o);case 1:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:kn(u,f),$d(t,r,u,f,o);case 3:e:{if(qd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,f=p.element,sd(t,r),tl(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){f=Is(Error(n(423)),r),r=Wd(t,r,u,o,f);break e}else if(u!==f){f=Is(Error(n(424)),r),r=Wd(t,r,u,o,f);break e}else for(rn=kr(r.stateNode.containerInfo.firstChild),nn=r,Ge=!0,Pn=null,o=rd(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(_s(),u===f){r=fr(t,r,o);break e}Ut(t,r,u,o)}r=r.child}return r;case 5:return ld(r),t===null&&Hu(r),u=r.type,f=r.pendingProps,p=t!==null?t.memoizedProps:null,_=f.children,Fu(u,f)?_=null:p!==null&&Fu(u,p)&&(r.flags|=32),bd(t,r),Ut(t,r,_,o),r.child;case 6:return t===null&&Hu(r),null;case 13:return Hd(t,r,o);case 4:return ec(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=vs(r,null,u,o):Ut(t,r,u,o),r.child;case 11:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:kn(u,f),Ud(t,r,u,f,o);case 7:return Ut(t,r,r.pendingProps,o),r.child;case 8:return Ut(t,r,r.pendingProps.children,o),r.child;case 12:return Ut(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,f=r.pendingProps,p=r.memoizedProps,_=f.value,$e(Ja,u._currentValue),u._currentValue=_,p!==null)if(Cn(p.value,_)){if(p.children===f.children&&!$t.current){r=fr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){_=p.child;for(var R=T.firstContext;R!==null;){if(R.context===u){if(p.tag===1){R=hr(-1,o&-o),R.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var H=U.pending;H===null?R.next=R:(R.next=H.next,H.next=R),U.pending=R}}p.lanes|=o,R=p.alternate,R!==null&&(R.lanes|=o),Yu(p.return,o,r),T.lanes|=o;break}R=R.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,T=_.alternate,T!==null&&(T.lanes|=o),Yu(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}Ut(t,r,f.children,o),r=r.child}return r;case 9:return f=r.type,u=r.pendingProps.children,ws(r,o),f=pn(f),u=u(f),r.flags|=1,Ut(t,r,u,o),r.child;case 14:return u=r.type,f=kn(u,r.pendingProps),f=kn(u.type,f),zd(t,r,u,f,o);case 15:return Bd(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,f=r.pendingProps,f=r.elementType===u?f:kn(u,f),cl(t,r),r.tag=1,qt(u)?(t=!0,Ha(r)):t=!1,ws(r,o),Dd(r,u,f),dc(r,u,f,o),yc(null,r,u,!0,t,o);case 19:return Gd(t,r,o);case 22:return jd(t,r,o)}throw Error(n(156,r.tag))};function _p(t,r){return Gi(t,r)}function c_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,r,o,u){return new c_(t,r,o,u)}function Fc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function h_(t){if(typeof t=="function")return Fc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===L)return 11;if(t===Pt)return 14}return 2}function Br(t,r){var o=t.alternate;return o===null?(o=yn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function wl(t,r,o,u,f,p){var _=2;if(u=t,typeof t=="function")Fc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case V:return ki(o.children,f,p,r);case I:_=8,f|=8;break;case A:return t=yn(12,o,r,f|2),t.elementType=A,t.lanes=p,t;case S:return t=yn(13,o,r,f),t.elementType=S,t.lanes=p,t;case Ze:return t=yn(19,o,r,f),t.elementType=Ze,t.lanes=p,t;case Ue:return Tl(o,f,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:_=10;break e;case D:_=9;break e;case L:_=11;break e;case Pt:_=14;break e;case kt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=yn(_,o,r,f),r.elementType=t,r.type=u,r.lanes=p,r}function ki(t,r,o,u){return t=yn(7,t,u,r),t.lanes=o,t}function Tl(t,r,o,u){return t=yn(22,t,u,r),t.elementType=Ue,t.lanes=o,t.stateNode={isHidden:!1},t}function Uc(t,r,o){return t=yn(6,t,null,r),t.lanes=o,t}function zc(t,r,o){return r=yn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function f_(t,r,o,u,f){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wr(0),this.expirationTimes=wr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wr(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Bc(t,r,o,u,f,p,_,T,R){return t=new f_(t,r,o,T,R),r===1?(r=1,p===!0&&(r|=8)):r=0,p=yn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zu(p),t}function d_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Se,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function vp(t){if(!t)return Dr;t=t._reactInternals;e:{if(En(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(qt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(qt(o))return Qf(t,o,r)}return r}function Ep(t,r,o,u,f,p,_,T,R){return t=Bc(o,u,!0,t,f,p,_,T,R),t.context=vp(null),o=t.current,u=zt(),f=Ur(o),p=hr(u,f),p.callback=r??null,Lr(o,p,f),t.current.lanes=f,Tr(t,f,u),Qt(t,u),t}function Il(t,r,o,u){var f=r.current,p=zt(),_=Ur(f);return o=vp(o),r.context===null?r.context=o:r.pendingContext=o,r=hr(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Lr(f,r,_),t!==null&&(Nn(t,f,_,p),el(t,f,_)),_}function Sl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function jc(t,r){wp(t,r),(t=t.alternate)&&wp(t,r)}var Tp=typeof reportError=="function"?reportError:function(t){console.error(t)};function bc(t){this._internalRoot=t}Al.prototype.render=bc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Il(t,r,null,null)},Al.prototype.unmount=bc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ri(function(){Il(null,t,null,null)}),r[or]=null}};function Al(t){this._internalRoot=t}Al.prototype.unstable_scheduleHydration=function(t){if(t){var r=Aa();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Un.length&&r!==0&&r<Un[o].priority;o++);Un.splice(o,0,t),o===0&&Pa(t)}};function $c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ip(){}function p_(t,r,o,u,f){if(f){if(typeof u=="function"){var p=u;u=function(){var U=Sl(_);p.call(U)}}var _=Ep(r,u,t,0,null,!1,!1,"",Ip);return t._reactRootContainer=_,t[or]=_.current,Ao(t.nodeType===8?t.parentNode:t),Ri(),_}for(;f=t.lastChild;)t.removeChild(f);if(typeof u=="function"){var T=u;u=function(){var U=Sl(R);T.call(U)}}var R=Bc(t,0,!1,null,null,!1,!1,"",Ip);return t._reactRootContainer=R,t[or]=R.current,Ao(t.nodeType===8?t.parentNode:t),Ri(function(){Il(r,R,o,u)}),R}function Cl(t,r,o,u,f){var p=o._reactRootContainer;if(p){var _=p;if(typeof f=="function"){var T=f;f=function(){var R=Sl(_);T.call(R)}}Il(r,_,t,f)}else _=p_(o,r,t,f,u);return Sl(_)}Ia=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Er(r.pendingLanes);o!==0&&(Ir(r,o|1),Qt(r,be()),!(xe&6)&&(Rs=be()+500,Nr()))}break;case 13:Ri(function(){var u=cr(t,1);if(u!==null){var f=zt();Nn(u,t,1,f)}}),jc(t,1)}},Yi=function(t){if(t.tag===13){var r=cr(t,134217728);if(r!==null){var o=zt();Nn(r,t,134217728,o)}jc(t,134217728)}},Sa=function(t){if(t.tag===13){var r=Ur(t),o=cr(t,r);if(o!==null){var u=zt();Nn(o,t,r,u)}jc(t,r)}},Aa=function(){return Ae},Ra=function(t,r){var o=Ae;try{return Ae=t,r()}finally{Ae=o}},bi=function(t,r,o){switch(r){case"input":if(Ks(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var f=qa(u);if(!f)throw Error(n(90));Mi(u),Ks(u,f)}}}break;case"textarea":Bi(t,o);break;case"select":r=o.value,r!=null&&Jn(t,!!o.multiple,r,!1)}},oi=Lc,so=Ri;var m_={usingClientEntryPoint:!1,Events:[Po,ds,qa,Mn,io,Lc]},bo={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g_={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ve.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lo(t),t===null?null:t.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{hi=Pl.inject(g_),Jt=Pl}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m_,Gt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(r))throw Error(n(200));return d_(t,r,null,o)},Gt.createRoot=function(t,r){if(!$c(t))throw Error(n(299));var o=!1,u="",f=Tp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=Bc(t,1,!1,null,null,o,!1,u,f),t[or]=r.current,Ao(t.nodeType===8?t.parentNode:t),new bc(r)},Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=lo(r),t=t===null?null:t.stateNode,t},Gt.flushSync=function(t){return Ri(t)},Gt.hydrate=function(t,r,o){if(!Rl(r))throw Error(n(200));return Cl(null,t,r,!0,o)},Gt.hydrateRoot=function(t,r,o){if(!$c(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,f=!1,p="",_=Tp;if(o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=Ep(r,null,t,1,o??null,f,!1,p,_),t[or]=r.current,Ao(t),u)for(t=0;t<u.length;t++)o=u[t],f=o._getVersion,f=f(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,f]:r.mutableSourceEagerHydrationData.push(o,f);return new Al(r)},Gt.render=function(t,r,o){if(!Rl(r))throw Error(n(200));return Cl(null,t,r,!1,o)},Gt.unmountComponentAtNode=function(t){if(!Rl(t))throw Error(n(40));return t._reactRootContainer?(Ri(function(){Cl(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1},Gt.unstable_batchedUpdates=Lc,Gt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Rl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Cl(t,r,o,!1,u)},Gt.version="18.3.1-next-f1338f8080-20240426",Gt}var Dp;function A_(){if(Dp)return Hc.exports;Dp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hc.exports=S_(),Hc.exports}var Np;function R_(){if(Np)return kl;Np=1;var i=A_();return kl.createRoot=i.createRoot,kl.hydrateRoot=i.hydrateRoot,kl}var C_=R_(),Kc={exports:{}},Xc,xp;function P_(){if(xp)return Xc;xp=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Xc=i,Xc}var Yc,Lp;function k_(){if(Lp)return Yc;Lp=1;var i=P_();function e(){}function n(){}return n.resetWarningCache=e,Yc=function(){function s(h,m,y,E,w,C){if(C!==i){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}s.isRequired=s;function a(){return s}var c={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return c.PropTypes=c,c},Yc}var Op;function V_(){return Op||(Op=1,Kc.exports=k_()()),Kc.exports}var Fm=V_();const sh=__(Fm);function Um({value:i}){const e=i!=null?`tile tile-${i}`:"tile";return Re.jsx("div",{className:e,children:i})}Um.propTypes={value:sh.number};function zm({score:i,bestScore:e}){return Re.jsxs("section",{className:"score",children:[Re.jsxs("div",{className:"score-current",children:[Re.jsx("p",{children:"Score"}),Re.jsx("strong",{children:i})]}),Re.jsxs("div",{className:"score-best",children:[Re.jsx("p",{children:"Best"}),Re.jsx("strong",{children:e})]})]})}zm.propTypes={score:sh.number.isRequired,bestScore:sh.number.isRequired};function Ol(i,e){return Math.floor(Math.random()*(e-i+1))+i}function D_(i){const e=Math.sqrt(i.length),n=[];for(let c=0;c<e*e;c++)i[c]===null&&n.push(c);const s=n[Ol(0,n.length-1)],a=i.slice();return a[s]=Math.random()>.1?2:4,a}function Mp(i){const e=Array(i*i).fill(null),n=Ol(0,i*i-1);let s=Ol(0,i*i-1);for(;n===s;)s=Ol(0,i*i-1);return e[n]=Math.random()>.1?2:4,e[s]=Math.random()>.1?2:4,e}function N_(i){const e=Math.sqrt(i.length);let n=0,s=[];for(let a=0;a<e;a++){const c=i.slice(a*e,a*e+e);let h=[];for(let m=0;m<e;m++)c[m]!==null&&h.push(c[m]);for(let m=0;m<h.length-1;m++)h[m]===h[m+1]&&(h[m]*=2,h[m+1]=null,n+=h[m]);h=h.filter(m=>m!==null),h.length<e&&(h=h.concat(Array(e-h.length).fill(null))),s=s.concat(h)}return[s,n]}function x_(i){const e=Math.sqrt(i.length);let n=0,s=[];for(let a=0;a<e;a++){const c=i.slice(a*e,a*e+e);let h=[];for(let m=0;m<e;m++)c[m]!==null&&h.push(c[m]);for(let m=h.length-1;m>0;m--)h[m]===h[m-1]&&(h[m]*=2,h[m-1]=null,n+=h[m]);h=h.filter(m=>m!==null),h.length<e&&(h=Array(e-h.length).fill(null).concat(h)),s=s.concat(h)}return[s,n]}function L_(i){const e=Math.sqrt(i.length);let n=0,s=Array(e*e).fill(null);for(let a=0;a<e;a++){let c=[];for(let h=0;h<e;h++)i[h*e+a]!==null&&c.push(i[h*e+a]);for(let h=0;h<c.length-1;h++)c[h]===c[h+1]&&(c[h]*=2,c[h+1]=null,n+=c[h]);c=c.filter(h=>h!==null),c.length<e&&(c=c.concat(Array(e-c.length).fill(null)));for(let h=0;h<e;h++)s[h*e+a]=c[h]}return[s,n]}function O_(i){const e=Math.sqrt(i.length);let n=0,s=Array(e*e).fill(null);for(let a=0;a<e;a++){let c=[];for(let h=0;h<e;h++)i[h*e+a]!==null&&c.push(i[h*e+a]);for(let h=c.length-1;h>0;h--)c[h]===c[h-1]&&(c[h]*=2,c[h-1]=null,n+=c[h]);c=c.filter(h=>h!==null),c.length<e&&(c=Array(e-c.length).fill(null).concat(c));for(let h=0;h<e;h++)s[h*e+a]=c[h]}return[s,n]}function M_(i){const e=Math.sqrt(i.length);for(let n=0;n<e;n++)for(let s=0;s<e;s++)if(i[n*e+s]===null||s>0&&i[n*e+s]===i[n*e+s-1]||s<e-1&&i[n*e+s]===i[n*e+s+1]||n>0&&i[n*e+s]===i[(n-1)*e+s]||n<e-1&&i[n*e+s]===i[(n+1)*e+s])return!0;return!1}function F_(i,e){return JSON.stringify(i)==JSON.stringify(e)}var Fp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},U_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],h=i[n++],m=i[n++],y=((a&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],h=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|h&63)}}return e.join("")},jm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],h=a+1<i.length,m=h?i[a+1]:0,y=a+2<i.length,E=y?i[a+2]:0,w=c>>2,C=(c&3)<<4|m>>4;let x=(m&15)<<2|E>>6,B=E&63;y||(B=64,h||(x=64)),s.push(n[w],n[C],n[x],n[B])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Bm(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):U_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const E=a<i.length?n[i.charAt(a)]:64;++a;const C=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||m==null||E==null||C==null)throw new z_;const x=c<<2|m>>4;if(s.push(x),E!==64){const B=m<<4&240|E>>2;if(s.push(B),C!==64){const K=E<<6&192|C;s.push(K)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class z_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B_=function(i){const e=Bm(i);return jm.encodeByteArray(e,!0)},$l=function(i){return B_(i).replace(/\./g,"")},j_=function(i){try{return jm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=()=>b_().__FIREBASE_DEFAULTS__,q_=()=>{if(typeof process>"u"||typeof Fp>"u")return;const i=Fp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},W_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&j_(i[1]);return e&&JSON.parse(e)},Ph=()=>{try{return $_()||q_()||W_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},H_=i=>{var e,n;return(n=(e=Ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},Q_=i=>{const e=H_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},bm=()=>{var i;return(i=Ph())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[$l(JSON.stringify(n)),$l(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y_(){var i;const e=(i=Ph())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J_(){return!Y_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z_(){try{return typeof indexedDB=="object"}catch{return!1}}function ev(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="FirebaseError";class bs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=tv,Object.setPrototypeOf(this,bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$m.prototype.create)}}class $m{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],h=c?nv(c,s):"Error",m=`${this.serviceName}: ${h} (${a}).`;return new bs(a,m,s)}}function nv(i,e){return i.replace(rv,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const rv=/\{\$([^}]+)}/g;function oh(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],h=e[a];if(Up(c)&&Up(h)){if(!oh(c,h))return!1}else if(c!==h)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Up(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(i){return i&&i._delegate?i._delegate:i}class Zo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new G_;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ov(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&h.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const h=this.instances.get(a);return h&&e(h,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:sv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sv(i){return i===Vi?void 0:i}function ov(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(De||(De={}));const lv={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},uv=De.INFO,cv={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},hv=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=cv[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qm{constructor(e){this.name=e,this._logLevel=uv,this._logHandler=hv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const fv=(i,e)=>e.some(n=>i instanceof n);let zp,Bp;function dv(){return zp||(zp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pv(){return Bp||(Bp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wm=new WeakMap,ah=new WeakMap,Hm=new WeakMap,Jc=new WeakMap,kh=new WeakMap;function mv(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{n($r(i.result)),a()},h=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Wm.set(n,i)}).catch(()=>{}),kh.set(e,i),e}function gv(i){if(ah.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{n(),a()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});ah.set(i,e)}let lh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return ah.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Hm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function yv(i){lh=i(lh)}function _v(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Zc(this),e,...n);return Hm.set(s,e.sort?e.sort():[e]),$r(s)}:pv().includes(i)?function(...e){return i.apply(Zc(this),e),$r(Wm.get(this))}:function(...e){return $r(i.apply(Zc(this),e))}}function vv(i){return typeof i=="function"?_v(i):(i instanceof IDBTransaction&&gv(i),fv(i,dv())?new Proxy(i,lh):i)}function $r(i){if(i instanceof IDBRequest)return mv(i);if(Jc.has(i))return Jc.get(i);const e=vv(i);return e!==i&&(Jc.set(i,e),kh.set(e,i)),e}const Zc=i=>kh.get(i);function Ev(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const h=indexedDB.open(i,e),m=$r(h);return s&&h.addEventListener("upgradeneeded",y=>{s($r(h.result),y.oldVersion,y.newVersion,$r(h.transaction),y)}),n&&h.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",E=>a(E.oldVersion,E.newVersion,E))}).catch(()=>{}),m}const wv=["get","getKey","getAll","getAllKeys","count"],Tv=["put","add","delete","clear"],eh=new Map;function jp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(eh.get(e))return eh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=Tv.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||wv.includes(n)))return;const c=async function(h,...m){const y=this.transaction(h,a?"readwrite":"readonly");let E=y.store;return s&&(E=E.index(m.shift())),(await Promise.all([E[n](...m),a&&y.done]))[0]};return eh.set(e,c),c}yv(i=>({...i,get:(e,n,s)=>jp(e,n)||i.get(e,n,s),has:(e,n)=>!!jp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Sv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Sv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uh="@firebase/app",bp="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new qm("@firebase/app"),Av="@firebase/app-compat",Rv="@firebase/analytics-compat",Cv="@firebase/analytics",Pv="@firebase/app-check-compat",kv="@firebase/app-check",Vv="@firebase/auth",Dv="@firebase/auth-compat",Nv="@firebase/database",xv="@firebase/data-connect",Lv="@firebase/database-compat",Ov="@firebase/functions",Mv="@firebase/functions-compat",Fv="@firebase/installations",Uv="@firebase/installations-compat",zv="@firebase/messaging",Bv="@firebase/messaging-compat",jv="@firebase/performance",bv="@firebase/performance-compat",$v="@firebase/remote-config",qv="@firebase/remote-config-compat",Wv="@firebase/storage",Hv="@firebase/storage-compat",Qv="@firebase/firestore",Gv="@firebase/vertexai",Kv="@firebase/firestore-compat",Xv="firebase",Yv="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="[DEFAULT]",Jv={[uh]:"fire-core",[Av]:"fire-core-compat",[Cv]:"fire-analytics",[Rv]:"fire-analytics-compat",[kv]:"fire-app-check",[Pv]:"fire-app-check-compat",[Vv]:"fire-auth",[Dv]:"fire-auth-compat",[Nv]:"fire-rtdb",[xv]:"fire-data-connect",[Lv]:"fire-rtdb-compat",[Ov]:"fire-fn",[Mv]:"fire-fn-compat",[Fv]:"fire-iid",[Uv]:"fire-iid-compat",[zv]:"fire-fcm",[Bv]:"fire-fcm-compat",[jv]:"fire-perf",[bv]:"fire-perf-compat",[$v]:"fire-rc",[qv]:"fire-rc-compat",[Wv]:"fire-gcs",[Hv]:"fire-gcs-compat",[Qv]:"fire-fst",[Kv]:"fire-fst-compat",[Gv]:"fire-vertex","fire-js":"fire-js",[Xv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new Map,Zv=new Map,hh=new Map;function $p(i,e){try{i.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Wl(i){const e=i.name;if(hh.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;hh.set(e,i);for(const n of ql.values())$p(n,i);for(const n of Zv.values())$p(n,i);return!0}function eE(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new $m("app","Firebase",tE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=Yv;function Qm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:ch,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw qr.create("bad-app-name",{appName:String(a)});if(n||(n=bm()),!n)throw qr.create("no-options");const c=ql.get(a);if(c){if(oh(n,c.options)&&oh(s,c.config))return c;throw qr.create("duplicate-app",{appName:a})}const h=new av(a);for(const y of hh.values())h.addComponent(y);const m=new nE(n,s,h);return ql.set(a,m),m}function iE(i=ch){const e=ql.get(i);if(!e&&i===ch&&bm())return Qm();if(!e)throw qr.create("no-app",{appName:i});return e}function xs(i,e,n){var s;let a=(s=Jv[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(m.join(" "));return}Wl(new Zo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="firebase-heartbeat-database",oE=1,ea="firebase-heartbeat-store";let th=null;function Gm(){return th||(th=Ev(sE,oE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ea)}catch(n){console.warn(n)}}}}).catch(i=>{throw qr.create("idb-open",{originalErrorMessage:i.message})})),th}async function aE(i){try{const n=(await Gm()).transaction(ea),s=await n.objectStore(ea).get(Km(i));return await n.done,s}catch(e){if(e instanceof bs)pr.warn(e.message);else{const n=qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function qp(i,e){try{const s=(await Gm()).transaction(ea,"readwrite");await s.objectStore(ea).put(e,Km(i)),await s.done}catch(n){if(n instanceof bs)pr.warn(n.message);else{const s=qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(s.message)}}}function Km(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=1024,uE=30*24*60*60*1e3;class cE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fE(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Wp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=uE}),this._storage.overwrite(this._heartbeatsCache))}catch(s){pr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wp(),{heartbeatsToSend:s,unsentEntries:a}=hE(this._heartbeatsCache.heartbeats),c=$l(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return pr.warn(n),""}}}function Wp(){return new Date().toISOString().substring(0,10)}function hE(i,e=lE){const n=[];let s=i.slice();for(const a of i){const c=n.find(h=>h.agent===a.agent);if(c){if(c.dates.push(a.date),Hp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Hp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class fE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z_()?ev().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return qp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return qp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Hp(i){return $l(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(i){Wl(new Zo("platform-logger",e=>new Iv(e),"PRIVATE")),Wl(new Zo("heartbeat",e=>new cE(e),"PRIVATE")),xs(uh,bp,i),xs(uh,bp,"esm2017"),xs("fire-js","")}dE("");var pE="firebase",mE="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(pE,mE,"app");var Qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,Xm;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,I){function A(){}A.prototype=I.prototype,V.D=I.prototype,V.prototype=new A,V.prototype.constructor=V,V.C=function(k,D,L){for(var S=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)S[Ze-2]=arguments[Ze];return I.prototype[D].apply(k,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,I,A){A||(A=0);var k=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)k[D]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(D=0;16>D;++D)k[D]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=V.g[0],A=V.g[1],D=V.g[2];var L=V.g[3],S=I+(L^A&(D^L))+k[0]+3614090360&4294967295;I=A+(S<<7&4294967295|S>>>25),S=L+(D^I&(A^D))+k[1]+3905402710&4294967295,L=I+(S<<12&4294967295|S>>>20),S=D+(A^L&(I^A))+k[2]+606105819&4294967295,D=L+(S<<17&4294967295|S>>>15),S=A+(I^D&(L^I))+k[3]+3250441966&4294967295,A=D+(S<<22&4294967295|S>>>10),S=I+(L^A&(D^L))+k[4]+4118548399&4294967295,I=A+(S<<7&4294967295|S>>>25),S=L+(D^I&(A^D))+k[5]+1200080426&4294967295,L=I+(S<<12&4294967295|S>>>20),S=D+(A^L&(I^A))+k[6]+2821735955&4294967295,D=L+(S<<17&4294967295|S>>>15),S=A+(I^D&(L^I))+k[7]+4249261313&4294967295,A=D+(S<<22&4294967295|S>>>10),S=I+(L^A&(D^L))+k[8]+1770035416&4294967295,I=A+(S<<7&4294967295|S>>>25),S=L+(D^I&(A^D))+k[9]+2336552879&4294967295,L=I+(S<<12&4294967295|S>>>20),S=D+(A^L&(I^A))+k[10]+4294925233&4294967295,D=L+(S<<17&4294967295|S>>>15),S=A+(I^D&(L^I))+k[11]+2304563134&4294967295,A=D+(S<<22&4294967295|S>>>10),S=I+(L^A&(D^L))+k[12]+1804603682&4294967295,I=A+(S<<7&4294967295|S>>>25),S=L+(D^I&(A^D))+k[13]+4254626195&4294967295,L=I+(S<<12&4294967295|S>>>20),S=D+(A^L&(I^A))+k[14]+2792965006&4294967295,D=L+(S<<17&4294967295|S>>>15),S=A+(I^D&(L^I))+k[15]+1236535329&4294967295,A=D+(S<<22&4294967295|S>>>10),S=I+(D^L&(A^D))+k[1]+4129170786&4294967295,I=A+(S<<5&4294967295|S>>>27),S=L+(A^D&(I^A))+k[6]+3225465664&4294967295,L=I+(S<<9&4294967295|S>>>23),S=D+(I^A&(L^I))+k[11]+643717713&4294967295,D=L+(S<<14&4294967295|S>>>18),S=A+(L^I&(D^L))+k[0]+3921069994&4294967295,A=D+(S<<20&4294967295|S>>>12),S=I+(D^L&(A^D))+k[5]+3593408605&4294967295,I=A+(S<<5&4294967295|S>>>27),S=L+(A^D&(I^A))+k[10]+38016083&4294967295,L=I+(S<<9&4294967295|S>>>23),S=D+(I^A&(L^I))+k[15]+3634488961&4294967295,D=L+(S<<14&4294967295|S>>>18),S=A+(L^I&(D^L))+k[4]+3889429448&4294967295,A=D+(S<<20&4294967295|S>>>12),S=I+(D^L&(A^D))+k[9]+568446438&4294967295,I=A+(S<<5&4294967295|S>>>27),S=L+(A^D&(I^A))+k[14]+3275163606&4294967295,L=I+(S<<9&4294967295|S>>>23),S=D+(I^A&(L^I))+k[3]+4107603335&4294967295,D=L+(S<<14&4294967295|S>>>18),S=A+(L^I&(D^L))+k[8]+1163531501&4294967295,A=D+(S<<20&4294967295|S>>>12),S=I+(D^L&(A^D))+k[13]+2850285829&4294967295,I=A+(S<<5&4294967295|S>>>27),S=L+(A^D&(I^A))+k[2]+4243563512&4294967295,L=I+(S<<9&4294967295|S>>>23),S=D+(I^A&(L^I))+k[7]+1735328473&4294967295,D=L+(S<<14&4294967295|S>>>18),S=A+(L^I&(D^L))+k[12]+2368359562&4294967295,A=D+(S<<20&4294967295|S>>>12),S=I+(A^D^L)+k[5]+4294588738&4294967295,I=A+(S<<4&4294967295|S>>>28),S=L+(I^A^D)+k[8]+2272392833&4294967295,L=I+(S<<11&4294967295|S>>>21),S=D+(L^I^A)+k[11]+1839030562&4294967295,D=L+(S<<16&4294967295|S>>>16),S=A+(D^L^I)+k[14]+4259657740&4294967295,A=D+(S<<23&4294967295|S>>>9),S=I+(A^D^L)+k[1]+2763975236&4294967295,I=A+(S<<4&4294967295|S>>>28),S=L+(I^A^D)+k[4]+1272893353&4294967295,L=I+(S<<11&4294967295|S>>>21),S=D+(L^I^A)+k[7]+4139469664&4294967295,D=L+(S<<16&4294967295|S>>>16),S=A+(D^L^I)+k[10]+3200236656&4294967295,A=D+(S<<23&4294967295|S>>>9),S=I+(A^D^L)+k[13]+681279174&4294967295,I=A+(S<<4&4294967295|S>>>28),S=L+(I^A^D)+k[0]+3936430074&4294967295,L=I+(S<<11&4294967295|S>>>21),S=D+(L^I^A)+k[3]+3572445317&4294967295,D=L+(S<<16&4294967295|S>>>16),S=A+(D^L^I)+k[6]+76029189&4294967295,A=D+(S<<23&4294967295|S>>>9),S=I+(A^D^L)+k[9]+3654602809&4294967295,I=A+(S<<4&4294967295|S>>>28),S=L+(I^A^D)+k[12]+3873151461&4294967295,L=I+(S<<11&4294967295|S>>>21),S=D+(L^I^A)+k[15]+530742520&4294967295,D=L+(S<<16&4294967295|S>>>16),S=A+(D^L^I)+k[2]+3299628645&4294967295,A=D+(S<<23&4294967295|S>>>9),S=I+(D^(A|~L))+k[0]+4096336452&4294967295,I=A+(S<<6&4294967295|S>>>26),S=L+(A^(I|~D))+k[7]+1126891415&4294967295,L=I+(S<<10&4294967295|S>>>22),S=D+(I^(L|~A))+k[14]+2878612391&4294967295,D=L+(S<<15&4294967295|S>>>17),S=A+(L^(D|~I))+k[5]+4237533241&4294967295,A=D+(S<<21&4294967295|S>>>11),S=I+(D^(A|~L))+k[12]+1700485571&4294967295,I=A+(S<<6&4294967295|S>>>26),S=L+(A^(I|~D))+k[3]+2399980690&4294967295,L=I+(S<<10&4294967295|S>>>22),S=D+(I^(L|~A))+k[10]+4293915773&4294967295,D=L+(S<<15&4294967295|S>>>17),S=A+(L^(D|~I))+k[1]+2240044497&4294967295,A=D+(S<<21&4294967295|S>>>11),S=I+(D^(A|~L))+k[8]+1873313359&4294967295,I=A+(S<<6&4294967295|S>>>26),S=L+(A^(I|~D))+k[15]+4264355552&4294967295,L=I+(S<<10&4294967295|S>>>22),S=D+(I^(L|~A))+k[6]+2734768916&4294967295,D=L+(S<<15&4294967295|S>>>17),S=A+(L^(D|~I))+k[13]+1309151649&4294967295,A=D+(S<<21&4294967295|S>>>11),S=I+(D^(A|~L))+k[4]+4149444226&4294967295,I=A+(S<<6&4294967295|S>>>26),S=L+(A^(I|~D))+k[11]+3174756917&4294967295,L=I+(S<<10&4294967295|S>>>22),S=D+(I^(L|~A))+k[2]+718787259&4294967295,D=L+(S<<15&4294967295|S>>>17),S=A+(L^(D|~I))+k[9]+3951481745&4294967295,V.g[0]=V.g[0]+I&4294967295,V.g[1]=V.g[1]+(D+(S<<21&4294967295|S>>>11))&4294967295,V.g[2]=V.g[2]+D&4294967295,V.g[3]=V.g[3]+L&4294967295}s.prototype.u=function(V,I){I===void 0&&(I=V.length);for(var A=I-this.blockSize,k=this.B,D=this.h,L=0;L<I;){if(D==0)for(;L<=A;)a(this,V,L),L+=this.blockSize;if(typeof V=="string"){for(;L<I;)if(k[D++]=V.charCodeAt(L++),D==this.blockSize){a(this,k),D=0;break}}else for(;L<I;)if(k[D++]=V[L++],D==this.blockSize){a(this,k),D=0;break}}this.h=D,this.o+=I},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var I=1;I<V.length-8;++I)V[I]=0;var A=8*this.o;for(I=V.length-8;I<V.length;++I)V[I]=A&255,A/=256;for(this.u(V),V=Array(16),I=A=0;4>I;++I)for(var k=0;32>k;k+=8)V[A++]=this.g[I]>>>k&255;return V};function c(V,I){var A=m;return Object.prototype.hasOwnProperty.call(A,V)?A[V]:A[V]=I(V)}function h(V,I){this.h=I;for(var A=[],k=!0,D=V.length-1;0<=D;D--){var L=V[D]|0;k&&L==I||(A[D]=L,k=!1)}this.g=A}var m={};function y(V){return-128<=V&&128>V?c(V,function(I){return new h([I|0],0>I?-1:0)}):new h([V|0],0>V?-1:0)}function E(V){if(isNaN(V)||!isFinite(V))return C;if(0>V)return W(E(-V));for(var I=[],A=1,k=0;V>=A;k++)I[k]=V/A|0,A*=4294967296;return new h(I,0)}function w(V,I){if(V.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V.charAt(0)=="-")return W(w(V.substring(1),I));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=E(Math.pow(I,8)),k=C,D=0;D<V.length;D+=8){var L=Math.min(8,V.length-D),S=parseInt(V.substring(D,D+L),I);8>L?(L=E(Math.pow(I,L)),k=k.j(L).add(E(S))):(k=k.j(A),k=k.add(E(S)))}return k}var C=y(0),x=y(1),B=y(16777216);i=h.prototype,i.m=function(){if(X(this))return-W(this).m();for(var V=0,I=1,A=0;A<this.g.length;A++){var k=this.i(A);V+=(0<=k?k:4294967296+k)*I,I*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(K(this))return"0";if(X(this))return"-"+W(this).toString(V);for(var I=E(Math.pow(V,6)),A=this,k="";;){var D=ve(A,I).g;A=te(A,D.j(I));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(V);if(A=D,K(A))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function K(V){if(V.h!=0)return!1;for(var I=0;I<V.g.length;I++)if(V.g[I]!=0)return!1;return!0}function X(V){return V.h==-1}i.l=function(V){return V=te(this,V),X(V)?-1:K(V)?0:1};function W(V){for(var I=V.g.length,A=[],k=0;k<I;k++)A[k]=~V.g[k];return new h(A,~V.h).add(x)}i.abs=function(){return X(this)?W(this):this},i.add=function(V){for(var I=Math.max(this.g.length,V.g.length),A=[],k=0,D=0;D<=I;D++){var L=k+(this.i(D)&65535)+(V.i(D)&65535),S=(L>>>16)+(this.i(D)>>>16)+(V.i(D)>>>16);k=S>>>16,L&=65535,S&=65535,A[D]=S<<16|L}return new h(A,A[A.length-1]&-2147483648?-1:0)};function te(V,I){return V.add(W(I))}i.j=function(V){if(K(this)||K(V))return C;if(X(this))return X(V)?W(this).j(W(V)):W(W(this).j(V));if(X(V))return W(this.j(W(V)));if(0>this.l(B)&&0>V.l(B))return E(this.m()*V.m());for(var I=this.g.length+V.g.length,A=[],k=0;k<2*I;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<V.g.length;D++){var L=this.i(k)>>>16,S=this.i(k)&65535,Ze=V.i(D)>>>16,Pt=V.i(D)&65535;A[2*k+2*D]+=S*Pt,ye(A,2*k+2*D),A[2*k+2*D+1]+=L*Pt,ye(A,2*k+2*D+1),A[2*k+2*D+1]+=S*Ze,ye(A,2*k+2*D+1),A[2*k+2*D+2]+=L*Ze,ye(A,2*k+2*D+2)}for(k=0;k<I;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=I;k<2*I;k++)A[k]=0;return new h(A,0)};function ye(V,I){for(;(V[I]&65535)!=V[I];)V[I+1]+=V[I]>>>16,V[I]&=65535,I++}function he(V,I){this.g=V,this.h=I}function ve(V,I){if(K(I))throw Error("division by zero");if(K(V))return new he(C,C);if(X(V))return I=ve(W(V),I),new he(W(I.g),W(I.h));if(X(I))return I=ve(V,W(I)),new he(W(I.g),I.h);if(30<V.g.length){if(X(V)||X(I))throw Error("slowDivide_ only works with positive integers.");for(var A=x,k=I;0>=k.l(V);)A=He(A),k=He(k);var D=Se(A,1),L=Se(k,1);for(k=Se(k,2),A=Se(A,2);!K(k);){var S=L.add(k);0>=S.l(V)&&(D=D.add(A),L=S),k=Se(k,1),A=Se(A,1)}return I=te(V,D.j(I)),new he(D,I)}for(D=C;0<=V.l(I);){for(A=Math.max(1,Math.floor(V.m()/I.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=E(A),S=L.j(I);X(S)||0<S.l(V);)A-=k,L=E(A),S=L.j(I);K(L)&&(L=x),D=D.add(L),V=te(V,S)}return new he(D,V)}i.A=function(V){return ve(this,V).h},i.and=function(V){for(var I=Math.max(this.g.length,V.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)&V.i(k);return new h(A,this.h&V.h)},i.or=function(V){for(var I=Math.max(this.g.length,V.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)|V.i(k);return new h(A,this.h|V.h)},i.xor=function(V){for(var I=Math.max(this.g.length,V.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)^V.i(k);return new h(A,this.h^V.h)};function He(V){for(var I=V.g.length+1,A=[],k=0;k<I;k++)A[k]=V.i(k)<<1|V.i(k-1)>>>31;return new h(A,V.h)}function Se(V,I){var A=I>>5;I%=32;for(var k=V.g.length-A,D=[],L=0;L<k;L++)D[L]=0<I?V.i(L+A)>>>I|V.i(L+A+1)<<32-I:V.i(L+A);return new h(D,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Xm=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=E,h.fromString=w,Wr=h}).apply(typeof Qp<"u"?Qp:typeof self<"u"?self:typeof window<"u"?window:{});var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ym,Wo,Jm,Ml,fh,Zm,eg,tg;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vl=="object"&&Vl];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var g=s;l=l.split(".");for(var v=0;v<l.length-1;v++){var O=l[v];if(!(O in g))break e;g=g[O]}l=l[l.length-1],v=g[l],d=d(v),d!=v&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var g=0,v=!1,O={next:function(){if(!v&&g<l.length){var z=g++;return{value:d(z,l[z]),done:!1}}return v=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function y(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function E(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function w(l,d,g){return l.call.apply(l.bind,arguments)}function C(l,d,g){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,v),l.apply(d,O)}}return function(){return l.apply(d,arguments)}}function x(l,d,g){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:C,x.apply(null,arguments)}function B(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function K(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(v,O,z){for(var Y=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)Y[Fe-2]=arguments[Fe];return d.prototype[O].apply(v,Y)}}function X(l){const d=l.length;if(0<d){const g=Array(d);for(let v=0;v<d;v++)g[v]=l[v];return g}return[]}function W(l,d){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(y(v)){const O=l.length||0,z=v.length||0;l.length=O+z;for(let Y=0;Y<z;Y++)l[O+Y]=v[Y]}else l.push(v)}}class te{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ye(l){return/^[\s\xa0]*$/.test(l)}function he(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function ve(l){return ve[" "](l),l}ve[" "]=function(){};var He=he().indexOf("Gecko")!=-1&&!(he().toLowerCase().indexOf("webkit")!=-1&&he().indexOf("Edge")==-1)&&!(he().indexOf("Trident")!=-1||he().indexOf("MSIE")!=-1)&&he().indexOf("Edge")==-1;function Se(l,d,g){for(const v in l)d.call(g,l[v],v,l)}function V(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function I(l){const d={};for(const g in l)d[g]=l[g];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,d){let g,v;for(let O=1;O<arguments.length;O++){v=arguments[O];for(g in v)l[g]=v[g];for(let z=0;z<A.length;z++)g=A[z],Object.prototype.hasOwnProperty.call(v,g)&&(l[g]=v[g])}}function D(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function L(l){m.setTimeout(()=>{throw l},0)}function S(){var l=ce;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Ze{constructor(){this.h=this.g=null}add(d,g){const v=Pt.get();v.set(d,g),this.h?this.h.next=v:this.g=v,this.h=v}}var Pt=new te(()=>new kt,l=>l.reset());class kt{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,J=!1,ce=new Ze,ne=()=>{const l=m.Promise.resolve(void 0);Ue=()=>{l.then(N)}};var N=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){L(g)}var d=Pt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}J=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return l}();function we(l,d){if(le.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(He){e:{try{ve(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Pe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&we.aa.h.call(this)}}K(we,le);var Pe={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),Me=0;function je(l,d,g,v,O){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!v,this.ha=O,this.key=++Me,this.da=this.fa=!1}function pt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Xn(l){this.src=l,this.g={},this.h=0}Xn.prototype.add=function(l,d,g,v,O){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var Y=yr(l,d,v,O);return-1<Y?(d=l[Y],g||(d.fa=!1)):(d=new je(d,this.src,z,!!v,O),d.fa=g,l.push(d)),d};function Mi(l,d){var g=d.type;if(g in l.g){var v=l.g[g],O=Array.prototype.indexOf.call(v,d,void 0),z;(z=0<=O)&&Array.prototype.splice.call(v,O,1),z&&(pt(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function yr(l,d,g,v){for(var O=0;O<l.length;++O){var z=l[O];if(!z.da&&z.listener==d&&z.capture==!!g&&z.ha==v)return O}return-1}var ni="closure_lm_"+(1e6*Math.random()|0),Fi={};function Gs(l,d,g,v,O){if(Array.isArray(d)){for(var z=0;z<d.length;z++)Gs(l,d[z],g,v,O);return null}return g=Ys(g),l&&l[Oe]?l.K(d,g,E(v)?!!v.capture:!1,O):Ks(l,d,g,!1,v,O)}function Ks(l,d,g,v,O,z){if(!d)throw Error("Invalid event type");var Y=E(O)?!!O.capture:!!O,Fe=zi(l);if(Fe||(l[ni]=Fe=new Xn(l)),g=Fe.add(d,g,v,Y,z),g.proxy)return g;if(v=pa(),g.proxy=v,v.src=l,v.listener=g,l.addEventListener)Ee||(O=Y),O===void 0&&(O=!1),l.addEventListener(d.toString(),v,O);else if(l.attachEvent)l.attachEvent(Jn(d.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function pa(){function l(g){return d.call(l.src,l.listener,g)}const d=Xs;return l}function Ui(l,d,g,v,O){if(Array.isArray(d))for(var z=0;z<d.length;z++)Ui(l,d[z],g,v,O);else v=E(v)?!!v.capture:!!v,g=Ys(g),l&&l[Oe]?(l=l.i,d=String(d).toString(),d in l.g&&(z=l.g[d],g=yr(z,g,v,O),-1<g&&(pt(z[g]),Array.prototype.splice.call(z,g,1),z.length==0&&(delete l.g[d],l.h--)))):l&&(l=zi(l))&&(d=l.g[d.toString()],l=-1,d&&(l=yr(d,g,v,O)),(g=-1<l?d[l]:null)&&Yn(g))}function Yn(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Oe])Mi(d.i,l);else{var g=l.type,v=l.proxy;d.removeEventListener?d.removeEventListener(g,v,l.capture):d.detachEvent?d.detachEvent(Jn(g),v):d.addListener&&d.removeListener&&d.removeListener(v),(g=zi(d))?(Mi(g,l),g.h==0&&(g.src=null,d[ni]=null)):pt(l)}}}function Jn(l){return l in Fi?Fi[l]:Fi[l]="on"+l}function Xs(l,d){if(l.da)l=!0;else{d=new we(d,this);var g=l.listener,v=l.ha||l.src;l.fa&&Yn(l),l=g.call(v,d)}return l}function zi(l){return l=l[ni],l instanceof Xn?l:null}var Bi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ys(l){return typeof l=="function"?l:(l[Bi]||(l[Bi]=function(d){return l.handleEvent(d)}),l[Bi])}function at(){$.call(this),this.i=new Xn(this),this.M=this,this.F=null}K(at,$),at.prototype[Oe]=!0,at.prototype.removeEventListener=function(l,d,g,v){Ui(this,l,d,g,v)};function lt(l,d){var g,v=l.F;if(v)for(g=[];v;v=v.F)g.push(v);if(l=l.M,v=d.type||d,typeof d=="string")d=new le(d,l);else if(d instanceof le)d.target=d.target||l;else{var O=d;d=new le(v,l),k(d,O)}if(O=!0,g)for(var z=g.length-1;0<=z;z--){var Y=d.g=g[z];O=Zn(Y,v,!0,d)&&O}if(Y=d.g=l,O=Zn(Y,v,!0,d)&&O,O=Zn(Y,v,!1,d)&&O,g)for(z=0;z<g.length;z++)Y=d.g=g[z],O=Zn(Y,v,!1,d)&&O}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],v=0;v<g.length;v++)pt(g[v]);delete l.g[d],l.h--}}this.F=null},at.prototype.K=function(l,d,g,v){return this.i.add(String(l),d,!1,g,v)},at.prototype.L=function(l,d,g,v){return this.i.add(String(l),d,!0,g,v)};function Zn(l,d,g,v){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,z=0;z<d.length;++z){var Y=d[z];if(Y&&!Y.da&&Y.capture==g){var Fe=Y.listener,ut=Y.ha||Y.src;Y.fa&&Mi(l.i,Y),O=Fe.call(ut,v)!==!1&&O}}return O&&!v.defaultPrevented}function Js(l,d,g){if(typeof l=="function")g&&(l=x(l,g));else if(l&&typeof l.handleEvent=="function")l=x(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function _r(l){l.g=Js(()=>{l.g=null,l.i&&(l.i=!1,_r(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ri extends ${constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ii(l){$.call(this),this.h=l,this.g={}}K(ii,$);var Zs=[];function eo(l){Se(l.g,function(d,g){this.g.hasOwnProperty(g)&&Yn(d)},l),l.g={}}ii.prototype.N=function(){ii.aa.N.call(this),eo(this)},ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var to=m.JSON.stringify,no=m.JSON.parse,ro=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function si(){}si.prototype.h=null;function ji(l){return l.h||(l.h=l.i())}function bi(){}var ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function On(){le.call(this,"d")}K(On,le);function $i(){le.call(this,"c")}K($i,le);var Mn={},io=null;function oi(){return io=io||new at}Mn.La="serverreachability";function so(l){le.call(this,Mn.La,l)}K(so,le);function er(l){const d=oi();lt(d,new so(d))}Mn.STAT_EVENT="statevent";function oo(l,d){le.call(this,Mn.STAT_EVENT,l),this.stat=d}K(oo,le);function et(l){const d=oi();lt(d,new oo(d,l))}Mn.Ma="timingevent";function qi(l,d){le.call(this,Mn.Ma,l),this.size=d}K(qi,le);function _n(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function ai(){this.g=!0}ai.prototype.xa=function(){this.g=!1};function li(l,d,g,v,O,z){l.info(function(){if(l.g)if(z)for(var Y="",Fe=z.split("&"),ut=0;ut<Fe.length;ut++){var ke=Fe[ut].split("=");if(1<ke.length){var mt=ke[0];ke=ke[1];var rt=mt.split("_");Y=2<=rt.length&&rt[1]=="type"?Y+(mt+"="+ke+"&"):Y+(mt+"=redacted&")}}else Y=null;else Y=z;return"XMLHTTP REQ ("+v+") [attempt "+O+"]: "+d+`
`+g+`
`+Y})}function Wi(l,d,g,v,O,z,Y){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+O+"]: "+d+`
`+g+`
`+z+" "+Y})}function vn(l,d,g,v){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+_u(l,g)+(v?" "+v:"")})}function ao(l,d){l.info(function(){return"TIMEOUT: "+d})}ai.prototype.info=function(){};function _u(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var v=g[l];if(!(2>v.length)){var O=v[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Y=1;Y<O.length;Y++)O[Y]=""}}}}return to(g)}catch{return d}}var Hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ma={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},En;function ui(){}K(ui,si),ui.prototype.g=function(){return new XMLHttpRequest},ui.prototype.i=function(){return{}},En=new ui;function wn(l,d,g,v){this.j=l,this.i=d,this.l=g,this.R=v||1,this.U=new ii(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ga}function ga(){this.i=null,this.g="",this.h=!1}var lo={},Qi={};function Gi(l,d,g){l.L=1,l.v=Ir(Zt(d)),l.m=g,l.P=!0,uo(l,null)}function uo(l,d){l.F=Date.now(),be(l),l.A=Zt(l.v);var g=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Ar(g.i,"t",v),l.C=0,g=l.j.J,l.h=new ga,l.g=La(l.j,g?d:null,!l.m),0<l.O&&(l.M=new ri(x(l.Y,l,l.g),l.O)),d=l.U,g=l.g,v=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Zs[0]=O.toString()),O=Zs);for(var z=0;z<O.length;z++){var Y=Gs(g,O[z],v||d.handleEvent,!1,d.h||d);if(!Y)break;d.g[Y.key]=Y}d=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),er(),li(l.i,l.u,l.A,l.l,l.R,l.m)}wn.prototype.ca=function(l){l=l.target;const d=this.M;d&&bt(l)==3?d.j():this.Y(l)},wn.prototype.Y=function(l){try{if(l==this.g)e:{const rt=bt(this.g);var d=this.g.Ba();const hn=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||go(this.g)))){this.J||rt!=4||d==7||(d==8||0>=hn?er(3):er(2)),ci(this);var g=this.g.Z();this.X=g;t:if(ya(this)){var v=go(this.g);l="";var O=v.length,z=bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),vr(this);var Y="";break t}this.h.i=new m.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,l+=this.h.i.decode(v[d],{stream:!(z&&d==O-1)});v.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,Wi(this.i,this.u,this.A,this.l,this.R,rt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,ut=this.g;if((Fe=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ye(Fe)){var ke=Fe;break t}}ke=null}if(g=ke)vn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,co(this,g);else{this.o=!1,this.s=3,et(12),un(this),vr(this);break e}}if(this.P){g=!0;let tn;for(;!this.J&&this.C<Y.length;)if(tn=vu(this,Y),tn==Qi){rt==4&&(this.s=4,et(14),g=!1),vn(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==lo){this.s=4,et(15),vn(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else vn(this.i,this.l,tn,null),co(this,tn);if(ya(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||Y.length!=0||this.h.h||(this.s=1,et(16),g=!1),this.o=this.o&&g,!g)vn(this.i,this.l,Y,"[Invalid Chunked Response]"),un(this),vr(this);else if(0<Y.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),_o(mt),mt.M=!0,et(11))}}else vn(this.i,this.l,Y,null),co(this,Y);rt==4&&un(this),this.o&&!this.J&&(rt==4?ss(this.j,this):(this.o=!1,be(this)))}else es(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),un(this),vr(this)}}}catch{}finally{}};function ya(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function vu(l,d){var g=l.C,v=d.indexOf(`
`,g);return v==-1?Qi:(g=Number(d.substring(g,v)),isNaN(g)?lo:(v+=1,v+g>d.length?Qi:(d=d.slice(v,v+g),l.C=v+g,d)))}wn.prototype.cancel=function(){this.J=!0,un(this)};function be(l){l.S=Date.now()+l.I,_a(l,l.I)}function _a(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=_n(x(l.ba,l),d)}function ci(l){l.B&&(m.clearTimeout(l.B),l.B=null)}wn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ao(this.i,this.A),this.L!=2&&(er(),et(17)),un(this),this.s=2,vr(this)):_a(this,this.S-l)};function vr(l){l.j.G==0||l.J||ss(l.j,l)}function un(l){ci(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,eo(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function co(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||Mt(g.h,l))){if(!l.K&&Mt(g.h,l)&&g.G==3){try{var v=g.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var O=v;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)is(g),Rn(g);else break e;rs(g),et(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=_n(x(g.Za,g),6e3));if(1>=Ea(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else sr(g,11)}else if((l.K||g.g==l)&&is(g),!ye(d))for(O=g.Da.g.parse(d),d=0;d<O.length;d++){let ke=O[d];if(g.T=ke[0],ke=ke[1],g.G==2)if(ke[0]=="c"){g.K=ke[1],g.ia=ke[2];const mt=ke[3];mt!=null&&(g.la=mt,g.j.info("VER="+g.la));const rt=ke[4];rt!=null&&(g.Aa=rt,g.j.info("SVER="+g.Aa));const hn=ke[5];hn!=null&&typeof hn=="number"&&0<hn&&(v=1.5*hn,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const tn=l.g;if(tn){const yi=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yi){var z=v.h;z.g||yi.indexOf("spdy")==-1&&yi.indexOf("quic")==-1&&yi.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(ho(z,z.h),z.h=null))}if(v.D){const as=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;as&&(v.ya=as,ze(v.I,v.D,as))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var Y=l;if(v.qa=xa(v,v.J?v.ia:null,v.W),Y.K){wa(v.h,Y);var Fe=Y,ut=v.L;ut&&(Fe.I=ut),Fe.B&&(ci(Fe),be(Fe)),v.g=Y}else gi(v);0<g.i.length&&Bn(g)}else ke[0]!="stop"&&ke[0]!="close"||sr(g,7);else g.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?sr(g,7):Tt(g):ke[0]!="noop"&&g.l&&g.l.ta(ke),g.v=0)}}er(4)}catch{}}var va=class{constructor(l,d){this.g=l,this.map=d}};function hi(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ea(l){return l.h?1:l.g?l.g.size:0}function Mt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function ho(l,d){l.g?l.g.add(d):l.h=d}function wa(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}hi.prototype.cancel=function(){if(this.i=Ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ta(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return X(l.i)}function Ki(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var d=[],g=l.length,v=0;v<g;v++)d.push(l[v]);return d}d=[],g=0;for(v in l)d[g++]=l[v];return d}function Xi(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const v in l)d[g++]=v;return d}}}function Er(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=Xi(l),v=Ki(l),O=v.length,z=0;z<O;z++)d.call(void 0,v[z],g&&g[z],l)}var fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eu(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var v=l[g].indexOf("="),O=null;if(0<=v){var z=l[g].substring(0,v);O=l[g].substring(v+1)}else z=l[g];d(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function tr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof tr){this.h=l.h,di(this,l.j),this.o=l.o,this.g=l.g,wr(this,l.s),this.l=l.l;var d=l.i,g=new Fn;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),Tr(this,g),this.m=l.m}else l&&(d=String(l).match(fi))?(this.h=!1,di(this,d[1]||"",!0),this.o=Ae(d[2]||""),this.g=Ae(d[3]||"",!0),wr(this,d[4]),this.l=Ae(d[5]||"",!0),Tr(this,d[6]||"",!0),this.m=Ae(d[7]||"")):(this.h=!1,this.i=new Fn(null,this.h))}tr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Sr(d,Yi,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Sr(d,Yi,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Sr(g,g.charAt(0)=="/"?Aa:Sa,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Sr(g,fo)),l.join("")};function Zt(l){return new tr(l)}function di(l,d,g){l.j=g?Ae(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function wr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Tr(l,d,g){d instanceof Fn?(l.i=d,Un(l.i,l.h)):(g||(d=Sr(d,Ra)),l.i=new Fn(d,l.h))}function ze(l,d,g){l.i.set(d,g)}function Ir(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ae(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Sr(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,Ia),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ia(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Yi=/[#\/\?@]/g,Sa=/[#\?:]/g,Aa=/[#\?]/g,Ra=/[#\?@]/g,fo=/#/g;function Fn(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function wt(l){l.g||(l.g=new Map,l.h=0,l.i&&Eu(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=Fn.prototype,i.add=function(l,d){wt(this),this.i=null,l=cn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function Tn(l,d){wt(l),d=cn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function In(l,d){return wt(l),d=cn(l,d),l.g.has(d)}i.forEach=function(l,d){wt(this),this.g.forEach(function(g,v){g.forEach(function(O){l.call(d,O,v,this)},this)},this)},i.na=function(){wt(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let v=0;v<d.length;v++){const O=l[v];for(let z=0;z<O.length;z++)g.push(d[v])}return g},i.V=function(l){wt(this);let d=[];if(typeof l=="string")In(this,l)&&(d=d.concat(this.g.get(cn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},i.set=function(l,d){return wt(this),this.i=null,l=cn(this,l),In(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Ar(l,d,g){Tn(l,d),0<g.length&&(l.i=null,l.g.set(cn(l,d),X(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var v=d[g];const z=encodeURIComponent(String(v)),Y=this.V(v);for(v=0;v<Y.length;v++){var O=z;Y[v]!==""&&(O+="="+encodeURIComponent(String(Y[v]))),l.push(O)}}return this.i=l.join("&")};function cn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Un(l,d){d&&!l.j&&(wt(l),l.i=null,l.g.forEach(function(g,v){var O=v.toLowerCase();v!=O&&(Tn(this,v),Ar(this,O,g))},l)),l.j=d}function wu(l,d){const g=new ai;if(m.Image){const v=new Image;v.onload=B(jt,g,"TestLoadImage: loaded",!0,d,v),v.onerror=B(jt,g,"TestLoadImage: error",!1,d,v),v.onabort=B(jt,g,"TestLoadImage: abort",!1,d,v),v.ontimeout=B(jt,g,"TestLoadImage: timeout",!1,d,v),m.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else d(!1)}function Ca(l,d){const g=new ai,v=new AbortController,O=setTimeout(()=>{v.abort(),jt(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:v.signal}).then(z=>{clearTimeout(O),z.ok?jt(g,"TestPingServer: ok",!0,d):jt(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),jt(g,"TestPingServer: error",!1,d)})}function jt(l,d,g,v,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),v(g)}catch{}}function Tu(){this.g=new ro}function Pa(l,d,g){const v=g||"";try{Er(l,function(O,z){let Y=O;E(O)&&(Y=to(O)),d.push(v+z+"="+encodeURIComponent(Y))})}catch(O){throw d.push(v+"type="+encodeURIComponent("_badmap")),O}}function nr(l){this.l=l.Ub||null,this.j=l.eb||!1}K(nr,si),nr.prototype.g=function(){return new pi(this.l,this.j)},nr.prototype.i=function(l){return function(){return l}}({});function pi(l,d){at.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(pi,at),i=pi.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,An(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ka(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ka(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Sn(this):An(this),this.readyState==3&&ka(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Sn(this))},i.Qa=function(l){this.g&&(this.response=l,Sn(this))},i.ga=function(){this.g&&Sn(this)};function Sn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,An(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function An(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function rr(l){let d="";return Se(l,function(g,v){d+=v,d+=":",d+=g,d+=`\r
`}),d}function Rr(l,d,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=rr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ze(l,d,g))}function Qe(l){at.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(Qe,at);var Iu=/^https?$/i,po=["POST","PUT"];i=Qe.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():En.g(),this.v=this.o?ji(this.o):ji(En),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(z){mi(this,z);return}if(l=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var O in v)g.set(O,v[O]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const z of v.keys())g.set(z,v.get(z));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(z=>z.toLowerCase()=="content-type"),O=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(po,d,void 0))||v||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,Y]of g)this.g.setRequestHeader(z,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zi(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){mi(this,z)}};function mi(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Ji(l),en(l)}function Ji(l){l.A||(l.A=!0,lt(l,"complete"),lt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,lt(this,"complete"),lt(this,"abort"),en(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),en(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?mo(this):this.bb())},i.bb=function(){mo(this)};function mo(l){if(l.h&&typeof h<"u"&&(!l.v[1]||bt(l)!=4||l.Z()!=2)){if(l.u&&bt(l)==4)Js(l.Ea,0,l);else if(lt(l,"readystatechange"),bt(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var v;if(v=Y===0){var O=String(l.D).match(fi)[1]||null;!O&&m.self&&m.self.location&&(O=m.self.location.protocol.slice(0,-1)),v=!Iu.test(O?O.toLowerCase():"")}g=v}if(g)lt(l,"complete"),lt(l,"success");else{l.m=6;try{var z=2<bt(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",Ji(l)}}finally{en(l)}}}}function en(l,d){if(l.g){Zi(l);const g=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||lt(l,"ready");try{g.onreadystatechange=v}catch{}}}function Zi(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function bt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<bt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),no(d)}};function go(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function es(l){const d={};l=(l.g&&2<=bt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(ye(l[v]))continue;var g=D(l[v]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const z=d[O]||[];d[O]=z,z.push(g)}V(d,function(v){return v.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zn(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function yo(l){this.Aa=0,this.i=[],this.j=new ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zn("baseRetryDelayMs",5e3,l),this.cb=zn("retryDelaySeedMs",1e4,l),this.Wa=zn("forwardChannelMaxRetries",2,l),this.wa=zn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new hi(l&&l.concurrentRequestLimit),this.Da=new Tu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=yo.prototype,i.la=8,i.G=1,i.connect=function(l,d,g,v){et(0),this.W=l,this.H=d||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=xa(this,null,this.W),Bn(this)};function Tt(l){if(ts(l),l.G==3){var d=l.U++,g=Zt(l.I);if(ze(g,"SID",l.K),ze(g,"RID",d),ze(g,"TYPE","terminate"),ir(l,g),d=new wn(l,l.j,d),d.L=2,d.v=Ir(Zt(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=La(d.j,null),d.g.ea(d.v)),d.F=Date.now(),be(d)}Na(l)}function Rn(l){l.g&&(_o(l),l.g.cancel(),l.g=null)}function ts(l){Rn(l),l.u&&(m.clearTimeout(l.u),l.u=null),is(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Bn(l){if(!Jt(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ue||ne(),J||(Ue(),J=!0),ce.add(d,l),l.B=0}}function Su(l,d){return Ea(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=_n(x(l.Ga,l,d),Da(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new wn(this,this.j,l);let z=this.o;if(this.S&&(z?(z=I(z),k(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Cr(this,O,d),g=Zt(this.I),ze(g,"RID",l),ze(g,"CVER",22),this.D&&ze(g,"X-HTTP-Session-Id",this.D),ir(this,g),z&&(this.O?d="headers="+encodeURIComponent(String(rr(z)))+"&"+d:this.m&&Rr(g,this.m,z)),ho(this.h,O),this.Ua&&ze(g,"TYPE","init"),this.P?(ze(g,"$req",d),ze(g,"SID","null"),O.T=!0,Gi(O,g,null)):Gi(O,g,d),this.G=2}}else this.G==3&&(l?ns(this,l):this.i.length==0||Jt(this.h)||ns(this))};function ns(l,d){var g;d?g=d.l:g=l.U++;const v=Zt(l.I);ze(v,"SID",l.K),ze(v,"RID",g),ze(v,"AID",l.T),ir(l,v),l.m&&l.o&&Rr(v,l.m,l.o),g=new wn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Cr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ho(l.h,g),Gi(g,v,d)}function ir(l,d){l.H&&Se(l.H,function(g,v){ze(d,v,g)}),l.l&&Er({},function(g,v){ze(d,v,g)})}function Cr(l,d,g){g=Math.min(l.i.length,g);var v=l.l?x(l.l.Na,l.l,l):null;e:{var O=l.i;let z=-1;for(;;){const Y=["count="+g];z==-1?0<g?(z=O[0].g,Y.push("ofs="+z)):z=0:Y.push("ofs="+z);let Fe=!0;for(let ut=0;ut<g;ut++){let ke=O[ut].g;const mt=O[ut].map;if(ke-=z,0>ke)z=Math.max(0,O[ut].g-100),Fe=!1;else try{Pa(mt,Y,"req"+ke+"_")}catch{v&&v(mt)}}if(Fe){v=Y.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,v}function gi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ue||ne(),J||(Ue(),J=!0),ce.add(d,l),l.v=0}}function rs(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=_n(x(l.Fa,l),Da(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Va(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=_n(x(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),Rn(this),Va(this))};function _o(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Va(l){l.g=new wn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Zt(l.qa);ze(d,"RID","rpc"),ze(d,"SID",l.K),ze(d,"AID",l.T),ze(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(d,"TO",l.ja),ze(d,"TYPE","xmlhttp"),ir(l,d),l.m&&l.o&&Rr(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Ir(Zt(d)),g.m=null,g.P=!0,uo(g,l)}i.Za=function(){this.C!=null&&(this.C=null,Rn(this),rs(this),et(19))};function is(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ss(l,d){var g=null;if(l.g==d){is(l),_o(l),l.g=null;var v=2}else if(Mt(l.h,d))g=d.D,wa(l.h,d),v=1;else return;if(l.G!=0){if(d.o)if(v==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var O=l.B;v=oi(),lt(v,new qi(v,g)),Bn(l)}else gi(l);else if(O=d.s,O==3||O==0&&0<d.X||!(v==1&&Su(l,d)||v==2&&rs(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),O){case 1:sr(l,5);break;case 4:sr(l,10);break;case 3:sr(l,6);break;default:sr(l,2)}}}function Da(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function sr(l,d){if(l.j.info("Error code "+d),d==2){var g=x(l.fb,l),v=l.Xa;const O=!v;v=new tr(v||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||di(v,"https"),Ir(v),O?wu(v.toString(),g):Ca(v.toString(),g)}else et(2);l.G=0,l.l&&l.l.sa(d),Na(l),ts(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Na(l){if(l.G=0,l.ka=[],l.l){const d=Ta(l.h);(d.length!=0||l.i.length!=0)&&(W(l.ka,d),W(l.ka,l.i),l.h.i.length=0,X(l.i),l.i.length=0),l.l.ra()}}function xa(l,d,g){var v=g instanceof tr?Zt(g):new tr(g);if(v.g!="")d&&(v.g=d+"."+v.g),wr(v,v.s);else{var O=m.location;v=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var z=new tr(null);v&&di(z,v),d&&(z.g=d),O&&wr(z,O),g&&(z.l=g),v=z}return g=l.D,d=l.ya,g&&d&&ze(v,g,d),ze(v,"VER",l.la),ir(l,v),v}function La(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Qe(new nr({eb:g})):new Qe(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function vo(){}i=vo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function os(){}os.prototype.g=function(l,d){return new Ft(l,d)};function Ft(l,d){at.call(this),this.g=new yo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!ye(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ye(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new jn(this)}K(Ft,at),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Tt(this.g)},Ft.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=to(l),l=g);d.i.push(new va(d.Ya++,l)),d.G==3&&Bn(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Tt(this.g),delete this.g,Ft.aa.N.call(this)};function Oa(l){On.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}K(Oa,On);function Ma(){$i.call(this),this.status=1}K(Ma,$i);function jn(l){this.g=l}K(jn,vo),jn.prototype.ua=function(){lt(this.g,"a")},jn.prototype.ta=function(l){lt(this.g,new Oa(l))},jn.prototype.sa=function(l){lt(this.g,new Ma)},jn.prototype.ra=function(){lt(this.g,"b")},os.prototype.createWebChannel=os.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,tg=function(){return new os},eg=function(){return oi()},Zm=Mn,fh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,Ml=Hi,ma.COMPLETE="complete",Jm=ma,bi.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",at.prototype.listen=at.prototype.K,Wo=bi,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Ym=Qe}).apply(typeof Vl<"u"?Vl:typeof self<"u"?self:typeof window<"u"?window:{});const Gp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $s="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new qm("@firebase/firestore");function Ps(){return Ni.logLevel}function re(i,...e){if(Ni.logLevel<=De.DEBUG){const n=e.map(Vh);Ni.debug(`Firestore (${$s}): ${i}`,...n)}}function mr(i,...e){if(Ni.logLevel<=De.ERROR){const n=e.map(Vh);Ni.error(`Firestore (${$s}): ${i}`,...n)}}function Ms(i,...e){if(Ni.logLevel<=De.WARN){const n=e.map(Vh);Ni.warn(`Firestore (${$s}): ${i}`,...n)}}function Vh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(i="Unexpected state"){const e=`FIRESTORE (${$s}) INTERNAL ASSERTION FAILED: `+i;throw mr(e),new Error(e)}function Ne(i,e){i||pe()}function _e(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class yE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _E{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0);let s=this.i;const a=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Hr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await a(this.currentUser)})},m=y=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Hr)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ne(typeof s.accessToken=="string"),new ng(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string"),new Ot(e)}}class vE{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class EE{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new vE(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TE{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ne(this.o===void 0);const s=c=>{c.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.R;return this.R=c.token,re("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string"),this.R=n.token,new wE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=IE(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%e.length))}return s}}function Ce(i,e){return i<e?-1:i>e?1:0}function Fs(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ft(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new ft(0,0))}static max(){return new me(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n,s){n===void 0?n=0:n>e.length&&pe(),s===void 0?s=e.length-n:s>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Qn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=Qn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Math.sign(e.length-n.length)}static compareSegments(e,n){const s=Qn.isNumericId(e),a=Qn.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Qn.extractNumericId(e).compare(Qn.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}}class Be extends Qn{construct(e,n,s){return new Be(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ee(j.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const SE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Qn{construct(e,n,s){return new Rt(e,n,s)}static isValidIdentifier(e){return SE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Rt(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new ee(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new ee(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ee(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(h=!h,a++):m!=="."||h?(s+=m,a++):(c(),a++)}if(c(),h)throw new ee(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(n)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Be.fromString(e))}static fromName(e){return new ue(Be.fromString(e).popFirst(5))}static empty(){return new ue(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Be(e.slice()))}}function AE(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=me.fromTimestamp(s===1e9?new ft(n+1,0):new ft(n,s));return new Gr(a,ue.empty(),e)}function RE(i){return new Gr(i.readTime,i.key,-1)}class Gr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Gr(me.min(),ue.empty(),-1)}static max(){return new Gr(me.max(),ue.empty(),-1)}}function CE(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(i.documentKey,e.documentKey),n!==0?n:Ce(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(i){if(i.code!==j.FAILED_PRECONDITION||i.message!==PE)throw i;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new b((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof b?n:b.resolve(n)}catch(n){return b.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):b.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):b.reject(n)}static resolve(e){return new b((n,s)=>{n(e)})}static reject(e){return new b((n,s)=>{s(e)})}static waitFor(e){return new b((n,s)=>{let a=0,c=0,h=!1;e.forEach(m=>{++a,m.next(()=>{++c,h&&c===a&&n()},y=>s(y))}),h=!0,c===a&&n()})}static or(e){let n=b.resolve(!1);for(const s of e)n=n.next(a=>a?b.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new b((s,a)=>{const c=e.length,h=new Array(c);let m=0;for(let y=0;y<c;y++){const E=y;n(e[E]).next(w=>{h[E]=w,++m,m===c&&s(h)},w=>a(w))}})}static doWhile(e,n){return new b((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function VE(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ws(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}iu.oe=-1;function la(i){return i==null}function Hl(i){return i===0&&1/i==-1/0}function DE(i){return typeof i=="number"&&Number.isInteger(i)&&!Hl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Kp(e)),e=xE(i.get(n),e);return Kp(e)}function xE(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function Kp(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Zr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function ig(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dl(this.root,e,this.comparator,!0)}}class Dl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??At.RED,this.left=a??At.EMPTY,this.right=c??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new At(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return At.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,s,a,c){return this}insert(e,n,s){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yp(this.data.getIterator())}getIteratorFrom(e){return new Yp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class Yp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new on([])}unionWith(e){let n=new dt(Rt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fs(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new sg("Invalid base64 string: "+c):c}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(a){let c="";for(let h=0;h<a.length;++h)c+=String.fromCharCode(a[h]);return c}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const LE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(i){if(Ne(!!i),typeof i=="string"){let e=0;const n=LE.exec(i);if(Ne(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nt(i.seconds),nanos:nt(i.nanos)}}function nt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Xr(i){return typeof i=="string"?Ct.fromBase64String(i):Ct.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function su(i){const e=i.mapValue.fields.__previous_value__;return Dh(e)?su(e):e}function ta(i){const e=Kr(i.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n,s,a,c,h,m,y,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=E}}class na{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new na("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof na&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Dh(i)?4:FE(i)?9007199254740991:ME(i)?10:11:pe()}function Kn(i,e){if(i===e)return!0;const n=Yr(i);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ta(i).isEqual(ta(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const h=Kr(a.timestampValue),m=Kr(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return Xr(a.bytesValue).isEqual(Xr(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return nt(a.geoPointValue.latitude)===nt(c.geoPointValue.latitude)&&nt(a.geoPointValue.longitude)===nt(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return nt(a.integerValue)===nt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const h=nt(a.doubleValue),m=nt(c.doubleValue);return h===m?Hl(h)===Hl(m):isNaN(h)&&isNaN(m)}return!1}(i,e);case 9:return Fs(i.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return function(a,c){const h=a.mapValue.fields||{},m=c.mapValue.fields||{};if(Xp(h)!==Xp(m))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(m[y]===void 0||!Kn(h[y],m[y])))return!1;return!0}(i,e);default:return pe()}}function ra(i,e){return(i.values||[]).find(n=>Kn(n,e))!==void 0}function Us(i,e){if(i===e)return 0;const n=Yr(i),s=Yr(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(i.booleanValue,e.booleanValue);case 2:return function(c,h){const m=nt(c.integerValue||c.doubleValue),y=nt(h.integerValue||h.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(i,e);case 3:return Jp(i.timestampValue,e.timestampValue);case 4:return Jp(ta(i),ta(e));case 5:return Ce(i.stringValue,e.stringValue);case 6:return function(c,h){const m=Xr(c),y=Xr(h);return m.compareTo(y)}(i.bytesValue,e.bytesValue);case 7:return function(c,h){const m=c.split("/"),y=h.split("/");for(let E=0;E<m.length&&E<y.length;E++){const w=Ce(m[E],y[E]);if(w!==0)return w}return Ce(m.length,y.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,h){const m=Ce(nt(c.latitude),nt(h.latitude));return m!==0?m:Ce(nt(c.longitude),nt(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Zp(i.arrayValue,e.arrayValue);case 10:return function(c,h){var m,y,E,w;const C=c.fields||{},x=h.fields||{},B=(m=C.value)===null||m===void 0?void 0:m.arrayValue,K=(y=x.value)===null||y===void 0?void 0:y.arrayValue,X=Ce(((E=B==null?void 0:B.values)===null||E===void 0?void 0:E.length)||0,((w=K==null?void 0:K.values)===null||w===void 0?void 0:w.length)||0);return X!==0?X:Zp(B,K)}(i.mapValue,e.mapValue);case 11:return function(c,h){if(c===Nl.mapValue&&h===Nl.mapValue)return 0;if(c===Nl.mapValue)return 1;if(h===Nl.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),E=h.fields||{},w=Object.keys(E);y.sort(),w.sort();for(let C=0;C<y.length&&C<w.length;++C){const x=Ce(y[C],w[C]);if(x!==0)return x;const B=Us(m[y[C]],E[w[C]]);if(B!==0)return B}return Ce(y.length,w.length)}(i.mapValue,e.mapValue);default:throw pe()}}function Jp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ce(i,e);const n=Kr(i),s=Kr(e),a=Ce(n.seconds,s.seconds);return a!==0?a:Ce(n.nanos,s.nanos)}function Zp(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=Us(n[a],s[a]);if(c)return c}return Ce(n.length,s.length)}function zs(i){return dh(i)}function dh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=Kr(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Xr(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return ue.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=dh(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const h of s)c?c=!1:a+=",",a+=`${h}:${dh(n.fields[h])}`;return a+"}"}(i.mapValue):pe()}function Fl(i){switch(Yr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=su(i);return e?16+Fl(e):16;case 5:return 2*i.stringValue.length;case 6:return Xr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+Fl(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return Zr(s.fields,(c,h)=>{a+=c.length+Fl(h)}),a}(i.mapValue);default:throw pe()}}function em(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ph(i){return!!i&&"integerValue"in i}function Nh(i){return!!i&&"arrayValue"in i}function tm(i){return!!i&&"nullValue"in i}function nm(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ul(i){return!!i&&"mapValue"in i}function ME(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Go(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Zr(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Go(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Go(i.arrayValue.values[n]);return e}return Object.assign({},i)}function FE(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ul(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Go(n)}setAll(e){let n=Rt.emptyPath(),s={},a=[];e.forEach((h,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,s,a),s={},a=[],n=m.popLast()}h?s[m.lastSegment()]=Go(h):a.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());Ul(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Ul(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Zr(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new Bt(Go(this.value))}}function og(i){const e=[];return Zr(i.fields,(n,s)=>{const a=new Rt([n]);if(Ul(s)){const c=og(s.mapValue).fields;if(c.length===0)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,s,a,c,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Et(e,0,me.min(),me.min(),me.min(),Bt.empty(),0)}static newFoundDocument(e,n,s,a){return new Et(e,1,n,me.min(),s,a,0)}static newNoDocument(e,n){return new Et(e,2,n,me.min(),me.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,me.min(),me.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.position=e,this.inclusive=n}}function rm(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],h=i.position[a];if(c.field.isKeyField()?s=ue.comparator(ue.fromName(h.referenceValue),n.key):s=Us(h,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function im(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Kn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n="asc"){this.field=e,this.dir=n}}function UE(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{}class ot extends ag{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new BE(e,n,s):n==="array-contains"?new $E(e,s):n==="in"?new qE(e,s):n==="not-in"?new WE(e,s):n==="array-contains-any"?new HE(e,s):new ot(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new jE(e,s):new bE(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Us(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends ag{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ln(e,n)}matches(e){return lg(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function lg(i){return i.op==="and"}function ug(i){return zE(i)&&lg(i)}function zE(i){for(const e of i.filters)if(e instanceof Ln)return!1;return!0}function mh(i){if(i instanceof ot)return i.field.canonicalString()+i.op.toString()+zs(i.value);if(ug(i))return i.filters.map(e=>mh(e)).join(",");{const e=i.filters.map(n=>mh(n)).join(",");return`${i.op}(${e})`}}function cg(i,e){return i instanceof ot?function(s,a){return a instanceof ot&&s.op===a.op&&s.field.isEqual(a.field)&&Kn(s.value,a.value)}(i,e):i instanceof Ln?function(s,a){return a instanceof Ln&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,h,m)=>c&&cg(h,a.filters[m]),!0):!1}(i,e):void pe()}function hg(i){return i instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${zs(n.value)}`}(i):i instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map(hg).join(" ,")+"}"}(i):"Filter"}class BE extends ot{constructor(e,n,s){super(e,n,s),this.key=ue.fromName(s.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class jE extends ot{constructor(e,n){super(e,"in",n),this.keys=fg("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class bE extends ot{constructor(e,n){super(e,"not-in",n),this.keys=fg("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fg(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ue.fromName(s.referenceValue))}class $E extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nh(n)&&ra(n.arrayValue,this.value)}}class qE extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ra(this.value.arrayValue,n)}}class WE extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(ra(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ra(this.value.arrayValue,n)}}class HE extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ra(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n=null,s=[],a=[],c=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=h,this.endAt=m,this.ue=null}}function sm(i,e=null,n=[],s=[],a=null,c=null,h=null){return new QE(i,e,n,s,a,c,h)}function xh(i){const e=_e(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>mh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),la(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>zs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>zs(s)).join(",")),e.ue=n}return e.ue}function Lh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!UE(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!cg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!im(i.startAt,e.startAt)&&im(i.endAt,e.endAt)}function gh(i){return ue.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n=null,s=[],a=[],c=null,h="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function GE(i,e,n,s,a,c,h,m){return new Hs(i,e,n,s,a,c,h,m)}function Oh(i){return new Hs(i)}function om(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function dg(i){return i.collectionGroup!==null}function Ko(i){const e=_e(i);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new dt(Rt.comparator);return h.filters.forEach(y=>{y.getFlattenedFilters().forEach(E=>{E.isInequality()&&(m=m.add(E.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new ia(c,s))}),n.has(Rt.keyField().canonicalString())||e.ce.push(new ia(Rt.keyField(),s))}return e.ce}function Gn(i){const e=_e(i);return e.le||(e.le=KE(e,Ko(i))),e.le}function KE(i,e){if(i.limitType==="F")return sm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new ia(a.field,c)});const n=i.endAt?new Ql(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ql(i.startAt.position,i.startAt.inclusive):null;return sm(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function yh(i,e){const n=i.filters.concat([e]);return new Hs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Gl(i,e,n){return new Hs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function ou(i,e){return Lh(Gn(i),Gn(e))&&i.limitType===e.limitType}function pg(i){return`${xh(Gn(i))}|lt:${i.limitType}`}function ks(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>hg(a)).join(", ")}]`),la(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>zs(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>zs(a)).join(",")),`Target(${s})`}(Gn(i))}; limitType=${i.limitType})`}function au(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ue.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of Ko(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(h,m,y){const E=rm(h,m,y);return h.inclusive?E<=0:E<0}(s.startAt,Ko(s),a)||s.endAt&&!function(h,m,y){const E=rm(h,m,y);return h.inclusive?E>=0:E>0}(s.endAt,Ko(s),a))}(i,e)}function XE(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function mg(i){return(e,n)=>{let s=!1;for(const a of Ko(i)){const c=YE(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function YE(i,e,n){const s=i.field.isKeyField()?ue.comparator(e.key,n.key):function(c,h,m){const y=h.data.field(c),E=m.data.field(c);return y!==null&&E!==null?Us(y,E):pe()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return ig(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=new Ye(ue.comparator);function gr(){return JE}const gg=new Ye(ue.comparator);function Ho(...i){let e=gg;for(const n of i)e=e.insert(n.key,n);return e}function yg(i){let e=gg;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Di(){return Xo()}function _g(){return Xo()}function Xo(){return new Li(i=>i.toString(),(i,e)=>i.isEqual(e))}const ZE=new Ye(ue.comparator),ew=new dt(ue.comparator);function Ie(...i){let e=ew;for(const n of i)e=e.add(n);return e}const tw=new dt(Ce);function nw(){return tw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hl(e)?"-0":e}}function vg(i){return{integerValue:""+i}}function rw(i,e){return DE(e)?vg(e):Mh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this._=void 0}}function iw(i,e,n){return i instanceof Kl?function(a,c){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Dh(c)&&(c=su(c)),c&&(h.fields.__previous_value__=c),{mapValue:h}}(n,e):i instanceof sa?wg(i,e):i instanceof oa?Tg(i,e):function(a,c){const h=Eg(a,c),m=am(h)+am(a.Pe);return ph(h)&&ph(a.Pe)?vg(m):Mh(a.serializer,m)}(i,e)}function sw(i,e,n){return i instanceof sa?wg(i,e):i instanceof oa?Tg(i,e):n}function Eg(i,e){return i instanceof Xl?function(s){return ph(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class Kl extends lu{}class sa extends lu{constructor(e){super(),this.elements=e}}function wg(i,e){const n=Ig(e);for(const s of i.elements)n.some(a=>Kn(a,s))||n.push(s);return{arrayValue:{values:n}}}class oa extends lu{constructor(e){super(),this.elements=e}}function Tg(i,e){let n=Ig(e);for(const s of i.elements)n=n.filter(a=>!Kn(a,s));return{arrayValue:{values:n}}}class Xl extends lu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function am(i){return nt(i.integerValue||i.doubleValue)}function Ig(i){return Nh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function ow(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof sa&&a instanceof sa||s instanceof oa&&a instanceof oa?Fs(s.elements,a.elements,Kn):s instanceof Xl&&a instanceof Xl?Kn(s.Pe,a.Pe):s instanceof Kl&&a instanceof Kl}(i.transform,e.transform)}class aw{constructor(e,n){this.version=e,this.transformResults=n}}class Xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xt}static exists(e){return new Xt(void 0,e)}static updateTime(e){return new Xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class uu{}function Sg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Fh(i.key,Xt.none()):new ua(i.key,i.data,Xt.none());{const n=i.data,s=Bt.empty();let a=new dt(Rt.comparator);for(let c of e.fields)if(!a.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?s.delete(c):s.set(c,h),a=a.add(c)}return new ei(i.key,s,new on(a.toArray()),Xt.none())}}function lw(i,e,n){i instanceof ua?function(a,c,h){const m=a.value.clone(),y=um(a.fieldTransforms,c,h.transformResults);m.setAll(y),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(i,e,n):i instanceof ei?function(a,c,h){if(!zl(a.precondition,c))return void c.convertToUnknownDocument(h.version);const m=um(a.fieldTransforms,c,h.transformResults),y=c.data;y.setAll(Ag(a)),y.setAll(m),c.convertToFoundDocument(h.version,y).setHasCommittedMutations()}(i,e,n):function(a,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function Yo(i,e,n,s){return i instanceof ua?function(c,h,m,y){if(!zl(c.precondition,h))return m;const E=c.value.clone(),w=cm(c.fieldTransforms,y,h);return E.setAll(w),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),null}(i,e,n,s):i instanceof ei?function(c,h,m,y){if(!zl(c.precondition,h))return m;const E=cm(c.fieldTransforms,y,h),w=h.data;return w.setAll(Ag(c)),w.setAll(E),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(C=>C.field))}(i,e,n,s):function(c,h,m){return zl(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(i,e,n)}function uw(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=Eg(s.transform,a||null);c!=null&&(n===null&&(n=Bt.empty()),n.set(s.field,c))}return n||null}function lm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Fs(s,a,(c,h)=>ow(c,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ua extends uu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ei extends uu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ag(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function um(i,e,n){const s=new Map;Ne(i.length===n.length);for(let a=0;a<n.length;a++){const c=i[a],h=c.transform,m=e.data.field(c.field);s.set(c.field,sw(h,m,n[a]))}return s}function cm(i,e,n){const s=new Map;for(const a of i){const c=a.transform,h=n.data.field(a.field);s.set(a.field,iw(c,h,e))}return s}class Fh extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rg extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&lw(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Yo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Yo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=_g();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=n.has(a.key)?null:m;const y=Sg(h,m);y!==null&&s.set(a.key,y),h.isValidDocument()||h.convertToNoDocument(me.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Fs(this.mutations,e.mutations,(n,s)=>lm(n,s))&&Fs(this.baseMutations,e.baseMutations,(n,s)=>lm(n,s))}}class Uh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Ne(e.mutations.length===s.length);let a=function(){return ZE}();const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,s[h].version);return new Uh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Ve;function Cg(i){switch(i){default:return pe();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function Pg(i){if(i===void 0)return mr("GRPC error has no .code"),j.UNKNOWN;switch(i){case st.OK:return j.OK;case st.CANCELLED:return j.CANCELLED;case st.UNKNOWN:return j.UNKNOWN;case st.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case st.INTERNAL:return j.INTERNAL;case st.UNAVAILABLE:return j.UNAVAILABLE;case st.UNAUTHENTICATED:return j.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case st.NOT_FOUND:return j.NOT_FOUND;case st.ALREADY_EXISTS:return j.ALREADY_EXISTS;case st.PERMISSION_DENIED:return j.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case st.ABORTED:return j.ABORTED;case st.OUT_OF_RANGE:return j.OUT_OF_RANGE;case st.UNIMPLEMENTED:return j.UNIMPLEMENTED;case st.DATA_LOSS:return j.DATA_LOSS;default:return pe()}}(Ve=st||(st={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=new Wr([4294967295,4294967295],0);function hm(i){const e=dw().encode(i),n=new Xm;return n.update(e),new Uint8Array(n.digest())}function fm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Wr([n,s],0),new Wr([a,c],0)]}class zh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Qo(`Invalid padding: ${n}`);if(s<0)throw new Qo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Qo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Qo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Wr.fromNumber(this.Te)}de(e,n,s){let a=e.add(n.multiply(Wr.fromNumber(s)));return a.compare(pw)===1&&(a=new Wr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=hm(e),[s,a]=fm(n);for(let c=0;c<this.hashCount;c++){const h=this.de(s,a,c);if(!this.Ee(h))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new zh(c,a,n);return s.forEach(m=>h.insert(m)),h}insert(e){if(this.Te===0)return;const n=hm(e),[s,a]=fm(n);for(let c=0;c<this.hashCount;c++){const h=this.de(s,a,c);this.Ae(h)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ca.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new cu(me.min(),a,new Ye(Ce),gr(),Ie())}}class ca{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ca(s,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class kg{constructor(e,n){this.targetId=e,this.me=n}}class Vg{constructor(e,n,s=Ct.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class dm{constructor(){this.fe=0,this.ge=pm(),this.pe=Ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),n=Ie(),s=Ie();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:pe()}}),new ca(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=pm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mw{constructor(e){this.Be=e,this.Le=new Map,this.ke=gr(),this.qe=xl(),this.Qe=xl(),this.Ke=new Ye(Ce)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Le.forEach((s,a)=>{this.je(a)&&n(a)})}Je(e){const n=e.targetId,s=e.me.count,a=this.Ye(n);if(a){const c=a.target;if(gh(c))if(s===0){const h=new ue(c.path);this.We(n,h,Et.newNoDocument(h,me.min()))}else Ne(s===1);else{const h=this.Ze(n);if(h!==s){const m=this.Xe(e),y=m?this.et(m,e,h):1;if(y!==0){this.He(n);const E=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,E)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let h,m;try{h=Xr(s).toUint8Array()}catch(y){if(y instanceof sg)return Ms("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new zh(h,a,c)}catch(y){return Ms(y instanceof Qo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Te===0?null:m}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Be.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const h=this.Be.nt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(n,c,null),a++)}),a}it(e){const n=new Map;this.Le.forEach((c,h)=>{const m=this.Ye(h);if(m){if(c.current&&gh(m.target)){const y=new ue(m.target.path);this.st(y).has(h)||this.ot(h,y)||this.We(h,y,Et.newNoDocument(y,e))}c.be&&(n.set(h,c.ve()),c.Ce())}});let s=Ie();this.Qe.forEach((c,h)=>{let m=!0;h.forEachWhile(y=>{const E=this.Ye(y);return!E||E.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.ke.forEach((c,h)=>h.setReadTime(e));const a=new cu(e,n,this.Ke,this.ke,s);return this.ke=gr(),this.qe=xl(),this.Qe=xl(),this.Ke=new Ye(Ce),a}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,n)?a.Fe(n,1):a.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Le.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Le.get(e);return n||(n=new dm,this.Le.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new dt(Ce),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(Ce),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Le.get(e);return n&&n.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new dm),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function xl(){return new Ye(ue.comparator)}function pm(){return new Ye(ue.comparator)}const gw={asc:"ASCENDING",desc:"DESCENDING"},yw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_w={and:"AND",or:"OR"};class vw{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _h(i,e){return i.useProto3Json||la(e)?e:{value:e}}function Yl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Ew(i,e){return Yl(i,e.toTimestamp())}function an(i){return Ne(!!i),me.fromTimestamp(function(n){const s=Kr(n);return new ft(s.seconds,s.nanos)}(i))}function Bh(i,e){return vh(i,e).canonicalString()}function vh(i,e){const n=function(a){return new Be(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Ng(i){const e=Be.fromString(i);return Ne(Ug(e)),e}function Jl(i,e){return Bh(i.databaseId,e.path)}function Jo(i,e){const n=Ng(e);if(n.get(1)!==i.databaseId.projectId)throw new ee(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ee(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ue(Lg(n))}function xg(i,e){return Bh(i.databaseId,e)}function ww(i){const e=Ng(i);return e.length===4?Be.emptyPath():Lg(e)}function Eh(i){return new Be(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Lg(i){return Ne(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function mm(i,e,n){return{name:Jl(i,e),fields:n.value.mapValue.fields}}function Tw(i,e){return"found"in e?function(s,a){Ne(!!a.found),a.found.name,a.found.updateTime;const c=Jo(s,a.found.name),h=an(a.found.updateTime),m=a.found.createTime?an(a.found.createTime):me.min(),y=new Bt({mapValue:{fields:a.found.fields}});return Et.newFoundDocument(c,h,m,y)}(i,e):"missing"in e?function(s,a){Ne(!!a.missing),Ne(!!a.readTime);const c=Jo(s,a.missing),h=an(a.readTime);return Et.newNoDocument(c,h)}(i,e):pe()}function Iw(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(E,w){return E.useProto3Json?(Ne(w===void 0||typeof w=="string"),Ct.fromBase64String(w||"")):(Ne(w===void 0||w instanceof Buffer||w instanceof Uint8Array),Ct.fromUint8Array(w||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(E){const w=E.code===void 0?j.UNKNOWN:Pg(E.code);return new ee(w,E.message||"")}(h);n=new Vg(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Jo(i,s.document.name),c=an(s.document.updateTime),h=s.document.createTime?an(s.document.createTime):me.min(),m=new Bt({mapValue:{fields:s.document.fields}}),y=Et.newFoundDocument(a,c,h,m),E=s.targetIds||[],w=s.removedTargetIds||[];n=new Bl(E,w,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Jo(i,s.document),c=s.readTime?an(s.readTime):me.min(),h=Et.newNoDocument(a,c),m=s.removedTargetIds||[];n=new Bl([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Jo(i,s.document),c=s.removedTargetIds||[];n=new Bl([],c,a,null)}else{if(!("filter"in e))return pe();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,h=new fw(a,c),m=s.targetId;n=new kg(m,h)}}return n}function Og(i,e){let n;if(e instanceof ua)n={update:mm(i,e.key,e.value)};else if(e instanceof Fh)n={delete:Jl(i,e.key)};else if(e instanceof ei)n={update:mm(i,e.key,e.data),updateMask:Nw(e.fieldMask)};else{if(!(e instanceof Rg))return pe();n={verify:Jl(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,h){const m=h.transform;if(m instanceof Kl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof sa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof oa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Xl)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw pe()}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:Ew(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:pe()}(i,e.precondition)),n}function Sw(i,e){return i&&i.length>0?(Ne(e!==void 0),i.map(n=>function(a,c){let h=a.updateTime?an(a.updateTime):an(c);return h.isEqual(me.min())&&(h=an(c)),new aw(h,a.transformResults||[])}(n,e))):[]}function Aw(i,e){return{documents:[xg(i,e.path)]}}function Rw(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=xg(i,a);const c=function(E){if(E.length!==0)return Fg(Ln.create(E,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const h=function(E){if(E.length!==0)return E.map(w=>function(x){return{field:Vs(x.field),direction:kw(x.dir)}}(w))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=_h(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(E){return{before:E.inclusive,values:E.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(E){return{before:!E.inclusive,values:E.position}}(e.endAt)),{ct:n,parent:a}}function Cw(i){let e=ww(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Ne(s===1);const w=n.from[0];w.allDescendants?a=w.collectionId:e=e.child(w.collectionId)}let c=[];n.where&&(c=function(C){const x=Mg(C);return x instanceof Ln&&ug(x)?x.getFilters():[x]}(n.where));let h=[];n.orderBy&&(h=function(C){return C.map(x=>function(K){return new ia(Ds(K.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction))}(x))}(n.orderBy));let m=null;n.limit&&(m=function(C){let x;return x=typeof C=="object"?C.value:C,la(x)?null:x}(n.limit));let y=null;n.startAt&&(y=function(C){const x=!!C.before,B=C.values||[];return new Ql(B,x)}(n.startAt));let E=null;return n.endAt&&(E=function(C){const x=!C.before,B=C.values||[];return new Ql(B,x)}(n.endAt)),GE(e,a,h,c,m,"F",y,E)}function Pw(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Mg(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ds(n.unaryFilter.field);return ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Ds(n.unaryFilter.field);return ot.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ds(n.unaryFilter.field);return ot.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ds(n.unaryFilter.field);return ot.create(h,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(i):i.fieldFilter!==void 0?function(n){return ot.create(Ds(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(s=>Mg(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(i):pe()}function kw(i){return gw[i]}function Vw(i){return yw[i]}function Dw(i){return _w[i]}function Vs(i){return{fieldPath:i.canonicalString()}}function Ds(i){return Rt.fromServerFormat(i.fieldPath)}function Fg(i){return i instanceof ot?function(n){if(n.op==="=="){if(nm(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NAN"}};if(tm(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nm(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NOT_NAN"}};if(tm(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vs(n.field),op:Vw(n.op),value:n.value}}}(i):i instanceof Ln?function(n){const s=n.getFilters().map(a=>Fg(a));return s.length===1?s[0]:{compositeFilter:{op:Dw(n.op),filters:s}}}(i):pe()}function Nw(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ug(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,s,a,c=me.min(),h=me.min(),m=Ct.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.ht=e}}function Lw(i){const e=Cw({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Gl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.ln=new Mw}addToCollectionParentIndex(e,n){return this.ln.add(n),b.resolve()}getCollectionParents(e,n){return b.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return b.resolve()}deleteFieldIndex(e,n){return b.resolve()}deleteAllFieldIndexes(e){return b.resolve()}createTargetIndexes(e,n){return b.resolve()}getDocumentsMatchingTarget(e,n){return b.resolve(null)}getIndexType(e,n){return b.resolve(0)}getFieldIndexes(e,n){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,n){return b.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return b.resolve(Gr.min())}updateCollectionGroup(e,n,s){return b.resolve()}updateIndexEntries(e,n){return b.resolve()}}class Mw{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new dt(Be.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new dt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Bs(0)}static Qn(){return new Bs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym([i,e],[n,s]){const a=Ce(i,n);return a===0?Ce(e,s):a}class Fw{constructor(e){this.Gn=e,this.buffer=new dt(ym),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();ym(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Uw{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ws(n)?re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await qs(n)}await this.Yn(3e5)})}}class zw{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return b.resolve(iu.oe);const s=new Fw(n);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),b.resolve(gm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gm):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,a,c,h,m,y,E;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),a=this.params.maximumSequenceNumbersToCollect):a=C,h=Date.now(),this.nthSequenceNumber(e,a))).next(C=>(s=C,m=Date.now(),this.removeTargets(e,s,n))).next(C=>(c=C,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(C=>(E=Date.now(),Ps()<=De.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${a} in `+(m-h)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${C} documents in `+(E-y)+`ms
Total Duration: ${E-w}ms`),b.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:C})))}}function Bw(i,e){return new zw(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.changes=new Li(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?b.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&Yo(s.mutation,a,on.empty(),ft.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ie()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ie()){const a=Di();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let h=Ho();return c.forEach((m,y)=>{h=h.insert(m,y.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const s=Di();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ie()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,m)=>{n.set(h,m)})})}computeViews(e,n,s,a){let c=gr();const h=Xo(),m=function(){return Xo()}();return n.forEach((y,E)=>{const w=s.get(E.key);a.has(E.key)&&(w===void 0||w.mutation instanceof ei)?c=c.insert(E.key,E):w!==void 0?(h.set(E.key,w.mutation.getFieldMask()),Yo(w.mutation,E,w.mutation.getFieldMask(),ft.now())):h.set(E.key,on.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((E,w)=>h.set(E,w)),n.forEach((E,w)=>{var C;return m.set(E,new bw(w,(C=h.get(E))!==null&&C!==void 0?C:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Xo();let a=new Ye((h,m)=>h-m),c=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const m of h)m.keys().forEach(y=>{const E=n.get(y);if(E===null)return;let w=s.get(y)||on.empty();w=m.applyToLocalView(E,w),s.set(y,w);const C=(a.get(m.batchId)||Ie()).add(y);a=a.insert(m.batchId,C)})}).next(()=>{const h=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),E=y.key,w=y.value,C=_g();w.forEach(x=>{if(!c.has(x)){const B=Sg(n.get(x),s.get(x));B!==null&&C.set(x,B),c=c.add(x)}}),h.push(this.documentOverlayCache.saveOverlays(e,E,C))}return b.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(h){return ue.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):b.resolve(Di());let m=-1,y=c;return h.next(E=>b.forEach(E,(w,C)=>(m<C.largestBatchId&&(m=C.largestBatchId),c.get(w)?b.resolve():this.remoteDocumentCache.getEntry(e,w).next(x=>{y=y.insert(w,x)}))).next(()=>this.populateOverlays(e,E,c)).next(()=>this.computeViews(e,y,E,Ie())).next(w=>({batchId:m,changes:yg(w)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(s=>{let a=Ho();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let h=Ho();return this.indexManager.getCollectionParents(e,c).next(m=>b.forEach(m,y=>{const E=function(C,x){return new Hs(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,s,a).next(w=>{w.forEach((C,x)=>{h=h.insert(C,x)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(h=>{c.forEach((y,E)=>{const w=E.getKey();h.get(w)===null&&(h=h.insert(w,Et.newInvalidDocument(w)))});let m=Ho();return h.forEach((y,E)=>{const w=c.get(y);w!==void 0&&Yo(w.mutation,E,on.empty(),ft.now()),au(n,E)&&(m=m.insert(y,E))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return b.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:an(a.createTime)}}(n)),b.resolve()}getNamedQuery(e,n){return b.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(a){return{name:a.name,query:Lw(a.bundledQuery),readTime:an(a.readTime)}}(n)),b.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.overlays=new Ye(ue.comparator),this.dr=new Map}getOverlay(e,n){return b.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Di();return b.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.Tt(e,n,c)}),b.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.dr.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.dr.delete(s)),b.resolve()}getOverlaysForCollection(e,n,s){const a=Di(),c=n.length+1,h=new ue(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const y=m.getNext().value,E=y.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return b.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Ye((E,w)=>E-w);const h=this.overlays.getIterator();for(;h.hasNext();){const E=h.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>s){let w=c.get(E.largestBatchId);w===null&&(w=Di(),c=c.insert(E.largestBatchId,w)),w.set(E.getKey(),E)}}const m=Di(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,w)=>m.set(E,w)),!(m.size()>=a)););return b.resolve(m)}Tt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const h=this.dr.get(a.largestBatchId).delete(s.key);this.dr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new hw(n,s));let c=this.dr.get(n);c===void 0&&(c=Ie(),this.dr.set(n,c)),this.dr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return b.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,b.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this.Er=new dt(vt.Ar),this.Rr=new dt(vt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,n){const s=new vt(e,n);this.Er=this.Er.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new vt(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new ue(new Be([])),s=new vt(n,e),a=new vt(n,e+1),c=[];return this.Rr.forEachInRange([s,a],h=>{this.gr(h),c.push(h.key)}),c}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ue(new Be([])),s=new vt(n,e),a=new vt(n,e+1);let c=Ie();return this.Rr.forEachInRange([s,a],h=>{c=c.add(h.key)}),c}containsKey(e){const n=new vt(e,0),s=this.Er.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class vt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ue.comparator(e.key,n.key)||Ce(e.br,n.br)}static Vr(e,n){return Ce(e.br,n.br)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new dt(vt.Ar)}checkEmpty(e){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new cw(c,n,s,a);this.mutationQueue.push(h);for(const m of a)this.vr=this.vr.add(new vt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return b.resolve(h)}lookupMutationBatch(e,n){return b.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Fr(s),c=a<0?0:a;return b.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new vt(n,0),a=new vt(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([s,a],h=>{const m=this.Cr(h.br);c.push(m)}),b.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new dt(Ce);return n.forEach(a=>{const c=new vt(a,0),h=new vt(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,h],m=>{s=s.add(m.br)})}),b.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;ue.isDocumentKey(c)||(c=c.child(""));const h=new vt(new ue(c),0);let m=new dt(Ce);return this.vr.forEachWhile(y=>{const E=y.key.path;return!!s.isPrefixOf(E)&&(E.length===a&&(m=m.add(y.br)),!0)},h),b.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Ne(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return b.forEach(n.mutations,a=>{const c=new vt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Bn(e){}containsKey(e,n){const s=new vt(n,0),a=this.vr.firstAfterOrEqual(s);return b.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,b.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.Nr=e,this.docs=function(){return new Ye(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,h=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return b.resolve(s?s.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let s=gr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Et.newInvalidDocument(a))}),b.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=gr();const h=n.path,m=new ue(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:E,value:{document:w}}=y.getNext();if(!h.isPrefixOf(E.path))break;E.path.length>h.length+1||CE(RE(w),s)<=0||(a.has(w.key)||au(n,w))&&(c=c.insert(w.key,w.mutableCopy()))}return b.resolve(c)}getAllFromCollectionGroup(e,n,s,a){pe()}Br(e,n){return b.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Kw(this)}getSize(e){return b.resolve(this.size)}}class Kw extends jw{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),b.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.persistence=e,this.Lr=new Li(n=>xh(n),Lh),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.kr=0,this.qr=new jh,this.targetCount=0,this.Qr=Bs.qn()}forEachTarget(e,n){return this.Lr.forEach((s,a)=>n(a)),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),b.resolve()}Un(e){this.Lr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Bs(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,b.resolve()}updateTargetData(e,n){return this.Un(n),b.resolve()}removeTargetData(e,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.Lr.forEach((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Lr.delete(h),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),b.waitFor(c).next(()=>a)}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,n){const s=this.Lr.get(n)||null;return b.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),b.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),b.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),b.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return b.resolve(s)}containsKey(e,n){return b.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n){this.Kr={},this.overlays={},this.$r=new iu(0),this.Ur=!1,this.Ur=!0,this.Wr=new Hw,this.referenceDelegate=e(this),this.Gr=new Xw(this),this.indexManager=new Ow,this.remoteDocumentCache=function(a){return new Gw(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new xw(n),this.jr=new qw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ww,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new Qw(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){re("MemoryPersistence","Starting transaction:",e);const a=new Yw(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(c=>this.referenceDelegate.Jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Yr(e,n){return b.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class Yw extends kE{constructor(e){super(),this.currentSequenceNumber=e}}class bh{constructor(e){this.persistence=e,this.Zr=new jh,this.Xr=null}static ei(e){return new bh(e)}get ti(){if(this.Xr)return this.Xr;throw pe()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),b.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),b.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),b.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.ti.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.ti,s=>{const a=ue.fromPath(s);return this.ni(e,a).next(c=>{c||n.removeEntry(a,me.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return b.or([()=>b.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Zl{constructor(e,n){this.persistence=e,this.ri=new Li(s=>NE(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=Bw(this,n)}static ei(e,n){return new Zl(e,n)}Hr(){}Jr(e){return b.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return b.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(c=>c?b.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.Br(e,h=>this.ir(e,h,n).next(m=>{m||(s++,c.removeEntry(h,me.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),b.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),b.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),b.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),b.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fl(e.data.value)),n}ir(e,n,s){return b.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.ri.get(n);return b.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=a}static zi(e,n){let s=Ie(),a=Ie();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new $h(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return J_()?8:VE(X_())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.Xi(e,n).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.es(e,n,a,s).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new Jw;return this.ts(e,n,h).next(m=>{if(c.result=m,this.Hi)return this.ns(e,n,h,m.size)})}).next(()=>c.result)}ns(e,n,s,a){return s.documentReadCount<this.Ji?(Ps()<=De.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),b.resolve()):(Ps()<=De.DEBUG&&re("QueryEngine","Query:",ks(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(Ps()<=De.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gn(n))):b.resolve())}Xi(e,n){if(om(n))return b.resolve(null);let s=Gn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=Gl(n,null,"F"),s=Gn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const h=Ie(...c);return this.Zi.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,s).next(y=>{const E=this.rs(n,m);return this.ss(n,E,h,y.readTime)?this.Xi(e,Gl(n,null,"F")):this.os(e,E,n,y)}))})))}es(e,n,s,a){return om(n)||a.isEqual(me.min())?b.resolve(null):this.Zi.getDocuments(e,s).next(c=>{const h=this.rs(n,c);return this.ss(n,h,s,a)?b.resolve(null):(Ps()<=De.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ks(n)),this.os(e,h,n,AE(a,-1)).next(m=>m))})}rs(e,n){let s=new dt(mg(e));return n.forEach((a,c)=>{au(e,c)&&(s=s.add(c))}),s}ss(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ts(e,n,s){return Ps()<=De.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",ks(n)),this.Zi.getDocumentsMatchingQuery(e,n,Gr.min(),s)}os(e,n,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,s,a){this.persistence=e,this._s=n,this.serializer=a,this.us=new Ye(Ce),this.cs=new Li(c=>xh(c),Lh),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $w(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function tT(i,e,n,s){return new eT(i,e,n,s)}async function Bg(i,e){const n=_e(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const h=[],m=[];let y=Ie();for(const E of a){h.push(E.batchId);for(const w of E.mutations)y=y.add(w.key)}for(const E of c){m.push(E.batchId);for(const w of E.mutations)y=y.add(w.key)}return n.localDocuments.getDocuments(s,y).next(E=>({Ts:E,removedBatchIds:h,addedBatchIds:m}))})})}function nT(i,e){const n=_e(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,y,E,w){const C=E.batch,x=C.keys();let B=b.resolve();return x.forEach(K=>{B=B.next(()=>w.getEntry(y,K)).next(X=>{const W=E.docVersions.get(K);Ne(W!==null),X.version.compareTo(W)<0&&(C.applyToRemoteDocument(X,E),X.isValidDocument()&&(X.setReadTime(E.commitVersion),w.addEntry(X)))})}),B.next(()=>m.mutationQueue.removeMutationBatch(y,C))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let y=Ie();for(let E=0;E<m.mutationResults.length;++E)m.mutationResults[E].transformResults.length>0&&(y=y.add(m.batch.mutations[E].key));return y}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function jg(i){const e=_e(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function rT(i,e){const n=_e(i),s=e.snapshotVersion;let a=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=n.hs.newChangeBuffer({trackRemovals:!0});a=n.us;const m=[];e.targetChanges.forEach((w,C)=>{const x=a.get(C);if(!x)return;m.push(n.Gr.removeMatchingKeys(c,w.removedDocuments,C).next(()=>n.Gr.addMatchingKeys(c,w.addedDocuments,C)));let B=x.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(C)!==null?B=B.withResumeToken(Ct.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):w.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(w.resumeToken,s)),a=a.insert(C,B),function(X,W,te){return X.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0}(x,B,w)&&m.push(n.Gr.updateTargetData(c,B))});let y=gr(),E=Ie();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,w))}),m.push(iT(c,h,e.documentUpdates).next(w=>{y=w.Is,E=w.ds})),!s.isEqual(me.min())){const w=n.Gr.getLastRemoteSnapshotVersion(c).next(C=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(w)}return b.waitFor(m).next(()=>h.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,y,E)).next(()=>y)}).then(c=>(n.us=a,c))}function iT(i,e,n){let s=Ie(),a=Ie();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let h=gr();return n.forEach((m,y)=>{const E=c.get(m);y.isFoundDocument()!==E.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(me.min())?(e.removeEntry(m,y.readTime),h=h.insert(m,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||y.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(y),h=h.insert(m,y)):re("LocalStore","Ignoring outdated watch update for ",m,". Current version:",E.version," Watch version:",y.version)}),{Is:h,ds:a}})}function sT(i,e){const n=_e(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function oT(i,e){const n=_e(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Gr.getTargetData(s,e).next(c=>c?(a=c,b.resolve(a)):n.Gr.allocateTargetId(s).next(h=>(a=new br(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function wh(i,e,n){const s=_e(i),a=s.us.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,h=>s.persistence.referenceDelegate.removeTarget(h,a))}catch(h){if(!Ws(h))throw h;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function _m(i,e,n){const s=_e(i);let a=me.min(),c=Ie();return s.persistence.runTransaction("Execute query","readwrite",h=>function(y,E,w){const C=_e(y),x=C.cs.get(w);return x!==void 0?b.resolve(C.us.get(x)):C.Gr.getTargetData(E,w)}(s,h,Gn(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,m.targetId).next(y=>{c=y})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,n?a:me.min(),n?c:Ie())).next(m=>(aT(s,XE(e),m),{documents:m,Es:c})))}function aT(i,e,n){let s=i.ls.get(e)||me.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.ls.set(e,s)}class vm{constructor(){this.activeTargetIds=nw()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lT{constructor(){this._o=new vm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new vm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll=null;function nh(){return Ll===null?Ll=function(){return 268435456+Math.round(2147483648*Math.random())}():Ll++,"0x"+Ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class fT extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${a}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}Oo(n,s,a,c,h){const m=nh(),y=this.No(n,s.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${m}:`,y,a);const E={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(E,c,h),this.Lo(n,y,E,a).then(w=>(re("RestConnection",`Received RPC '${n}' ${m}: `,w),w),w=>{throw Ms("RestConnection",`RPC '${n}' ${m} failed with error: `,w,"url: ",y,"request:",a),w})}ko(n,s,a,c,h,m){return this.Oo(n,s,a,c,h)}Bo(n,s,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$s}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,h)=>n[h]=c),a&&a.headers.forEach((c,h)=>n[h]=c)}No(n,s){const a=cT[n];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,n,s,a){const c=nh();return new Promise((h,m)=>{const y=new Ym;y.setWithCredentials(!0),y.listenOnce(Jm.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Ml.NO_ERROR:const w=y.getResponseJson();re(Lt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),h(w);break;case Ml.TIMEOUT:re(Lt,`RPC '${e}' ${c} timed out`),m(new ee(j.DEADLINE_EXCEEDED,"Request time out"));break;case Ml.HTTP_ERROR:const C=y.getStatus();if(re(Lt,`RPC '${e}' ${c} failed with status:`,C,"response text:",y.getResponseText()),C>0){let x=y.getResponseJson();Array.isArray(x)&&(x=x[0]);const B=x==null?void 0:x.error;if(B&&B.status&&B.message){const K=function(W){const te=W.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(te)>=0?te:j.UNKNOWN}(B.status);m(new ee(K,B.message))}else m(new ee(j.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new ee(j.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{re(Lt,`RPC '${e}' ${c} completed.`)}});const E=JSON.stringify(a);re(Lt,`RPC '${e}' ${c} sending request:`,a),y.send(n,"POST",E,s,15)})}qo(e,n,s){const a=nh(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=tg(),m=eg(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Bo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const w=c.join("");re(Lt,`Creating RPC '${e}' stream ${a}: ${w}`,y);const C=h.createWebChannel(w,y);let x=!1,B=!1;const K=new hT({Eo:W=>{B?re(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,W):(x||(re(Lt,`Opening RPC '${e}' stream ${a} transport.`),C.open(),x=!0),re(Lt,`RPC '${e}' stream ${a} sending:`,W),C.send(W))},Ao:()=>C.close()}),X=(W,te,ye)=>{W.listen(te,he=>{try{ye(he)}catch(ve){setTimeout(()=>{throw ve},0)}})};return X(C,Wo.EventType.OPEN,()=>{B||(re(Lt,`RPC '${e}' stream ${a} transport opened.`),K.So())}),X(C,Wo.EventType.CLOSE,()=>{B||(B=!0,re(Lt,`RPC '${e}' stream ${a} transport closed`),K.Do())}),X(C,Wo.EventType.ERROR,W=>{B||(B=!0,Ms(Lt,`RPC '${e}' stream ${a} transport errored:`,W),K.Do(new ee(j.UNAVAILABLE,"The operation could not be completed")))}),X(C,Wo.EventType.MESSAGE,W=>{var te;if(!B){const ye=W.data[0];Ne(!!ye);const he=ye,ve=(he==null?void 0:he.error)||((te=he[0])===null||te===void 0?void 0:te.error);if(ve){re(Lt,`RPC '${e}' stream ${a} received error:`,ve);const He=ve.status;let Se=function(A){const k=st[A];if(k!==void 0)return Pg(k)}(He),V=ve.message;Se===void 0&&(Se=j.INTERNAL,V="Unknown error status: "+He+" with message "+ve.message),B=!0,K.Do(new ee(Se,V)),C.close()}else re(Lt,`RPC '${e}' stream ${a} received:`,ye),K.vo(ye)}}),X(m,Zm.STAT_EVENT,W=>{W.stat===fh.PROXY?re(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):W.stat===fh.NOPROXY&&re(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{K.bo()},0),K}}function rh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(i){return new vw(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,s=1e3,a=1.5,c=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=a,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,n-s);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,s,a,c,h,m,y){this.li=e,this.Yo=s,this.Zo=a,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new qh(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(mr(n.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===n&&this.I_(s,a)},s=>{e(()=>{const a=new ee(j.UNKNOWN,"Fetching auth token failed: "+s.message);return this.d_(a)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.E_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.d_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dT extends bg{constructor(e,n,s,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,h),this.serializer=c}E_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=Iw(this.serializer,e),s=function(c){if(!("targetChange"in c))return me.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?me.min():h.readTime?an(h.readTime):me.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=Eh(this.serializer),n.addTarget=function(c,h){let m;const y=h.target;if(m=gh(y)?{documents:Aw(c,y)}:{query:Rw(c,y).ct},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Dg(c,h.resumeToken);const E=_h(c,h.expectedCount);E!==null&&(m.expectedCount=E)}else if(h.snapshotVersion.compareTo(me.min())>0){m.readTime=Yl(c,h.snapshotVersion.toTimestamp());const E=_h(c,h.expectedCount);E!==null&&(m.expectedCount=E)}return m}(this.serializer,e);const s=Pw(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=Eh(this.serializer),n.removeTarget=e,this.c_(n)}}class pT extends bg{constructor(e,n,s,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,h),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=Sw(e.writeResults,e.commitTime),s=an(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=Eh(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Og(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new ee(j.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Oo(e,vh(n,s),a,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ee(j.UNKNOWN,c.toString())})}ko(e,n,s,a,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.ko(e,vh(n,s),a,h,m,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ee(j.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class gT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(mr(n),this.C_=!1):re("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{Oi(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(y){const E=_e(y);E.k_.add(4),await ha(E),E.K_.set("Unknown"),E.k_.delete(4),await fu(E)}(this))})}),this.K_=new gT(s,a)}}async function fu(i){if(Oi(i))for(const e of i.q_)await e(!0)}async function ha(i){for(const e of i.q_)await e(!1)}function $g(i,e){const n=_e(i);n.L_.has(e.targetId)||(n.L_.set(e.targetId,e),Gh(n)?Qh(n):Qs(n).s_()&&Hh(n,e))}function Wh(i,e){const n=_e(i),s=Qs(n);n.L_.delete(e),s.s_()&&qg(n,e),n.L_.size===0&&(s.s_()?s.a_():Oi(n)&&n.K_.set("Unknown"))}function Hh(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qs(i).V_(e)}function qg(i,e){i.U_.xe(e),Qs(i).m_(e)}function Qh(i){i.U_=new mw({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.L_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Qs(i).start(),i.K_.F_()}function Gh(i){return Oi(i)&&!Qs(i).i_()&&i.L_.size>0}function Oi(i){return _e(i).k_.size===0}function Wg(i){i.U_=void 0}async function _T(i){i.K_.set("Online")}async function vT(i){i.L_.forEach((e,n)=>{Hh(i,e)})}async function ET(i,e){Wg(i),Gh(i)?(i.K_.O_(e),Qh(i)):i.K_.set("Unknown")}async function wT(i,e,n){if(i.K_.set("Online"),e instanceof Vg&&e.state===2&&e.cause)try{await async function(a,c){const h=c.cause;for(const m of c.targetIds)a.L_.has(m)&&(await a.remoteSyncer.rejectListen(m,h),a.L_.delete(m),a.U_.removeTarget(m))}(i,e)}catch(s){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await eu(i,s)}else if(e instanceof Bl?i.U_.$e(e):e instanceof kg?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(me.min()))try{const s=await jg(i.localStore);n.compareTo(s)>=0&&await function(c,h){const m=c.U_.it(h);return m.targetChanges.forEach((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const w=c.L_.get(E);w&&c.L_.set(E,w.withResumeToken(y.resumeToken,h))}}),m.targetMismatches.forEach((y,E)=>{const w=c.L_.get(y);if(!w)return;c.L_.set(y,w.withResumeToken(Ct.EMPTY_BYTE_STRING,w.snapshotVersion)),qg(c,y);const C=new br(w.target,y,E,w.sequenceNumber);Hh(c,C)}),c.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){re("RemoteStore","Failed to raise snapshot:",s),await eu(i,s)}}async function eu(i,e,n){if(!Ws(e))throw e;i.k_.add(1),await ha(i),i.K_.set("Offline"),n||(n=()=>jg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await fu(i)})}function Hg(i,e){return e().catch(n=>eu(i,n,e))}async function du(i){const e=_e(i),n=Jr(e);let s=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;TT(e);)try{const a=await sT(e.localStore,s);if(a===null){e.B_.length===0&&n.a_();break}s=a.batchId,IT(e,a)}catch(a){await eu(e,a)}Qg(e)&&Gg(e)}function TT(i){return Oi(i)&&i.B_.length<10}function IT(i,e){i.B_.push(e);const n=Jr(i);n.s_()&&n.f_&&n.g_(e.mutations)}function Qg(i){return Oi(i)&&!Jr(i).i_()&&i.B_.length>0}function Gg(i){Jr(i).start()}async function ST(i){Jr(i).w_()}async function AT(i){const e=Jr(i);for(const n of i.B_)e.g_(n.mutations)}async function RT(i,e,n){const s=i.B_.shift(),a=Uh.from(s,e,n);await Hg(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await du(i)}async function CT(i,e){e&&Jr(i).f_&&await async function(s,a){if(function(h){return Cg(h)&&h!==j.ABORTED}(a.code)){const c=s.B_.shift();Jr(s).__(),await Hg(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await du(s)}}(i,e),Qg(i)&&Gg(i)}async function wm(i,e){const n=_e(i);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const s=Oi(n);n.k_.add(3),await ha(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await fu(n)}async function PT(i,e){const n=_e(i);e?(n.k_.delete(2),await fu(n)):e||(n.k_.add(2),await ha(n),n.K_.set("Unknown"))}function Qs(i){return i.W_||(i.W_=function(n,s,a){const c=_e(n);return c.b_(),new dT(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:_T.bind(null,i),mo:vT.bind(null,i),po:ET.bind(null,i),R_:wT.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),Gh(i)?Qh(i):i.K_.set("Unknown")):(await i.W_.stop(),Wg(i))})),i.W_}function Jr(i){return i.G_||(i.G_=function(n,s,a){const c=_e(n);return c.b_(),new pT(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:ST.bind(null,i),po:CT.bind(null,i),p_:AT.bind(null,i),y_:RT.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await du(i)):(await i.G_.stop(),i.B_.length>0&&(re("RemoteStore",`Stopping write stream with ${i.B_.length} pending writes`),i.B_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const h=Date.now()+s,m=new Kh(e,n,h,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xh(i,e){if(mr("AsyncQueue",`${e}: ${i}`),Ws(i))return new ee(j.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{static emptySet(e){return new Ls(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ue.comparator(n.key,s.key):(n,s)=>ue.comparator(n.key,s.key),this.keyedMap=Ho(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ls)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ls;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.z_=new Ye(ue.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):pe():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class js{constructor(e,n,s,a,c,h,m,y,E){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,n,s,a,c){const h=[];return n.forEach(m=>{h.push({type:0,doc:m})}),new js(e,n,Ls.emptySet(n),h,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class VT{constructor(){this.queries=Im(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const a=_e(n),c=a.queries;a.queries=Im(),c.forEach((h,m)=>{for(const y of m.J_)y.onError(s)})})(this,new ee(j.ABORTED,"Firestore shutting down"))}}function Im(){return new Li(i=>pg(i),ou)}async function DT(i,e){const n=_e(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Y_()&&e.Z_()&&(s=2):(c=new kT,s=e.Z_()?0:1);try{switch(s){case 0:c.H_=await n.onListen(a,!0);break;case 1:c.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(h){const m=Xh(h,`Initialization of query '${ks(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.J_.push(e),e.ea(n.onlineState),c.H_&&e.ta(c.H_)&&Yh(n)}async function NT(i,e){const n=_e(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const h=c.J_.indexOf(e);h>=0&&(c.J_.splice(h,1),c.J_.length===0?a=e.Z_()?0:1:!c.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function xT(i,e){const n=_e(i);let s=!1;for(const a of e){const c=a.query,h=n.queries.get(c);if(h){for(const m of h.J_)m.ta(a)&&(s=!0);h.H_=a}}s&&Yh(n)}function LT(i,e,n){const s=_e(i),a=s.queries.get(e);if(a)for(const c of a.J_)c.onError(n);s.queries.delete(e)}function Yh(i){i.X_.forEach(e=>{e.next()})}var Th,Sm;(Sm=Th||(Th={})).na="default",Sm.Cache="cache";class OT{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new js(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Th.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e){this.key=e}}class Xg{constructor(e){this.key=e}}class MT{constructor(e,n){this.query=e,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ie(),this.mutatedKeys=Ie(),this.Va=mg(e),this.ma=new Ls(this.Va)}get fa(){return this.Ea}ga(e,n){const s=n?n.pa:new Tm,a=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,h=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,E=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((w,C)=>{const x=a.get(w),B=au(this.query,C)?C:null,K=!!x&&this.mutatedKeys.has(x.key),X=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let W=!1;x&&B?x.data.isEqual(B.data)?K!==X&&(s.track({type:3,doc:B}),W=!0):this.ya(x,B)||(s.track({type:2,doc:B}),W=!0,(y&&this.Va(B,y)>0||E&&this.Va(B,E)<0)&&(m=!0)):!x&&B?(s.track({type:0,doc:B}),W=!0):x&&!B&&(s.track({type:1,doc:x}),W=!0,(y||E)&&(m=!0)),W&&(B?(h=h.add(B),c=X?c.add(w):c.delete(w)):(h=h.delete(w),c=c.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),c=c.delete(w.key),s.track({type:1,doc:w})}return{ma:h,pa:s,ss:m,mutatedKeys:c}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((w,C)=>function(B,K){const X=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return X(B)-X(K)}(w.type,C.type)||this.Va(w.doc,C.doc)),this.wa(s),a=a!=null&&a;const m=n&&!a?this.Sa():[],y=this.Ra.size===0&&this.current&&!a?1:0,E=y!==this.Aa;return this.Aa=y,h.length!==0||E?{snapshot:new js(this.query,e.ma,c,h,e.mutatedKeys,y===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Tm,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ie(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new Xg(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new Kg(s))}),n}va(e){this.Ea=e.Es,this.Ra=Ie();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return js.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class FT{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class UT{constructor(e){this.key=e,this.Fa=!1}}class zT{constructor(e,n,s,a,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new Li(m=>pg(m),ou),this.Oa=new Map,this.Na=new Set,this.Ba=new Ye(ue.comparator),this.La=new Map,this.ka=new jh,this.qa={},this.Qa=new Map,this.Ka=Bs.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function BT(i,e,n=!0){const s=ny(i);let a;const c=s.xa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ca()):a=await Yg(s,e,n,!0),a}async function jT(i,e){const n=ny(i);await Yg(n,e,!0,!1)}async function Yg(i,e,n,s){const a=await oT(i.localStore,Gn(e)),c=a.targetId,h=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await bT(i,e,c,h==="current",a.resumeToken)),i.isPrimaryClient&&n&&$g(i.remoteStore,a),m}async function bT(i,e,n,s,a){i.Ua=(C,x,B)=>async function(X,W,te,ye){let he=W.view.ga(te);he.ss&&(he=await _m(X.localStore,W.query,!1).then(({documents:V})=>W.view.ga(V,he)));const ve=ye&&ye.targetChanges.get(W.targetId),He=ye&&ye.targetMismatches.get(W.targetId)!=null,Se=W.view.applyChanges(he,X.isPrimaryClient,ve,He);return Rm(X,W.targetId,Se.ba),Se.snapshot}(i,C,x,B);const c=await _m(i.localStore,e,!0),h=new MT(e,c.Es),m=h.ga(c.documents),y=ca.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),E=h.applyChanges(m,i.isPrimaryClient,y);Rm(i,n,E.ba);const w=new FT(e,n,h);return i.xa.set(e,w),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),E.snapshot}async function $T(i,e,n){const s=_e(i),a=s.xa.get(e),c=s.Oa.get(a.targetId);if(c.length>1)return s.Oa.set(a.targetId,c.filter(h=>!ou(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await wh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Wh(s.remoteStore,a.targetId),Ih(s,a.targetId)}).catch(qs)):(Ih(s,a.targetId),await wh(s.localStore,a.targetId,!0))}async function qT(i,e){const n=_e(i),s=n.xa.get(e),a=n.Oa.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Wh(n.remoteStore,s.targetId))}async function WT(i,e,n){const s=JT(i);try{const a=await function(h,m){const y=_e(h),E=ft.now(),w=m.reduce((B,K)=>B.add(K.key),Ie());let C,x;return y.persistence.runTransaction("Locally write mutations","readwrite",B=>{let K=gr(),X=Ie();return y.hs.getEntries(B,w).next(W=>{K=W,K.forEach((te,ye)=>{ye.isValidDocument()||(X=X.add(te))})}).next(()=>y.localDocuments.getOverlayedDocuments(B,K)).next(W=>{C=W;const te=[];for(const ye of m){const he=uw(ye,C.get(ye.key).overlayedDocument);he!=null&&te.push(new ei(ye.key,he,og(he.value.mapValue),Xt.exists(!0)))}return y.mutationQueue.addMutationBatch(B,E,te,m)}).next(W=>{x=W;const te=W.applyToLocalDocumentSet(C,X);return y.documentOverlayCache.saveOverlays(B,W.batchId,te)})}).then(()=>({batchId:x.batchId,changes:yg(C)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(h,m,y){let E=h.qa[h.currentUser.toKey()];E||(E=new Ye(Ce)),E=E.insert(m,y),h.qa[h.currentUser.toKey()]=E}(s,a.batchId,n),await fa(s,a.changes),await du(s.remoteStore)}catch(a){const c=Xh(a,"Failed to persist write");n.reject(c)}}async function Jg(i,e){const n=_e(i);try{const s=await rT(n.localStore,e);e.targetChanges.forEach((a,c)=>{const h=n.La.get(c);h&&(Ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.Fa=!0:a.modifiedDocuments.size>0?Ne(h.Fa):a.removedDocuments.size>0&&(Ne(h.Fa),h.Fa=!1))}),await fa(n,s,e)}catch(s){await qs(s)}}function Am(i,e,n){const s=_e(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.xa.forEach((c,h)=>{const m=h.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(h,m){const y=_e(h);y.onlineState=m;let E=!1;y.queries.forEach((w,C)=>{for(const x of C.J_)x.ea(m)&&(E=!0)}),E&&Yh(y)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function HT(i,e,n){const s=_e(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.La.get(e),c=a&&a.key;if(c){let h=new Ye(ue.comparator);h=h.insert(c,Et.newNoDocument(c,me.min()));const m=Ie().add(c),y=new cu(me.min(),new Map,new Ye(Ce),h,m);await Jg(s,y),s.Ba=s.Ba.remove(c),s.La.delete(e),Jh(s)}else await wh(s.localStore,e,!1).then(()=>Ih(s,e,n)).catch(qs)}async function QT(i,e){const n=_e(i),s=e.batch.batchId;try{const a=await nT(n.localStore,e);ey(n,s,null),Zg(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await fa(n,a)}catch(a){await qs(a)}}async function GT(i,e,n){const s=_e(i);try{const a=await function(h,m){const y=_e(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let w;return y.mutationQueue.lookupMutationBatch(E,m).next(C=>(Ne(C!==null),w=C.keys(),y.mutationQueue.removeMutationBatch(E,C))).next(()=>y.mutationQueue.performConsistencyCheck(E)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(E,w,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,w)).next(()=>y.localDocuments.getDocuments(E,w))})}(s.localStore,e);ey(s,e,n),Zg(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await fa(s,a)}catch(a){await qs(a)}}function Zg(i,e){(i.Qa.get(e)||[]).forEach(n=>{n.resolve()}),i.Qa.delete(e)}function ey(i,e,n){const s=_e(i);let a=s.qa[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function Ih(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),n&&i.Ma.Wa(s,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||ty(i,s)})}function ty(i,e){i.Na.delete(e.path.canonicalString());const n=i.Ba.get(e);n!==null&&(Wh(i.remoteStore,n),i.Ba=i.Ba.remove(e),i.La.delete(n),Jh(i))}function Rm(i,e,n){for(const s of n)s instanceof Kg?(i.ka.addReference(s.key,e),KT(i,s)):s instanceof Xg?(re("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||ty(i,s.key)):pe()}function KT(i,e){const n=e.key,s=n.path.canonicalString();i.Ba.get(n)||i.Na.has(s)||(re("SyncEngine","New document in limbo: "+n),i.Na.add(s),Jh(i))}function Jh(i){for(;i.Na.size>0&&i.Ba.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new ue(Be.fromString(e)),s=i.Ka.next();i.La.set(s,new UT(n)),i.Ba=i.Ba.insert(n,s),$g(i.remoteStore,new br(Gn(Oh(n.path)),s,"TargetPurposeLimboResolution",iu.oe))}}async function fa(i,e,n){const s=_e(i),a=[],c=[],h=[];s.xa.isEmpty()||(s.xa.forEach((m,y)=>{h.push(s.Ua(y,e,n).then(E=>{var w;if((E||n)&&s.isPrimaryClient){const C=E?!E.fromCache:(w=n==null?void 0:n.targetChanges.get(y.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(y.targetId,C?"current":"not-current")}if(E){a.push(E);const C=$h.zi(y.targetId,E);c.push(C)}}))}),await Promise.all(h),s.Ma.R_(a),await async function(y,E){const w=_e(y);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>b.forEach(E,x=>b.forEach(x.Wi,B=>w.persistence.referenceDelegate.addReference(C,x.targetId,B)).next(()=>b.forEach(x.Gi,B=>w.persistence.referenceDelegate.removeReference(C,x.targetId,B)))))}catch(C){if(!Ws(C))throw C;re("LocalStore","Failed to update sequence numbers: "+C)}for(const C of E){const x=C.targetId;if(!C.fromCache){const B=w.us.get(x),K=B.snapshotVersion,X=B.withLastLimboFreeSnapshotVersion(K);w.us=w.us.insert(x,X)}}}(s.localStore,c))}async function XT(i,e){const n=_e(i);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const s=await Bg(n.localStore,e);n.currentUser=e,function(c,h){c.Qa.forEach(m=>{m.forEach(y=>{y.reject(new ee(j.CANCELLED,h))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await fa(n,s.Ts)}}function YT(i,e){const n=_e(i),s=n.La.get(e);if(s&&s.Fa)return Ie().add(s.key);{let a=Ie();const c=n.Oa.get(e);if(!c)return a;for(const h of c){const m=n.xa.get(h);a=a.unionWith(m.view.fa)}return a}}function ny(i){const e=_e(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HT.bind(null,e),e.Ma.R_=xT.bind(null,e.eventManager),e.Ma.Wa=LT.bind(null,e.eventManager),e}function JT(i){const e=_e(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GT.bind(null,e),e}class tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return tT(this.persistence,new Zw,e.initialUser,this.serializer)}ja(e){return new zg(bh.ei,this.serializer)}za(e){return new lT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tu.provider={build:()=>new tu};class ZT extends tu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Ne(this.persistence.referenceDelegate instanceof Zl);const s=this.persistence.referenceDelegate.garbageCollector;return new Uw(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new zg(s=>Zl.ei(s,n),this.serializer)}}class Sh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Am(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=XT.bind(null,this.syncEngine),await PT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VT}()}createDatastore(e){const n=hu(e.databaseInfo.databaseId),s=function(c){return new fT(c)}(e.databaseInfo);return function(c,h,m,y){return new mT(c,h,m,y)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,h,m){return new yT(s,a,c,h,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Am(this.syncEngine,n,0),function(){return Em.p()?new Em:new uT}())}createSyncEngine(e,n){return function(a,c,h,m,y,E,w){const C=new zT(a,c,h,m,y,E);return w&&(C.$a=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const c=_e(a);re("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await ha(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Sh.provider={build:()=>new Sh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ee(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(a,c){const h=_e(a),m={documents:c.map(C=>Jl(h.serializer,C))},y=await h.ko("BatchGetDocuments",h.serializer.databaseId,Be.emptyPath(),m,c.length),E=new Map;y.forEach(C=>{const x=Tw(h.serializer,C);E.set(x.key.toString(),x)});const w=[];return c.forEach(C=>{const x=E.get(C.toString());Ne(!!x),w.push(x)}),w}(this.datastore,e);return n.forEach(s=>this.recordVersion(s)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,s)=>{const a=ue.fromPath(s);this.mutations.push(new Rg(a,this.precondition(a)))}),await async function(s,a){const c=_e(s),h={writes:a.map(m=>Og(c.serializer,m))};await c.Oo("Commit",c.serializer.databaseId,Be.emptyPath(),h)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw pe();n=me.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new ee(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(me.min())?Xt.exists(!1):Xt.updateTime(n):Xt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(me.min()))throw new ee(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xt.updateTime(n)}return Xt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,n,s,a,c){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=a,this.deferred=c,this.uu=s.maxAttempts,this.r_=new qh(this.asyncQueue,"transaction_retry")}cu(){this.uu-=1,this.lu()}lu(){this.r_.jo(async()=>{const e=new t0(this.datastore),n=this.hu(e);n&&n.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(a=>{this.Pu(a)}))}).catch(s=>{this.Pu(s)})})}hu(e){try{const n=this.updateFunction(e);return!la(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Pu(e){this.uu>0&&this.Tu(e)?(this.uu-=1,this.asyncQueue.enqueueAndForget(()=>(this.lu(),Promise.resolve()))):this.deferred.reject(e)}Tu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Cg(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Ot.UNAUTHENTICATED,this.clientId=rg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async h=>{re("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(re("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Xh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function ih(i,e){i.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await Bg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Cm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await i0(i);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>wm(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>wm(e.remoteStore,a)),i._onlineComponents=e}async function i0(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await ih(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===j.FAILED_PRECONDITION||a.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Ms("Error using user provided cache. Falling back to memory cache: "+n),await ih(i,new tu)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await ih(i,new ZT(void 0));return i._offlineComponents}async function Zh(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await Cm(i,i._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await Cm(i,new Sh))),i._onlineComponents}function s0(i){return Zh(i).then(e=>e.syncEngine)}function o0(i){return Zh(i).then(e=>e.datastore)}async function Pm(i){const e=await Zh(i),n=e.eventManager;return n.onListen=BT.bind(null,e.syncEngine),n.onUnlisten=$T.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qT.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(i,e,n){if(!n)throw new ee(j.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function a0(i,e,n,s){if(e===!0&&s===!0)throw new ee(j.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Vm(i){if(!ue.isDocumentKey(i))throw new ee(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Dm(i){if(ue.isDocumentKey(i))throw new ee(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function pu(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":pe()}function Os(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ee(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pu(i);throw new ee(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ry((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ee(j.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ee(j.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ee(j.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nm(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new gE;switch(s.type){case"firstParty":return new EE(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ee(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=km.get(n);s&&(re("ComponentProvider","Removing Datastore"),km.delete(n),s.terminate())}(this),Promise.resolve()}}function l0(i,e,n,s={}){var a;const c=(i=Os(i,mu))._getSettings(),h=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==h&&Ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:h,ssl:!1})),s.mockUserToken){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=Ot.MOCK_USER;else{m=K_(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new ee(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ot(E)}i._authCredentials=new yE(new ng(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ti(this.firestore,e,this._query)}}class Yt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}}class Qr extends ti{constructor(e,n,s){super(e,n,Oh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new ue(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function Ah(i,e,...n){if(i=xn(i),iy("collection","path",e),i instanceof mu){const s=Be.fromString(e,...n);return Dm(s),new Qr(i,null,s)}{if(!(i instanceof Yt||i instanceof Qr))throw new ee(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Be.fromString(e,...n));return Dm(s),new Qr(i.firestore,null,s)}}function sy(i,e,...n){if(i=xn(i),arguments.length===1&&(e=rg.newId()),iy("doc","path",e),i instanceof mu){const s=Be.fromString(e,...n);return Vm(s),new Yt(i,null,new ue(s))}{if(!(i instanceof Yt||i instanceof Qr))throw new ee(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Be.fromString(e,...n));return Vm(s),new Yt(i.firestore,i instanceof Qr?i.converter:null,new ue(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new qh(this,"async_queue_retry"),this.fu=()=>{const s=rh();s&&re("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=rh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const n=rh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const n=new Hr;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ws(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(s);throw mr("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const a=Kh.createAndSchedule(this,e,n,s,c=>this.Su(c));return this.Eu.push(a),a}pu(){this.Au&&pe()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.Eu)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.Eu.indexOf(e);this.Eu.splice(n,1)}}function Lm(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1}(i,["next","error","complete"])}class aa extends mu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new xm,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xm(e),this._firestoreClient=void 0,await e}}}function u0(i,e){const n=typeof i=="object"?i:iE(),s=typeof i=="string"?i:"(default)",a=eE(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=Q_("firestore");c&&l0(a,...c)}return a}function ef(i){if(i._terminated)throw new ee(j.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||c0(i),i._firestoreClient}function c0(i){var e,n,s;const a=i._freezeSettings(),c=function(m,y,E,w){return new OE(m,y,E,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,ry(w.experimentalLongPollingOptions),w.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new r0(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xi(Ct.fromBase64String(e))}catch(n){throw new ee(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xi(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=/^__.*__$/;class f0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ei(e,this.data,this.fieldMask,n,this.fieldTransforms):new ua(e,this.data,n,this.fieldTransforms)}}class oy{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ei(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ay(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class sf{constructor(e,n,s,a,c,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new sf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Bu(e),a}Lu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return nu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(ay(this.Mu)&&h0.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class d0{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||hu(e)}$u(e,n,s,a=!1){return new sf({Mu:e,methodName:n,Ku:s,path:Rt.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function of(i){const e=i._freezeSettings(),n=hu(i._databaseId);return new d0(i._databaseId,!!e.ignoreUndefinedProperties,n)}function ly(i,e,n,s,a,c={}){const h=i.$u(c.merge||c.mergeFields?2:0,e,n,a);af("Data must be an object, but it was:",h,s);const m=uy(s,h);let y,E;if(c.merge)y=new on(h.fieldMask),E=h.fieldTransforms;else if(c.mergeFields){const w=[];for(const C of c.mergeFields){const x=Rh(e,C,n);if(!h.contains(x))throw new ee(j.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);hy(w,x)||w.push(x)}y=new on(w),E=h.fieldTransforms.filter(C=>y.covers(C.field))}else y=null,E=h.fieldTransforms;return new f0(new Bt(m),y,E)}class yu extends tf{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yu}}function p0(i,e,n,s){const a=i.$u(1,e,n);af("Data must be an object, but it was:",a,s);const c=[],h=Bt.empty();Zr(s,(y,E)=>{const w=lf(e,y,n);E=xn(E);const C=a.Lu(w);if(E instanceof yu)c.push(w);else{const x=da(E,C);x!=null&&(c.push(w),h.set(w,x))}});const m=new on(c);return new oy(h,m,a.fieldTransforms)}function m0(i,e,n,s,a,c){const h=i.$u(1,e,n),m=[Rh(e,s,n)],y=[a];if(c.length%2!=0)throw new ee(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)m.push(Rh(e,c[x])),y.push(c[x+1]);const E=[],w=Bt.empty();for(let x=m.length-1;x>=0;--x)if(!hy(E,m[x])){const B=m[x];let K=y[x];K=xn(K);const X=h.Lu(B);if(K instanceof yu)E.push(B);else{const W=da(K,X);W!=null&&(E.push(B),w.set(B,W))}}const C=new on(E);return new oy(w,C,h.fieldTransforms)}function g0(i,e,n,s=!1){return da(n,i.$u(s?4:3,e))}function da(i,e){if(cy(i=xn(i)))return af("Unsupported field value:",e,i),uy(i,e);if(i instanceof tf)return function(s,a){if(!ay(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const c=[];let h=0;for(const m of s){let y=da(m,a.ku(h));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),h++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=xn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return rw(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ft.fromDate(s);return{timestampValue:Yl(a.serializer,c)}}if(s instanceof ft){const c=new ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yl(a.serializer,c)}}if(s instanceof nf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof xi)return{bytesValue:Dg(a.serializer,s._byteString)};if(s instanceof Yt){const c=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw a.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Bh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof rf)return function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw m.qu("VectorValues must only contain numeric values.");return Mh(m.serializer,y)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${pu(s)}`)}(i,e)}function uy(i,e){const n={};return ig(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(i,(s,a)=>{const c=da(a,e.Ou(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function cy(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ft||i instanceof nf||i instanceof xi||i instanceof Yt||i instanceof tf||i instanceof rf)}function af(i,e,n){if(!cy(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=pu(n);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function Rh(i,e,n){if((e=xn(e))instanceof gu)return e._internalPath;if(typeof e=="string")return lf(i,e);throw nu("Field path arguments must be of type string or ",i,!1,void 0,n)}const y0=new RegExp("[~\\*/\\[\\]]");function lf(i,e,n){if(e.search(y0)>=0)throw nu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new gu(...e.split("."))._internalPath}catch{throw nu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function nu(i,e,n,s,a){const c=s&&!s.isEmpty(),h=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||h)&&(y+=" (found",c&&(y+=` in field ${s}`),h&&(y+=` in document ${a}`),y+=")"),new ee(j.INVALID_ARGUMENT,m+i+y)}function hy(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _0 extends ru{data(){return super.data()}}function uf(i,e){return typeof e=="string"?lf(i,e):e instanceof gu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ee(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cf{}class hf extends cf{}function E0(i,e,...n){let s=[];e instanceof cf&&s.push(e),s=s.concat(n),function(c){const h=c.filter(y=>y instanceof df).length,m=c.filter(y=>y instanceof ff).length;if(h>1||h>0&&m>0)throw new ee(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class ff extends hf{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new ff(e,n,s)}_apply(e){const n=this._parse(e);return fy(e._query,n),new ti(e.firestore,e.converter,yh(e._query,n))}_parse(e){const n=of(e.firestore);return function(c,h,m,y,E,w,C){let x;if(E.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ee(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Mm(C,w);const B=[];for(const K of C)B.push(Om(y,c,K));x={arrayValue:{values:B}}}else x=Om(y,c,C)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Mm(C,w),x=g0(m,h,C,w==="in"||w==="not-in");return ot.create(E,w,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class df extends cf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new df(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,c){let h=a;const m=c.getFlattenedFilters();for(const y of m)fy(h,y),h=yh(h,y)}(e._query,n),new ti(e.firestore,e.converter,yh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pf extends hf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pf(e,n)}_apply(e){const n=function(a,c,h){if(a.startAt!==null)throw new ee(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ee(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ia(c,h)}(e._query,this._field,this._direction);return new ti(e.firestore,e.converter,function(a,c){const h=a.explicitOrderBy.concat([c]);return new Hs(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function w0(i,e="asc"){const n=e,s=uf("orderBy",i);return pf._create(s,n)}class mf extends hf{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new mf(e,n,s)}_apply(e){return new ti(e.firestore,e.converter,Gl(e._query,this._limit,this._limitType))}}function T0(i){return mf._create("limit",i,"F")}function Om(i,e,n){if(typeof(n=xn(n))=="string"){if(n==="")throw new ee(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dg(e)&&n.indexOf("/")!==-1)throw new ee(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Be.fromString(n));if(!ue.isDocumentKey(s))throw new ee(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return em(i,new ue(s))}if(n instanceof Yt)return em(i,n._key);throw new ee(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pu(n)}.`)}function Mm(i,e){if(!Array.isArray(i)||i.length===0)throw new ee(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fy(i,e){const n=function(a,c){for(const h of a)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dy{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Zr(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(h=>nt(h.doubleValue));return new rf(c)}convertGeoPoint(e){return new nf(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=su(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ta(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Be.fromString(e);Ne(Ug(s));const a=new na(s.get(1),s.get(3)),c=new ue(s.popFirst(5));return a.isEqual(n)||mr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class I0 extends dy{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gf extends ru{constructor(e,n,s,a,c,h){super(e,n,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(uf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class jl extends gf{data(e={}){return super.data(e)}}class S0{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Ns(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new jl(this._firestore,this._userDataWriter,s.key,s,new Ns(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(m=>{const y=new jl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Ns(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}})}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const y=new jl(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Ns(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let E=-1,w=-1;return m.type!==0&&(E=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),w=h.indexOf(m.doc.key)),{type:A0(m.type),doc:y,oldIndex:E,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function A0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}class yf extends dy{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function R0(i,e){const n=Os(i.firestore,aa),s=sy(i),a=py(i.converter,e);return P0(n,[ly(of(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,Xt.exists(!1))]).then(()=>s)}function C0(i,...e){var n,s,a;i=xn(i);let c={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Lm(e[h])||(c=e[h],h++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Lm(e[h])){const C=e[h];e[h]=(n=C.next)===null||n===void 0?void 0:n.bind(C),e[h+1]=(s=C.error)===null||s===void 0?void 0:s.bind(C),e[h+2]=(a=C.complete)===null||a===void 0?void 0:a.bind(C)}let y,E,w;if(i instanceof Yt)E=Os(i.firestore,aa),w=Oh(i._key.path),y={next:C=>{e[h]&&e[h](k0(E,i,C))},error:e[h+1],complete:e[h+2]};else{const C=Os(i,ti);E=Os(C.firestore,aa),w=C._query;const x=new yf(E);y={next:B=>{e[h]&&e[h](new S0(E,x,C,B))},error:e[h+1],complete:e[h+2]},v0(i._query)}return function(x,B,K,X){const W=new e0(X),te=new OT(B,W,K);return x.asyncQueue.enqueueAndForget(async()=>DT(await Pm(x),te)),()=>{W.eu(),x.asyncQueue.enqueueAndForget(async()=>NT(await Pm(x),te))}}(ef(E),w,m,y)}function P0(i,e){return function(s,a){const c=new Hr;return s.asyncQueue.enqueueAndForget(async()=>WT(await s0(s),a,c)),c.promise}(ef(i),e)}function k0(i,e,n){const s=n.docs.get(e._key),a=new yf(i);return new gf(i,a,e._key,s,new Ns(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0={maxAttempts:5};function qo(i,e){if((i=xn(i)).firestore!==e)throw new ee(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends class{constructor(n,s){this._firestore=n,this._transaction=s,this._dataReader=of(n)}get(n){const s=qo(n,this._firestore),a=new I0(this._firestore);return this._transaction.lookup([s._key]).then(c=>{if(!c||c.length!==1)return pe();const h=c[0];if(h.isFoundDocument())return new ru(this._firestore,a,h.key,h,s.converter);if(h.isNoDocument())return new ru(this._firestore,a,s._key,null,s.converter);throw pe()})}set(n,s,a){const c=qo(n,this._firestore),h=py(c.converter,s,a),m=ly(this._dataReader,"Transaction.set",c._key,h,c.converter!==null,a);return this._transaction.set(c._key,m),this}update(n,s,a,...c){const h=qo(n,this._firestore);let m;return m=typeof(s=xn(s))=="string"||s instanceof gu?m0(this._dataReader,"Transaction.update",h._key,s,a,c):p0(this._dataReader,"Transaction.update",h._key,s),this._transaction.update(h._key,m),this}delete(n){const s=qo(n,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=qo(e,this._firestore),s=new yf(this._firestore);return super.get(e).then(a=>new gf(this._firestore,s,n._key,a._document,new Ns(!1,!1),n.converter))}}function N0(i,e,n){i=Os(i,aa);const s=Object.assign(Object.assign({},V0),n);return function(c){if(c.maxAttempts<1)throw new ee(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,h,m){const y=new Hr;return c.asyncQueue.enqueueAndForget(async()=>{const E=await o0(c);new n0(c.asyncQueue,E,m,h,y).cu()}),y.promise}(ef(i),a=>e(new D0(i,a)),s)}(function(e,n=!0){(function(a){$s=a})(rE),Wl(new Zo("firestore",(s,{instanceIdentifier:a,options:c})=>{const h=s.getProvider("app").getImmediate(),m=new aa(new _E(s.getProvider("auth-internal")),new TE(s.getProvider("app-check-internal")),function(E,w){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new ee(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(E.options.projectId,w)}(h,a),h);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),xs(Gp,"4.7.6",e),xs(Gp,"4.7.6","esm2017")})();const x0={apiKey:"AIzaSyBEZgAk2IjPwrzNuIRZIX1naes3moHZifY",authDomain:"project-7547149738420636194.firebaseapp.com",projectId:"project-7547149738420636194",storageBucket:"project-7547149738420636194.firebasestorage.app",messagingSenderId:"4317860658",appId:"1:4317860658:web:b2a44eb37eaefc81b8bd2b",measurementId:"G-3QNH70ZXVV"},L0=Qm(x0),bl=u0(L0);function my({n:i=4}){const e=Mp(i),[n,s]=Hn.useState(()=>{const te=window.localStorage.getItem("score");return te?JSON.parse(te):0}),[a,c]=Hn.useState(()=>{const te=window.localStorage.getItem("bestScore");return te?JSON.parse(te):0}),[h,m]=Hn.useState(()=>{const te=window.localStorage.getItem("onGoing");return te?JSON.parse(te):"1"}),[y,E]=Hn.useState(()=>{const te=window.localStorage.getItem("board");return te?JSON.parse(te):e}),[w,C]=Hn.useState(()=>{const te=window.localStorage.getItem("username");return te?JSON.parse(te):""}),x=async()=>{if(B(),!!w.trim())try{const te=w.trim(),ye=Ah(bl,"scores"),he=sy(ye,te);await N0(bl,async ve=>{const He=await ve.get(he);if(He.exists()){const Se=He.data().score;n>Se&&ve.update(he,{score:n,date:new Date})}else ve.set(he,{name:w.trim(),score:n,date:new Date})}),K()}catch(te){console.error("Failed to save score: ",te)}},B=async()=>{if(n!=0)try{await R0(Ah(bl,"games"),{name:w,score:n,date:new Date})}catch(te){console.error("Error saving game: ",te)}},K=()=>{c(Math.max(n,a)),E(Mp(i)),s(0),m(!0),window.localStorage.removeItem("board"),window.localStorage.removeItem("score"),window.localStorage.removeItem("onGoing")};Hn.useEffect(()=>{window.localStorage.setItem("board",JSON.stringify(y)),window.localStorage.setItem("score",JSON.stringify(n)),window.localStorage.setItem("bestScore",JSON.stringify(a)),window.localStorage.setItem("onGoing",JSON.stringify(h)),window.localStorage.setItem("username",JSON.stringify(w)),M_(y)||m("2")},[y,n,a,h,w]),Hn.useEffect(()=>{const te=ye=>{let he=y.slice(),ve=0;switch(ye.key){case"ArrowUp":[he,ve]=L_(y);break;case"ArrowDown":[he,ve]=O_(y);break;case"ArrowLeft":[he,ve]=N_(y);break;case"ArrowRight":[he,ve]=x_(y);break}F_(y,he)||(he=D_(he),E(he),s(n+ve))};return window.addEventListener("keydown",te),()=>{window.removeEventListener("keydown",te)}});const X=w!=""?"Play Again":"Save score",W=w!=""?"Username:":"Would you like to save your score?";return Re.jsxs("main",{className:"board",children:[Re.jsx("h1",{children:"2048"}),Re.jsx("p",{children:w===""?"Complete a game to set username":""}),Re.jsx(zm,{score:n,bestScore:a}),Re.jsx("section",{className:"game",children:y.map((te,ye)=>Re.jsx(Um,{value:te,children:y[ye]},ye))}),Re.jsx("button",{onClick:()=>{B(),K()},children:"Reset"}),h=="2"&&Re.jsx("section",{className:"game-over",children:Re.jsxs("div",{children:[Re.jsx("h2",{children:"Game Over"}),Re.jsxs("div",{children:[Re.jsx("p",{children:"Score:"}),Re.jsx("strong",{children:n})]}),Re.jsxs("div",{className:"score-form",children:[Re.jsx("h3",{children:W}),Re.jsx("input",{type:"text",placeholder:"Enter your username",value:w,onChange:te=>C(te.target.value)}),Re.jsx("button",{onClick:x,children:X})]})]})})]})}my.propTypes={n:Fm.PropTypes.number};function O0(){const[i,e]=Hn.useState([]);return Hn.useEffect(()=>{const n=E0(Ah(bl,"scores"),w0("score","desc"),T0(5)),s=C0(n,a=>{const c=[];a.forEach(h=>{c.push(h.data())}),e(c)});return()=>s()},[]),Re.jsxs("div",{className:"top-scores",children:[Re.jsx("h3",{children:"Top 5 Scores"}),Re.jsx("ol",{children:i.map((n,s)=>Re.jsxs("li",{children:[n.name,": ",n.score,s===0&&" ",s===1&&" ",s===2&&" "]},s))})]})}function M0(){return Re.jsxs(Re.Fragment,{children:[Re.jsx(my,{}),Re.jsx(O0,{})]})}C_.createRoot(document.getElementById("root")).render(Re.jsx(Hn.StrictMode,{children:Re.jsx(M0,{})}));
